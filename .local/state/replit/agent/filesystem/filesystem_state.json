{"file_contents":{"client/src/pages/master/Branches.tsx":{"content":"import { Building2 } from \"lucide-react\";\n\nexport default function Branches() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Building2 className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          إدارة الفروع\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة فروع الشركة\n      </p>\n    </div>\n  );\n}\n","size_bytes":489},"client/src/pages/reports/LedgerAccount.tsx":{"content":"import { FileText } from \"lucide-react\";\n\nexport default function LedgerAccount() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <FileText className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          كشف حساب أستاذ\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: عرض كشف حساب أستاذ تفصيلي\n      </p>\n    </div>\n  );\n}\n","size_bytes":509},"client/src/pages/hr/Payroll.tsx":{"content":"import { Banknote } from \"lucide-react\";\n\nexport default function Payroll() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Banknote className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          الرواتب\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة رواتب الموظفين\n      </p>\n    </div>\n  );\n}\n","size_bytes":483},"client/src/pages/projects/Budgets.tsx":{"content":"import { Calculator } from \"lucide-react\";\n\nexport default function Budgets() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Calculator className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          ميزانيات المشاريع\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة ميزانيات المشاريع\n      </p>\n    </div>\n  );\n}\n","size_bytes":512},"client/src/pages/settings/Backup.tsx":{"content":"import { HardDrive } from \"lucide-react\";\n\nexport default function Backup() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <HardDrive className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          النسخ الاحتياطي\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة النسخ الاحتياطي للبيانات\n      </p>\n    </div>\n  );\n}\n","size_bytes":518},"client/src/pages/reports/CustomerStatement.tsx":{"content":"import { FileCheck } from \"lucide-react\";\n\nexport default function CustomerStatement() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <FileCheck className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          كشف حساب عميل\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: عرض كشف حساب تفصيلي لعميل معين\n      </p>\n    </div>\n  );\n}\n","size_bytes":522},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/pages/documents/DocumentStorage.tsx":{"content":"import { FolderOpen } from \"lucide-react\";\n\nexport default function DocumentStorage() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <FolderOpen className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          تخزين المستندات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تخزين وإدارة المستندات الإلكترونية\n      </p>\n    </div>\n  );\n}\n","size_bytes":537},"client/src/pages/cash-bank/CashBoxes.tsx":{"content":"import { Wallet } from \"lucide-react\";\n\nexport default function CashBoxes() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Wallet className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          الصناديق\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة الصناديق النقدية\n      </p>\n    </div>\n  );\n}\n","size_bytes":487},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/pages/maintenance/WorkOrders.tsx":{"content":"import { Wrench } from \"lucide-react\";\n\nexport default function WorkOrders() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Wrench className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          طلبات الصيانة\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة طلبات الصيانة والإصلاح\n      </p>\n    </div>\n  );\n}\n","size_bytes":508},"client/src/pages/hr/AllowancesDeductions.tsx":{"content":"import { DollarSign } from \"lucide-react\";\n\nexport default function AllowancesDeductions() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <DollarSign className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          البدلات والاستقطاعات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة البدلات والاستقطاعات للموظفين\n      </p>\n    </div>\n  );\n}\n","size_bytes":554},"client/src/pages/meetings/Minutes.tsx":{"content":"import { FileText } from \"lucide-react\";\n\nexport default function MeetingMinutes() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <FileText className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          محاضر الاجتماعات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: كتابة وحفظ محاضر الاجتماعات\n      </p>\n    </div>\n  );\n}\n","size_bytes":520},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { SidebarProvider, SidebarTrigger, SidebarInset } from \"@/components/ui/sidebar\";\nimport { AppSidebar } from \"@/components/app-sidebar\";\nimport { Moon, Sun } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useState, useEffect } from \"react\";\n\n// Main Pages\nimport Dashboard from \"@/pages/Dashboard\";\nimport NotFound from \"@/pages/not-found\";\n\n// Accounting Module - Master Data\nimport FiscalPeriods from \"@/pages/master/FiscalPeriods\";\nimport Branches from \"@/pages/master/Branches\";\nimport Currencies from \"@/pages/master/Currencies\";\nimport ChartOfAccounts from \"@/pages/master/ChartOfAccounts\";\nimport CostCenters from \"@/pages/master/CostCenters\";\nimport Customers from \"@/pages/master/Customers\";\nimport Suppliers from \"@/pages/master/Suppliers\";\n\n// Accounting Module - Transactions\nimport JournalEntries from \"@/pages/transactions/JournalEntries\";\nimport Receipts from \"@/pages/transactions/Receipts\";\nimport Payments from \"@/pages/transactions/Payments\";\n\n// Accounting Module - Reports\nimport GeneralLedgerTrialBalance from \"@/pages/reports/GeneralLedgerTrialBalance\";\nimport LedgerAccount from \"@/pages/reports/LedgerAccount\";\nimport CustomerBalances from \"@/pages/reports/CustomerBalances\";\nimport CustomerStatement from \"@/pages/reports/CustomerStatement\";\nimport CostCentersReports from \"@/pages/reports/CostCentersReports\";\nimport IncomeStatement from \"@/pages/reports/IncomeStatement\";\nimport BalanceSheet from \"@/pages/reports/BalanceSheet\";\nimport CashFlowStatement from \"@/pages/reports/CashFlowStatement\";\n\n// Accounting Module - Closing\nimport CloseEntries from \"@/pages/closing/CloseEntries\";\nimport TransferBalances from \"@/pages/closing/TransferBalances\";\n\n// Inventory Module\nimport InventoryItems from \"@/pages/inventory/Items\";\nimport Warehouses from \"@/pages/inventory/Warehouses\";\nimport StockMovements from \"@/pages/inventory/StockMovements\";\nimport StockCount from \"@/pages/inventory/StockCount\";\nimport StockBalance from \"@/pages/inventory/reports/StockBalance\";\nimport ItemMovement from \"@/pages/inventory/reports/ItemMovement\";\n\n// Sales Module\nimport SalesCustomers from \"@/pages/sales/Customers\";\nimport Quotations from \"@/pages/sales/Quotations\";\nimport SalesOrders from \"@/pages/sales/Orders\";\nimport SalesInvoices from \"@/pages/sales/SalesInvoices\";\nimport SalesReturns from \"@/pages/sales/Returns\";\nimport SalesReport from \"@/pages/sales/reports/SalesReport\";\nimport SalesCustomerBalances from \"@/pages/sales/reports/CustomerBalances\";\n\n// Purchasing Module\nimport PurchasingSuppliers from \"@/pages/purchasing/Suppliers\";\nimport PurchaseOrders from \"@/pages/purchasing/PurchaseOrders\";\nimport GoodsReceipt from \"@/pages/purchasing/GoodsReceipt\";\nimport PurchaseInvoices from \"@/pages/purchasing/Invoices\";\nimport PurchaseReturns from \"@/pages/purchasing/Returns\";\nimport PurchaseReport from \"@/pages/purchasing/reports/PurchaseReport\";\nimport SupplierBalances from \"@/pages/purchasing/reports/SupplierBalances\";\n\n// Cash & Bank Module\nimport BankAccounts from \"@/pages/cash-bank/BankAccounts\";\nimport CashBoxes from \"@/pages/cash-bank/CashBoxes\";\nimport ReceiptVouchers from \"@/pages/cash-bank/ReceiptVouchers\";\nimport PaymentVouchers from \"@/pages/cash-bank/PaymentVouchers\";\nimport CashBankPayments from \"@/pages/cash-bank/Payments\";\nimport BankReconciliation from \"@/pages/cash-bank/Reconciliation\";\n\n// HR Module\nimport Employees from \"@/pages/hr/Employees\";\nimport Attendance from \"@/pages/hr/Attendance\";\nimport Payroll from \"@/pages/hr/Payroll\";\nimport AllowancesDeductions from \"@/pages/hr/AllowancesDeductions\";\nimport PayrollSheet from \"@/pages/hr/reports/PayrollSheet\";\nimport AttendanceReport from \"@/pages/hr/reports/AttendanceReport\";\n\n// Fixed Assets Module\nimport AssetsRegister from \"@/pages/fixed-assets/Register\";\nimport Depreciation from \"@/pages/fixed-assets/Depreciation\";\nimport AssetTransfer from \"@/pages/fixed-assets/Transfer\";\nimport AssetDisposal from \"@/pages/fixed-assets/Disposal\";\nimport AssetMaintenance from \"@/pages/fixed-assets/Maintenance\";\n\n// POS Module\nimport SaleScreen from \"@/pages/pos/SaleScreen\";\nimport DailyInvoices from \"@/pages/pos/DailyInvoices\";\nimport POSReports from \"@/pages/pos/POSReports\";\nimport Shifts from \"@/pages/pos/Shifts\";\n\n// Projects Module\nimport ProjectsList from \"@/pages/projects/ProjectsList\";\nimport Tasks from \"@/pages/projects/Tasks\";\nimport Budgets from \"@/pages/projects/Budgets\";\nimport ProjectReports from \"@/pages/projects/ProjectReports\";\n\n// Production Module\nimport ProductionOrders from \"@/pages/production/ProductionOrders\";\nimport BillOfMaterials from \"@/pages/production/BillOfMaterials\";\nimport ProductionLines from \"@/pages/production/ProductionLines\";\nimport QualityControl from \"@/pages/production/QualityControl\";\n\n// Contracts Module\nimport ContractsList from \"@/pages/contracts/ContractsList\";\nimport Renewals from \"@/pages/contracts/Renewals\";\nimport Alerts from \"@/pages/contracts/Alerts\";\n\n// E-commerce Module\nimport EcommerceStore from \"@/pages/ecommerce/Store\";\nimport OnlineOrders from \"@/pages/ecommerce/OnlineOrders\";\nimport EcommerceProducts from \"@/pages/ecommerce/Products\";\nimport OnlineCustomers from \"@/pages/ecommerce/OnlineCustomers\";\n\n// Shipping Module\nimport Carriers from \"@/pages/shipping/Carriers\";\nimport Shipments from \"@/pages/shipping/Shipments\";\nimport Tracking from \"@/pages/shipping/Tracking\";\n\n// CRM Module\nimport Leads from \"@/pages/crm/Leads\";\nimport Opportunities from \"@/pages/crm/Opportunities\";\nimport Activities from \"@/pages/crm/Activities\";\nimport Campaigns from \"@/pages/crm/Campaigns\";\nimport CRMTasks from \"@/pages/crm/Tasks\";\nimport CRMAnalytics from \"@/pages/crm/Analytics\";\nimport CRMReports from \"@/pages/crm/Reports\";\n\n// Budgets Module\nimport AnnualBudgets from \"@/pages/budgets/AnnualBudgets\";\nimport ActualVsBudget from \"@/pages/budgets/ActualVsBudget\";\nimport Forecasts from \"@/pages/budgets/Forecasts\";\nimport Variances from \"@/pages/budgets/Variances\";\nimport BudgetReports from \"@/pages/budgets/BudgetReports\";\n\n// Quality Module\nimport QualityStandards from \"@/pages/quality/QualityStandards\";\nimport Inspections from \"@/pages/quality/Inspections\";\nimport NonConformance from \"@/pages/quality/NonConformance\";\nimport CorrectiveActions from \"@/pages/quality/CorrectiveActions\";\nimport QualityReports from \"@/pages/quality/QualityReports\";\n\n// Maintenance Module\nimport MaintenanceSchedule from \"@/pages/maintenance/MaintenanceSchedule\";\nimport WorkOrders from \"@/pages/maintenance/WorkOrders\";\nimport SpareParts from \"@/pages/maintenance/SpareParts\";\nimport MaintenanceCosts from \"@/pages/maintenance/MaintenanceCosts\";\nimport MaintenanceReports from \"@/pages/maintenance/MaintenanceReports\";\n\n// Documents Module\nimport DocumentStorage from \"@/pages/documents/DocumentStorage\";\nimport DocumentCategories from \"@/pages/documents/Categories\";\nimport DocumentSearch from \"@/pages/documents/Search\";\nimport DocumentArchive from \"@/pages/documents/Archive\";\n\n// Loyalty Module\nimport LoyaltyPrograms from \"@/pages/loyalty/Programs\";\nimport LoyaltyPoints from \"@/pages/loyalty/Points\";\nimport Coupons from \"@/pages/loyalty/Coupons\";\nimport LoyaltyTiers from \"@/pages/loyalty/Tiers\";\nimport LoyaltyReports from \"@/pages/loyalty/LoyaltyReports\";\n\n// BI Module\nimport BIDashboards from \"@/pages/bi/Dashboards\";\nimport KPIs from \"@/pages/bi/KPIs\";\nimport CustomReports from \"@/pages/bi/CustomReports\";\nimport DataAnalysis from \"@/pages/bi/DataAnalysis\";\nimport DataExport from \"@/pages/bi/DataExport\";\nimport Trends from \"@/pages/bi/Trends\";\n\n// Distributors Module\nimport DistributorList from \"@/pages/distributors/DistributorList\";\nimport Commissions from \"@/pages/distributors/Commissions\";\nimport Territories from \"@/pages/distributors/Territories\";\nimport DistributorTargets from \"@/pages/distributors/Targets\";\nimport DistributorReports from \"@/pages/distributors/DistributorReports\";\n\n// Meetings Module\nimport MeetingsList from \"@/pages/meetings/MeetingsList\";\nimport MeetingMinutes from \"@/pages/meetings/Minutes\";\nimport MeetingDecisions from \"@/pages/meetings/Decisions\";\nimport MeetingFollowup from \"@/pages/meetings/Followup\";\n\n// Risk Management Module\nimport RiskIdentification from \"@/pages/risk-management/RiskIdentification\";\nimport RiskAssessment from \"@/pages/risk-management/RiskAssessment\";\nimport RiskMitigation from \"@/pages/risk-management/Mitigation\";\nimport RiskMonitoring from \"@/pages/risk-management/Monitoring\";\n\n// Settings\nimport CompanySettings from \"@/pages/settings/CompanySettings\";\nimport ModuleManagement from \"@/pages/settings/ModuleManagement\";\nimport SettingsBranches from \"@/pages/settings/SettingsBranches\";\nimport SettingsCurrencies from \"@/pages/settings/SettingsCurrencies\";\nimport SettingsUsers from \"@/pages/settings/Users\";\nimport Backup from \"@/pages/settings/Backup\";\n\nfunction Router() {\n  return (\n    <Switch>\n      {/* Dashboard */}\n      <Route path=\"/\" component={Dashboard} />\n      \n      {/* 1. Accounting Module */}\n      {/* Master Data */}\n      <Route path=\"/accounting/fiscal-periods\" component={FiscalPeriods} />\n      <Route path=\"/accounting/cost-centers\" component={CostCenters} />\n      <Route path=\"/accounting/chart-of-accounts\" component={ChartOfAccounts} />\n      <Route path=\"/master/customers\" component={Customers} />\n      <Route path=\"/master/suppliers\" component={Suppliers} />\n      <Route path=\"/master/branches\" component={Branches} />\n      <Route path=\"/master/currencies\" component={Currencies} />\n      \n      {/* Transactions */}\n      <Route path=\"/accounting/journal-entries\" component={JournalEntries} />\n      <Route path=\"/accounting/receipts\" component={Receipts} />\n      <Route path=\"/accounting/payments\" component={Payments} />\n      \n      {/* Reports */}\n      <Route path=\"/accounting/reports/trial-balance\" component={GeneralLedgerTrialBalance} />\n      <Route path=\"/accounting/reports/ledger-account\" component={LedgerAccount} />\n      <Route path=\"/accounting/reports/customer-balances\" component={CustomerBalances} />\n      <Route path=\"/accounting/reports/customer-statement\" component={CustomerStatement} />\n      <Route path=\"/accounting/reports/cost-centers\" component={CostCentersReports} />\n      <Route path=\"/accounting/reports/income-statement\" component={IncomeStatement} />\n      <Route path=\"/accounting/reports/balance-sheet\" component={BalanceSheet} />\n      <Route path=\"/accounting/reports/cash-flow\" component={CashFlowStatement} />\n      \n      {/* Closing */}\n      <Route path=\"/accounting/closing/close-entries\" component={CloseEntries} />\n      <Route path=\"/accounting/closing/transfer-balances\" component={TransferBalances} />\n\n      {/* 2. Inventory Module */}\n      <Route path=\"/inventory/items\" component={InventoryItems} />\n      <Route path=\"/inventory/warehouses\" component={Warehouses} />\n      <Route path=\"/inventory/movements\" component={StockMovements} />\n      <Route path=\"/inventory/stock-count\" component={StockCount} />\n      <Route path=\"/inventory/reports/stock-balance\" component={StockBalance} />\n      <Route path=\"/inventory/reports/item-movement\" component={ItemMovement} />\n\n      {/* 3. Sales Module */}\n      <Route path=\"/sales/customers\" component={SalesCustomers} />\n      <Route path=\"/sales/quotations\" component={Quotations} />\n      <Route path=\"/sales/orders\" component={SalesOrders} />\n      <Route path=\"/sales/invoices\" component={SalesInvoices} />\n      <Route path=\"/sales/returns\" component={SalesReturns} />\n      <Route path=\"/sales/reports/sales-report\" component={SalesReport} />\n      <Route path=\"/sales/reports/customer-balances\" component={SalesCustomerBalances} />\n\n      {/* 4. Purchasing Module */}\n      <Route path=\"/purchasing/suppliers\" component={PurchasingSuppliers} />\n      <Route path=\"/purchasing/purchase-orders\" component={PurchaseOrders} />\n      <Route path=\"/purchasing/goods-receipt\" component={GoodsReceipt} />\n      <Route path=\"/purchasing/invoices\" component={PurchaseInvoices} />\n      <Route path=\"/purchasing/returns\" component={PurchaseReturns} />\n      <Route path=\"/purchasing/reports/purchase-report\" component={PurchaseReport} />\n      <Route path=\"/purchasing/reports/supplier-balances\" component={SupplierBalances} />\n\n      {/* 5. POS Module */}\n      <Route path=\"/pos/sale-screen\" component={SaleScreen} />\n      <Route path=\"/pos/daily-invoices\" component={DailyInvoices} />\n      <Route path=\"/pos/reports\" component={POSReports} />\n      <Route path=\"/pos/shifts\" component={Shifts} />\n\n      {/* 6. Cash & Bank Module */}\n      <Route path=\"/cash-bank/bank-accounts\" component={BankAccounts} />\n      <Route path=\"/cash-bank/cash-boxes\" component={CashBoxes} />\n      <Route path=\"/cash-bank/receipt-vouchers\" component={ReceiptVouchers} />\n      <Route path=\"/cash-bank/payment-vouchers\" component={PaymentVouchers} />\n      <Route path=\"/cash-bank/payments\" component={CashBankPayments} />\n      <Route path=\"/cash-bank/reconciliation\" component={BankReconciliation} />\n\n      {/* 7. HR Module */}\n      <Route path=\"/hr/employees\" component={Employees} />\n      <Route path=\"/hr/attendance\" component={Attendance} />\n      <Route path=\"/hr/payroll\" component={Payroll} />\n      <Route path=\"/hr/allowances-deductions\" component={AllowancesDeductions} />\n      <Route path=\"/hr/reports/payroll-sheet\" component={PayrollSheet} />\n      <Route path=\"/hr/reports/attendance\" component={AttendanceReport} />\n\n      {/* 8. Fixed Assets Module */}\n      <Route path=\"/fixed-assets/register\" component={AssetsRegister} />\n      <Route path=\"/fixed-assets/depreciation\" component={Depreciation} />\n      <Route path=\"/fixed-assets/transfer\" component={AssetTransfer} />\n      <Route path=\"/fixed-assets/disposal\" component={AssetDisposal} />\n      <Route path=\"/fixed-assets/maintenance\" component={AssetMaintenance} />\n\n      {/* 9. Projects Module */}\n      <Route path=\"/projects/list\" component={ProjectsList} />\n      <Route path=\"/projects/tasks\" component={Tasks} />\n      <Route path=\"/projects/budgets\" component={Budgets} />\n      <Route path=\"/projects/reports\" component={ProjectReports} />\n\n      {/* 10. Production Module */}\n      <Route path=\"/production/orders\" component={ProductionOrders} />\n      <Route path=\"/production/bom\" component={BillOfMaterials} />\n      <Route path=\"/production/lines\" component={ProductionLines} />\n      <Route path=\"/production/quality\" component={QualityControl} />\n\n      {/* 11. Contracts Module */}\n      <Route path=\"/contracts/list\" component={ContractsList} />\n      <Route path=\"/contracts/renewals\" component={Renewals} />\n      <Route path=\"/contracts/alerts\" component={Alerts} />\n\n      {/* 12. E-commerce Module */}\n      <Route path=\"/ecommerce/store\" component={EcommerceStore} />\n      <Route path=\"/ecommerce/orders\" component={OnlineOrders} />\n      <Route path=\"/ecommerce/products\" component={EcommerceProducts} />\n      <Route path=\"/ecommerce/customers\" component={OnlineCustomers} />\n\n      {/* 13. Shipping Module */}\n      <Route path=\"/shipping/carriers\" component={Carriers} />\n      <Route path=\"/shipping/shipments\" component={Shipments} />\n      <Route path=\"/shipping/tracking\" component={Tracking} />\n\n      {/* 14. CRM Module */}\n      <Route path=\"/crm/leads\" component={Leads} />\n      <Route path=\"/crm/opportunities\" component={Opportunities} />\n      <Route path=\"/crm/activities\" component={Activities} />\n      <Route path=\"/crm/campaigns\" component={Campaigns} />\n      <Route path=\"/crm/tasks\" component={CRMTasks} />\n      <Route path=\"/crm/analytics\" component={CRMAnalytics} />\n      <Route path=\"/crm/reports\" component={CRMReports} />\n\n      {/* 15. Budgets Module */}\n      <Route path=\"/budgets/annual\" component={AnnualBudgets} />\n      <Route path=\"/budgets/actual-vs-budget\" component={ActualVsBudget} />\n      <Route path=\"/budgets/forecasts\" component={Forecasts} />\n      <Route path=\"/budgets/variances\" component={Variances} />\n      <Route path=\"/budgets/reports\" component={BudgetReports} />\n\n      {/* 16. Quality Module */}\n      <Route path=\"/quality/standards\" component={QualityStandards} />\n      <Route path=\"/quality/inspections\" component={Inspections} />\n      <Route path=\"/quality/non-conformance\" component={NonConformance} />\n      <Route path=\"/quality/corrective-actions\" component={CorrectiveActions} />\n      <Route path=\"/quality/reports\" component={QualityReports} />\n\n      {/* 17. Maintenance Module */}\n      <Route path=\"/maintenance/schedule\" component={MaintenanceSchedule} />\n      <Route path=\"/maintenance/work-orders\" component={WorkOrders} />\n      <Route path=\"/maintenance/spare-parts\" component={SpareParts} />\n      <Route path=\"/maintenance/costs\" component={MaintenanceCosts} />\n      <Route path=\"/maintenance/reports\" component={MaintenanceReports} />\n\n      {/* 18. Documents Module */}\n      <Route path=\"/documents/storage\" component={DocumentStorage} />\n      <Route path=\"/documents/categories\" component={DocumentCategories} />\n      <Route path=\"/documents/search\" component={DocumentSearch} />\n      <Route path=\"/documents/archive\" component={DocumentArchive} />\n\n      {/* 19. Loyalty Module */}\n      <Route path=\"/loyalty/programs\" component={LoyaltyPrograms} />\n      <Route path=\"/loyalty/points\" component={LoyaltyPoints} />\n      <Route path=\"/loyalty/coupons\" component={Coupons} />\n      <Route path=\"/loyalty/tiers\" component={LoyaltyTiers} />\n      <Route path=\"/loyalty/reports\" component={LoyaltyReports} />\n\n      {/* 20. BI Module */}\n      <Route path=\"/bi/dashboards\" component={BIDashboards} />\n      <Route path=\"/bi/kpis\" component={KPIs} />\n      <Route path=\"/bi/custom-reports\" component={CustomReports} />\n      <Route path=\"/bi/data-analysis\" component={DataAnalysis} />\n      <Route path=\"/bi/data-export\" component={DataExport} />\n      <Route path=\"/bi/trends\" component={Trends} />\n\n      {/* 21. Distributors Module */}\n      <Route path=\"/distributors/list\" component={DistributorList} />\n      <Route path=\"/distributors/commissions\" component={Commissions} />\n      <Route path=\"/distributors/territories\" component={Territories} />\n      <Route path=\"/distributors/targets\" component={DistributorTargets} />\n      <Route path=\"/distributors/reports\" component={DistributorReports} />\n\n      {/* 22. Meetings Module */}\n      <Route path=\"/meetings/list\" component={MeetingsList} />\n      <Route path=\"/meetings/minutes\" component={MeetingMinutes} />\n      <Route path=\"/meetings/decisions\" component={MeetingDecisions} />\n      <Route path=\"/meetings/followup\" component={MeetingFollowup} />\n\n      {/* 23. Risk Management Module */}\n      <Route path=\"/risk-management/identification\" component={RiskIdentification} />\n      <Route path=\"/risk-management/assessment\" component={RiskAssessment} />\n      <Route path=\"/risk-management/mitigation\" component={RiskMitigation} />\n      <Route path=\"/risk-management/monitoring\" component={RiskMonitoring} />\n\n      {/* Settings */}\n      <Route path=\"/settings/company\" component={CompanySettings} />\n      <Route path=\"/settings/modules\" component={ModuleManagement} />\n      <Route path=\"/settings/branches\" component={SettingsBranches} />\n      <Route path=\"/settings/currencies\" component={SettingsCurrencies} />\n      <Route path=\"/settings/users\" component={SettingsUsers} />\n      <Route path=\"/settings/backup\" component={Backup} />\n      \n      {/* 404 */}\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction ThemeToggle() {\n  const [theme, setTheme] = useState<\"light\" | \"dark\">(\"light\");\n\n  useEffect(() => {\n    const savedTheme = localStorage.getItem(\"theme\") as \"light\" | \"dark\" || \"light\";\n    setTheme(savedTheme);\n    document.documentElement.classList.toggle(\"dark\", savedTheme === \"dark\");\n  }, []);\n\n  const toggleTheme = () => {\n    const newTheme = theme === \"light\" ? \"dark\" : \"light\";\n    setTheme(newTheme);\n    localStorage.setItem(\"theme\", newTheme);\n    document.documentElement.classList.toggle(\"dark\", newTheme === \"dark\");\n  };\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"icon\"\n      onClick={toggleTheme}\n      data-testid=\"button-theme-toggle\"\n    >\n      {theme === \"light\" ? (\n        <Moon className=\"w-5 h-5\" />\n      ) : (\n        <Sun className=\"w-5 h-5\" />\n      )}\n    </Button>\n  );\n}\n\nexport default function App() {\n  const style = {\n    \"--sidebar-width\": \"20rem\",\n    \"--sidebar-width-icon\": \"4rem\",\n  };\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <SidebarProvider style={style as React.CSSProperties}>\n          <AppSidebar />\n          <SidebarInset>\n            <header className=\"flex items-center justify-between p-4 border-b border-border\">\n              <SidebarTrigger data-testid=\"button-sidebar-toggle\" />\n              <ThemeToggle />\n            </header>\n            <main className=\"flex-1 overflow-auto p-6\">\n              <Router />\n            </main>\n          </SidebarInset>\n        </SidebarProvider>\n        <Toaster />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n","size_bytes":21353},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/pages/TrialBalance.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Search, Download } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport type { TrialBalanceRow } from \"@shared/schema\";\n\nexport default function TrialBalance() {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n\n  const { data: trialBalance, isLoading } = useQuery<TrialBalanceRow[]>({\n    queryKey: [\"/api/trial-balance\"],\n  });\n\n  const filteredData = trialBalance?.filter(\n    (row) =>\n      row.accountName.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      row.accountCode.includes(searchQuery)\n  );\n\n  const totals = filteredData?.reduce(\n    (acc, row) => ({\n      debit: acc.debit + Number(row.debit),\n      credit: acc.credit + Number(row.credit),\n    }),\n    { debit: 0, credit: 0 }\n  );\n\n  return (\n    <div className=\"p-8 space-y-6\" data-testid=\"page-trial-balance\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold mb-2\" data-testid=\"text-page-title\">\n            ميزان المراجعة\n          </h1>\n          <p className=\"text-muted-foreground\">\n            عرض شامل لجميع الحسابات وأرصدتها\n          </p>\n        </div>\n        <Button variant=\"outline\" data-testid=\"button-export\">\n          <Download className=\"w-5 h-5 me-2\" />\n          تصدير\n        </Button>\n      </div>\n\n      {/* Search */}\n      <Card className=\"p-4\">\n        <div className=\"relative\">\n          <Search className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5\" />\n          <Input\n            placeholder=\"البحث في الحسابات...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"pe-10\"\n            data-testid=\"input-search-trial-balance\"\n          />\n        </div>\n      </Card>\n\n      {/* Trial Balance Table */}\n      {isLoading ? (\n        <div className=\"h-96 bg-muted rounded animate-pulse\"></div>\n      ) : (\n        <Card>\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className=\"bg-muted sticky top-0\">\n                <tr>\n                  <th className=\"text-right p-4 font-medium\">رمز الحساب</th>\n                  <th className=\"text-right p-4 font-medium\">اسم الحساب</th>\n                  <th className=\"text-right p-4 font-medium\">نوع الحساب</th>\n                  <th className=\"text-right p-4 font-medium\">مدين</th>\n                  <th className=\"text-right p-4 font-medium\">دائن</th>\n                  <th className=\"text-right p-4 font-medium\">الرصيد</th>\n                </tr>\n              </thead>\n              <tbody>\n                {filteredData && filteredData.length > 0 ? (\n                  filteredData.map((row, index) => (\n                    <tr\n                      key={row.accountId}\n                      className={index % 2 === 0 ? \"bg-background\" : \"bg-muted/30\"}\n                      data-testid={`row-trial-balance-${row.accountId}`}\n                    >\n                      <td className=\"p-4 font-mono\" data-testid=\"text-account-code\">\n                        {row.accountCode}\n                      </td>\n                      <td className=\"p-4\" data-testid=\"text-account-name\">\n                        {row.accountName}\n                      </td>\n                      <td className=\"p-4\">\n                        <span className=\"px-3 py-1 rounded-full text-xs bg-primary/10 text-primary\">\n                          {row.accountType}\n                        </span>\n                      </td>\n                      <td className=\"p-4 font-mono font-medium\" data-testid=\"text-debit\">\n                        {Number(row.debit) > 0 ? `${row.debit} ريال` : \"-\"}\n                      </td>\n                      <td className=\"p-4 font-mono font-medium\" data-testid=\"text-credit\">\n                        {Number(row.credit) > 0 ? `${row.credit} ريال` : \"-\"}\n                      </td>\n                      <td className=\"p-4 font-mono font-bold\" data-testid=\"text-balance\">\n                        {row.balance} ريال\n                      </td>\n                    </tr>\n                  ))\n                ) : (\n                  <tr>\n                    <td colSpan={6} className=\"p-12 text-center text-muted-foreground\">\n                      لا توجد بيانات لعرضها\n                    </td>\n                  </tr>\n                )}\n                {filteredData && filteredData.length > 0 && (\n                  <tr className=\"bg-primary/10 font-bold border-t-2 border-primary\">\n                    <td colSpan={3} className=\"p-4 text-lg\">\n                      الإجمالي\n                    </td>\n                    <td className=\"p-4 font-mono text-lg\" data-testid=\"text-total-debit\">\n                      {totals?.debit.toFixed(2)} ريال\n                    </td>\n                    <td className=\"p-4 font-mono text-lg\" data-testid=\"text-total-credit\">\n                      {totals?.credit.toFixed(2)} ريال\n                    </td>\n                    <td className=\"p-4\"></td>\n                  </tr>\n                )}\n              </tbody>\n            </table>\n          </div>\n        </Card>\n      )}\n\n      {/* Balance Check */}\n      {totals && (\n        <Card className={`p-4 ${\n          totals.debit === totals.credit\n            ? \"border-green-500 bg-green-50 dark:bg-green-950/20\"\n            : \"border-red-500 bg-red-50 dark:bg-red-950/20\"\n        }`}>\n          <div className=\"flex items-center justify-between\">\n            <span className=\"font-medium\">\n              {totals.debit === totals.credit\n                ? \"✓ الميزان متوازن - المدين يساوي الدائن\"\n                : \"⚠ الميزان غير متوازن - يوجد فرق في الأرصدة\"}\n            </span>\n            {totals.debit !== totals.credit && (\n              <span className=\"font-mono font-bold text-red-600\">\n                الفرق: {Math.abs(totals.debit - totals.credit).toFixed(2)} ريال\n              </span>\n            )}\n          </div>\n        </Card>\n      )}\n    </div>\n  );\n}\n","size_bytes":6410},"client/src/pages/purchasing/PurchaseReturns.tsx":{"content":"import { RotateCcw } from \"lucide-react\";\n\nexport default function PurchaseReturns() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <RotateCcw className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          مرتجعات المشتريات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة مرتجعات المشتريات\n      </p>\n    </div>\n  );\n}\n","size_bytes":518},"client/src/pages/meetings/Followup.tsx":{"content":"import { Clock } from \"lucide-react\";\n\nexport default function MeetingFollowup() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Clock className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          المتابعة والتنفيذ\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: متابعة تنفيذ قرارات الاجتماعات\n      </p>\n    </div>\n  );\n}\n","size_bytes":523},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/pages/transactions/JournalEntries.tsx":{"content":"import { FileCheck } from \"lucide-react\";\n\nexport default function JournalEntries() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <FileCheck className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          قيود اليومية العامة\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة قيود اليومية العامة\n      </p>\n    </div>\n  );\n}\n","size_bytes":523},"client/src/pages/hr/reports/PayrollSheet.tsx":{"content":"import { FileSpreadsheet } from \"lucide-react\";\n\nexport default function PayrollSheet() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <FileSpreadsheet className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          كشف الرواتب\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: كشف الرواتب الشهري\n      </p>\n    </div>\n  );\n}\n","size_bytes":505},"client/src/pages/reports/CustomerBalances.tsx":{"content":"import { UserPlus } from \"lucide-react\";\n\nexport default function CustomerBalances() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <UserPlus className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          أرصدة العملاء\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: عرض أرصدة العملاء والحسابات المدينة\n      </p>\n    </div>\n  );\n}\n","size_bytes":531},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"server/storage.ts":{"content":"import {\n  type Account,\n  type InsertAccount,\n  type Entry,\n  type InsertEntry,\n  type EntryLine,\n  type InsertEntryLine,\n  type FullEntry,\n  type TrialBalanceRow,\n  type IncomeStatementData,\n  type BalanceSheetData,\n  type DashboardStats,\n  type Product,\n  type InsertProduct,\n  type Customer,\n  type InsertCustomer,\n  type Supplier,\n  type InsertSupplier,\n  type SalesInvoice,\n  type InsertFullSalesInvoice,\n  type FullSalesInvoice,\n  type InvoiceStatus,\n  type FullReceiptVoucher,\n  type InsertFullReceiptVoucher,\n  type FullPaymentVoucher,\n  type InsertFullPaymentVoucher,\n  accounts,\n  entries,\n  entryLines,\n  products,\n  customers,\n  suppliers,\n  salesInvoices,\n  salesInvoiceItems,\n  stockMovements,\n  receiptVouchers,\n  receiptVoucherAllocations,\n  paymentVouchers,\n  paymentVoucherAllocations,\n} from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, desc, sql, and, gte, lte } from \"drizzle-orm\";\nimport { ValidationError, NotFoundError, ConflictError, InvalidStateError } from \"./errors\";\n\n// Sales Invoice filters\nexport interface SalesInvoiceFilters {\n  status?: InvoiceStatus;\n  customerId?: string;\n  from?: Date;\n  to?: Date;\n}\n\n// Computed totals result\nexport interface SalesInvoiceTotals {\n  subtotal: string;\n  taxAmount: string;\n  total: string;\n  totalCost: string;\n}\n\nexport interface IStorage {\n  // Accounts\n  getAccounts(): Promise<Account[]>;\n  getAccount(id: string): Promise<Account | undefined>;\n  getAccountByCode(code: string): Promise<Account | undefined>;\n  createAccount(account: InsertAccount): Promise<Account>;\n  updateAccount(id: string, account: Partial<InsertAccount>): Promise<Account | undefined>;\n  deleteAccount(id: string): Promise<boolean>;\n  updateAccountBalance(id: string, amount: number): Promise<void>;\n\n  // Entries\n  getEntries(): Promise<FullEntry[]>;\n  getEntry(id: string): Promise<FullEntry | undefined>;\n  createEntry(entry: InsertEntry, lines: InsertEntryLine[]): Promise<FullEntry>;\n  deleteEntry(id: string): Promise<boolean>;\n\n  // Products\n  getProducts(): Promise<Product[]>;\n  getProduct(id: string): Promise<Product | undefined>;\n  getProductByCode(itemCode: string): Promise<Product | undefined>;\n  createProduct(product: InsertProduct): Promise<Product>;\n  updateProduct(id: string, product: Partial<InsertProduct>): Promise<Product | undefined>;\n  deleteProduct(id: string): Promise<boolean>;\n  updateProductQuantity(id: string, quantity: number): Promise<void>;\n\n  // Customers\n  getCustomers(): Promise<Customer[]>;\n  getCustomer(id: string): Promise<Customer | undefined>;\n  getCustomerByCode(code: string): Promise<Customer | undefined>;\n  createCustomer(customer: InsertCustomer): Promise<Customer>;\n  updateCustomer(id: string, customer: Partial<InsertCustomer>): Promise<Customer | undefined>;\n  deleteCustomer(id: string): Promise<boolean>;\n  updateCustomerBalance(id: string, amount: number): Promise<void>;\n\n  // Suppliers\n  getSuppliers(): Promise<Supplier[]>;\n  getSupplier(id: string): Promise<Supplier | undefined>;\n  getSupplierByCode(code: string): Promise<Supplier | undefined>;\n  createSupplier(supplier: InsertSupplier): Promise<Supplier>;\n  updateSupplier(id: string, supplier: Partial<InsertSupplier>): Promise<Supplier | undefined>;\n  deleteSupplier(id: string): Promise<boolean>;\n  updateSupplierBalance(id: string, amount: number): Promise<void>;\n\n  // Sales Invoices\n  createSalesInvoiceDraft(invoice: InsertFullSalesInvoice): Promise<FullSalesInvoice>;\n  getSalesInvoices(filters?: SalesInvoiceFilters): Promise<FullSalesInvoice[]>;\n  getSalesInvoice(id: string): Promise<FullSalesInvoice | undefined>;\n  updateSalesInvoiceDraft(id: string, invoice: InsertFullSalesInvoice): Promise<FullSalesInvoice>;\n  deleteSalesInvoiceDraft(id: string): Promise<boolean>;\n  postSalesInvoice(id: string): Promise<FullSalesInvoice>;\n  computeSalesInvoiceTotals(items: Array<{productId: string; quantity: number; unitPrice: number}>): Promise<SalesInvoiceTotals>;\n\n  // Receipt Vouchers\n  createReceiptVoucherDraft(data: InsertFullReceiptVoucher): Promise<FullReceiptVoucher>;\n  getReceiptVouchers(): Promise<FullReceiptVoucher[]>;\n  getReceiptVoucher(id: string): Promise<FullReceiptVoucher | undefined>;\n  updateReceiptVoucherDraft(id: string, data: InsertFullReceiptVoucher): Promise<FullReceiptVoucher>;\n  deleteReceiptVoucherDraft(id: string): Promise<boolean>;\n  postReceiptVoucher(id: string): Promise<FullReceiptVoucher>;\n\n  // Payment Vouchers\n  createPaymentVoucherDraft(data: InsertFullPaymentVoucher): Promise<FullPaymentVoucher>;\n  getPaymentVouchers(): Promise<FullPaymentVoucher[]>;\n  getPaymentVoucher(id: string): Promise<FullPaymentVoucher | undefined>;\n  updatePaymentVoucherDraft(id: string, data: InsertFullPaymentVoucher): Promise<FullPaymentVoucher>;\n  deletePaymentVoucherDraft(id: string): Promise<boolean>;\n  postPaymentVoucher(id: string): Promise<FullPaymentVoucher>;\n\n  // Reports\n  getTrialBalance(): Promise<TrialBalanceRow[]>;\n  getIncomeStatement(from: Date, to: Date): Promise<IncomeStatementData>;\n  getBalanceSheet(date: Date): Promise<BalanceSheetData>;\n  getDashboardStats(): Promise<DashboardStats>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  // Accounts\n  async getAccounts(): Promise<Account[]> {\n    return await db.select().from(accounts);\n  }\n\n  async getAccount(id: string): Promise<Account | undefined> {\n    const [account] = await db.select().from(accounts).where(eq(accounts.id, id));\n    return account || undefined;\n  }\n\n  async getAccountByCode(code: string): Promise<Account | undefined> {\n    const [account] = await db.select().from(accounts).where(eq(accounts.code, code));\n    return account || undefined;\n  }\n\n  async createAccount(insertAccount: InsertAccount): Promise<Account> {\n    const [account] = await db\n      .insert(accounts)\n      .values({\n        ...insertAccount,\n        balance: \"0\",\n      })\n      .returning();\n    return account;\n  }\n\n  async updateAccount(id: string, data: Partial<InsertAccount>): Promise<Account | undefined> {\n    const [account] = await db\n      .update(accounts)\n      .set(data)\n      .where(eq(accounts.id, id))\n      .returning();\n    return account || undefined;\n  }\n\n  async deleteAccount(id: string): Promise<boolean> {\n    const result = await db.delete(accounts).where(eq(accounts.id, id));\n    return result.rowCount !== null && result.rowCount > 0;\n  }\n\n  async updateAccountBalance(id: string, amount: number): Promise<void> {\n    const account = await this.getAccount(id);\n    if (account) {\n      const currentBalance = Number(account.balance) || 0;\n      const newBalance = (currentBalance + amount).toFixed(2);\n      await db\n        .update(accounts)\n        .set({ balance: newBalance })\n        .where(eq(accounts.id, id));\n    }\n  }\n\n  // Entries\n  async getEntries(): Promise<FullEntry[]> {\n    const allEntries = await db.select().from(entries).orderBy(desc(entries.createdAt));\n    const fullEntries: FullEntry[] = [];\n\n    for (const entry of allEntries) {\n      const lines = await db.select().from(entryLines).where(eq(entryLines.entryId, entry.id));\n      \n      const linesWithNames = await Promise.all(\n        lines.map(async (line) => {\n          const account = await this.getAccount(line.accountId);\n          return {\n            ...line,\n            accountName: account ? `${account.code} - ${account.name}` : line.accountId,\n          };\n        })\n      );\n\n      fullEntries.push({ ...entry, lines: linesWithNames });\n    }\n\n    return fullEntries;\n  }\n\n  async getEntry(id: string): Promise<FullEntry | undefined> {\n    const [entry] = await db.select().from(entries).where(eq(entries.id, id));\n    if (!entry) return undefined;\n\n    const lines = await db.select().from(entryLines).where(eq(entryLines.entryId, entry.id));\n    \n    const linesWithNames = await Promise.all(\n      lines.map(async (line) => {\n        const account = await this.getAccount(line.accountId);\n        return {\n          ...line,\n          accountName: account ? `${account.code} - ${account.name}` : line.accountId,\n        };\n      })\n    );\n\n    return { ...entry, lines: linesWithNames };\n  }\n\n  async createEntry(insertEntry: InsertEntry, insertLines: InsertEntryLine[]): Promise<FullEntry> {\n    // Calculate totals\n    let totalDebit = 0;\n    let totalCredit = 0;\n\n    for (const line of insertLines) {\n      totalDebit += Number(line.debit) || 0;\n      totalCredit += Number(line.credit) || 0;\n    }\n\n    const isBalanced = totalDebit === totalCredit && totalDebit > 0 ? 1 : 0;\n\n    // Create entry\n    const [entry] = await db\n      .insert(entries)\n      .values({\n        ...insertEntry,\n        date: new Date(insertEntry.date),\n        totalDebit: totalDebit.toFixed(2),\n        totalCredit: totalCredit.toFixed(2),\n        isBalanced,\n      })\n      .returning();\n\n    // Create entry lines and update account balances\n    const linesWithNames = [];\n    for (const insertLine of insertLines) {\n      const [line] = await db\n        .insert(entryLines)\n        .values({\n          ...insertLine,\n          entryId: entry.id,\n          debit: (Number(insertLine.debit) || 0).toFixed(2),\n          credit: (Number(insertLine.credit) || 0).toFixed(2),\n        })\n        .returning();\n\n      // Update account balance\n      const account = await this.getAccount(line.accountId);\n      if (account) {\n        const debitAmount = Number(line.debit) || 0;\n        const creditAmount = Number(line.credit) || 0;\n\n        // For assets and expenses: debit increases, credit decreases\n        // For liabilities, equity, and revenues: credit increases, debit decreases\n        let balanceChange = 0;\n        if (account.type === \"أصول\" || account.type === \"مصروفات\") {\n          balanceChange = debitAmount - creditAmount;\n        } else {\n          balanceChange = creditAmount - debitAmount;\n        }\n\n        await this.updateAccountBalance(line.accountId, balanceChange);\n        \n        linesWithNames.push({\n          ...line,\n          accountName: `${account.code} - ${account.name}`,\n        });\n      } else {\n        linesWithNames.push(line);\n      }\n    }\n\n    return { ...entry, lines: linesWithNames };\n  }\n\n  async deleteEntry(id: string): Promise<boolean> {\n    const entry = await this.getEntry(id);\n    if (!entry) return false;\n\n    // Reverse account balances\n    for (const line of entry.lines) {\n      const account = await this.getAccount(line.accountId);\n      if (account) {\n        const debitAmount = Number(line.debit) || 0;\n        const creditAmount = Number(line.credit) || 0;\n\n        // Reverse the balance change\n        let balanceChange = 0;\n        if (account.type === \"أصول\" || account.type === \"مصروفات\") {\n          balanceChange = -(debitAmount - creditAmount);\n        } else {\n          balanceChange = -(creditAmount - debitAmount);\n        }\n\n        await this.updateAccountBalance(line.accountId, balanceChange);\n      }\n    }\n\n    // Delete entry lines\n    await db.delete(entryLines).where(eq(entryLines.entryId, id));\n    \n    // Delete entry\n    const result = await db.delete(entries).where(eq(entries.id, id));\n    return result.rowCount !== null && result.rowCount > 0;\n  }\n\n  // Reports\n  async getTrialBalance(): Promise<TrialBalanceRow[]> {\n    const allAccounts = await db.select().from(accounts);\n    const rows: TrialBalanceRow[] = [];\n\n    for (const account of allAccounts) {\n      const balance = Number(account.balance) || 0;\n      const debit = balance > 0 ? balance.toFixed(2) : \"0.00\";\n      const credit = balance < 0 ? Math.abs(balance).toFixed(2) : \"0.00\";\n\n      rows.push({\n        accountId: account.id,\n        accountCode: account.code,\n        accountName: account.name,\n        accountType: account.type,\n        debit,\n        credit,\n        balance: balance.toFixed(2),\n      });\n    }\n\n    return rows.sort((a, b) => a.accountCode.localeCompare(b.accountCode));\n  }\n\n  async getIncomeStatement(from: Date, to: Date): Promise<IncomeStatementData> {\n    const allAccounts = await db.select().from(accounts);\n    \n    const revenues = allAccounts\n      .filter((acc) => acc.type === \"إيرادات\")\n      .map((acc) => ({\n        accountName: acc.name,\n        amount: acc.balance,\n      }));\n\n    const expenses = allAccounts\n      .filter((acc) => acc.type === \"مصروفات\")\n      .map((acc) => ({\n        accountName: acc.name,\n        amount: acc.balance,\n      }));\n\n    const totalRevenues = revenues.reduce(\n      (sum, item) => sum + Math.abs(Number(item.amount)),\n      0\n    );\n\n    const totalExpenses = expenses.reduce(\n      (sum, item) => sum + Number(item.amount),\n      0\n    );\n\n    const netIncome = totalRevenues - totalExpenses;\n\n    return {\n      revenues,\n      expenses,\n      totalRevenues: totalRevenues.toFixed(2),\n      totalExpenses: totalExpenses.toFixed(2),\n      netIncome: netIncome.toFixed(2),\n      period: {\n        from: from.toISOString(),\n        to: to.toISOString(),\n      },\n    };\n  }\n\n  async getBalanceSheet(date: Date): Promise<BalanceSheetData> {\n    const allAccounts = await db.select().from(accounts);\n\n    const assets = allAccounts\n      .filter((acc) => acc.type === \"أصول\")\n      .map((acc) => ({\n        accountName: acc.name,\n        amount: acc.balance,\n      }));\n\n    const liabilities = allAccounts\n      .filter((acc) => acc.type === \"خصوم\")\n      .map((acc) => ({\n        accountName: acc.name,\n        amount: Math.abs(Number(acc.balance)).toFixed(2),\n      }));\n\n    const equity = allAccounts\n      .filter((acc) => acc.type === \"حقوق ملكية\")\n      .map((acc) => ({\n        accountName: acc.name,\n        amount: Math.abs(Number(acc.balance)).toFixed(2),\n      }));\n\n    const totalAssets = assets.reduce(\n      (sum, item) => sum + Number(item.amount),\n      0\n    );\n\n    const totalLiabilities = liabilities.reduce(\n      (sum, item) => sum + Number(item.amount),\n      0\n    );\n\n    const totalEquity = equity.reduce(\n      (sum, item) => sum + Number(item.amount),\n      0\n    );\n\n    return {\n      assets,\n      liabilities,\n      equity,\n      totalAssets: totalAssets.toFixed(2),\n      totalLiabilities: totalLiabilities.toFixed(2),\n      totalEquity: totalEquity.toFixed(2),\n      date: date.toISOString(),\n    };\n  }\n\n  // Products\n  async getProducts(): Promise<Product[]> {\n    return await db.select().from(products);\n  }\n\n  async getProduct(id: string): Promise<Product | undefined> {\n    const [product] = await db.select().from(products).where(eq(products.id, id));\n    return product || undefined;\n  }\n\n  async getProductByCode(itemCode: string): Promise<Product | undefined> {\n    const [product] = await db.select().from(products).where(eq(products.itemCode, itemCode));\n    return product || undefined;\n  }\n\n  async createProduct(insertProduct: InsertProduct): Promise<Product> {\n    const [product] = await db\n      .insert(products)\n      .values({\n        ...insertProduct,\n        salePrice: insertProduct.salePrice.toString(),\n        costPrice: insertProduct.costPrice.toString(),\n      })\n      .returning();\n    return product;\n  }\n\n  async updateProduct(id: string, data: Partial<InsertProduct>): Promise<Product | undefined> {\n    const updateData: any = { ...data };\n    if (data.salePrice !== undefined) {\n      updateData.salePrice = data.salePrice.toString();\n    }\n    if (data.costPrice !== undefined) {\n      updateData.costPrice = data.costPrice.toString();\n    }\n    \n    const [product] = await db\n      .update(products)\n      .set(updateData)\n      .where(eq(products.id, id))\n      .returning();\n    return product || undefined;\n  }\n\n  async deleteProduct(id: string): Promise<boolean> {\n    const result = await db.delete(products).where(eq(products.id, id));\n    return result.rowCount !== null && result.rowCount > 0;\n  }\n\n  async updateProductQuantity(id: string, quantity: number): Promise<void> {\n    const product = await this.getProduct(id);\n    if (product) {\n      const newQuantity = parseFloat(product.quantityOnHand) + quantity;\n      await db\n        .update(products)\n        .set({ quantityOnHand: newQuantity.toString() })\n        .where(eq(products.id, id));\n    }\n  }\n\n  // Customers\n  async getCustomers(): Promise<Customer[]> {\n    return await db.select().from(customers);\n  }\n\n  async getCustomer(id: string): Promise<Customer | undefined> {\n    const [customer] = await db.select().from(customers).where(eq(customers.id, id));\n    return customer || undefined;\n  }\n\n  async getCustomerByCode(code: string): Promise<Customer | undefined> {\n    const [customer] = await db.select().from(customers).where(eq(customers.code, code));\n    return customer || undefined;\n  }\n\n  async createCustomer(insertCustomer: InsertCustomer): Promise<Customer> {\n    // Use transaction to ensure both customer and account are created atomically\n    return await db.transaction(async (tx) => {\n      // Create customer account in chart of accounts if not provided\n      let accountId = insertCustomer.accountId;\n      \n      if (!accountId) {\n        const [customerAccount] = await tx\n          .insert(accounts)\n          .values({\n            code: `1120-${insertCustomer.code}`,\n            name: `عميل: ${insertCustomer.name}`,\n            type: \"أصول\",\n            parentId: null,\n            balance: insertCustomer.openingBalance.toString(),\n            isActive: 1,\n          })\n          .returning();\n        accountId = customerAccount.id;\n      }\n\n      const [customer] = await tx\n        .insert(customers)\n        .values({\n          ...insertCustomer,\n          openingBalance: insertCustomer.openingBalance.toString(),\n          currentBalance: insertCustomer.openingBalance.toString(),\n          accountId,\n        })\n        .returning();\n\n      return customer;\n    });\n  }\n\n  async updateCustomer(id: string, data: Partial<InsertCustomer>): Promise<Customer | undefined> {\n    const updateData: any = { ...data };\n    if (data.openingBalance !== undefined) {\n      updateData.openingBalance = data.openingBalance.toString();\n    }\n    \n    const [customer] = await db\n      .update(customers)\n      .set(updateData)\n      .where(eq(customers.id, id))\n      .returning();\n    return customer || undefined;\n  }\n\n  async deleteCustomer(id: string): Promise<boolean> {\n    // Use transaction to delete customer and their account\n    return await db.transaction(async (tx) => {\n      // Get customer first to check if they have linked account\n      const [customer] = await tx.select().from(customers).where(eq(customers.id, id));\n      \n      if (!customer) {\n        return false;\n      }\n\n      // Check if linked account exists and validate balance before deletion\n      // Read account within transaction scope to ensure we have the current balance\n      if (customer.accountId) {\n        const [account] = await tx.select().from(accounts).where(eq(accounts.id, customer.accountId));\n        if (account) {\n          const balance = parseFloat(account.balance);\n          if (balance !== 0) {\n            // Abort transaction if account has non-zero balance\n            throw new Error(`لا يمكن حذف العميل. الرصيد الحالي للحساب المحاسبي: ${balance.toFixed(2)} ر.س. يجب أن يكون الرصيد صفر أولاً.`);\n          }\n          // Delete account if balance is zero\n          await tx.delete(accounts).where(eq(accounts.id, customer.accountId));\n        }\n      }\n\n      // Delete customer after validating account balance\n      await tx.delete(customers).where(eq(customers.id, id));\n\n      return true;\n    });\n  }\n\n  async updateCustomerBalance(id: string, amount: number): Promise<void> {\n    const customer = await this.getCustomer(id);\n    if (customer) {\n      const newBalance = parseFloat(customer.currentBalance) + amount;\n      await db\n        .update(customers)\n        .set({ currentBalance: newBalance.toString() })\n        .where(eq(customers.id, id));\n      \n      // Update linked account balance\n      if (customer.accountId) {\n        await this.updateAccountBalance(customer.accountId, amount);\n      }\n    }\n  }\n\n  // Suppliers\n  async getSuppliers(): Promise<Supplier[]> {\n    return await db.select().from(suppliers);\n  }\n\n  async getSupplier(id: string): Promise<Supplier | undefined> {\n    const [supplier] = await db.select().from(suppliers).where(eq(suppliers.id, id));\n    return supplier || undefined;\n  }\n\n  async getSupplierByCode(code: string): Promise<Supplier | undefined> {\n    const [supplier] = await db.select().from(suppliers).where(eq(suppliers.code, code));\n    return supplier || undefined;\n  }\n\n  async createSupplier(insertSupplier: InsertSupplier): Promise<Supplier> {\n    // Use transaction to ensure both supplier and account are created atomically\n    return await db.transaction(async (tx) => {\n      // Create supplier account in chart of accounts if not provided\n      let accountId = insertSupplier.accountId;\n      \n      if (!accountId) {\n        const [supplierAccount] = await tx\n          .insert(accounts)\n          .values({\n            code: `2120-${insertSupplier.code}`,\n            name: `مورد: ${insertSupplier.name}`,\n            type: \"خصوم\",\n            parentId: null,\n            balance: insertSupplier.openingBalance.toString(),\n            isActive: 1,\n          })\n          .returning();\n        accountId = supplierAccount.id;\n      }\n\n      const [supplier] = await tx\n        .insert(suppliers)\n        .values({\n          ...insertSupplier,\n          openingBalance: insertSupplier.openingBalance.toString(),\n          currentBalance: insertSupplier.openingBalance.toString(),\n          accountId,\n        })\n        .returning();\n\n      return supplier;\n    });\n  }\n\n  async updateSupplier(id: string, data: Partial<InsertSupplier>): Promise<Supplier | undefined> {\n    const updateData: any = { ...data };\n    if (data.openingBalance !== undefined) {\n      updateData.openingBalance = data.openingBalance.toString();\n    }\n    \n    const [supplier] = await db\n      .update(suppliers)\n      .set(updateData)\n      .where(eq(suppliers.id, id))\n      .returning();\n    return supplier || undefined;\n  }\n\n  async deleteSupplier(id: string): Promise<boolean> {\n    // Use transaction to delete supplier and their account\n    return await db.transaction(async (tx) => {\n      // Get supplier first to check if they have linked account\n      const [supplier] = await tx.select().from(suppliers).where(eq(suppliers.id, id));\n      \n      if (!supplier) {\n        return false;\n      }\n\n      // Check if linked account exists and validate balance before deletion\n      if (supplier.accountId) {\n        const [account] = await tx.select().from(accounts).where(eq(accounts.id, supplier.accountId));\n        if (account) {\n          const balance = parseFloat(account.balance);\n          if (balance !== 0) {\n            // Abort transaction if account has non-zero balance\n            throw new Error(`لا يمكن حذف المورد. الرصيد الحالي للحساب المحاسبي: ${balance.toFixed(2)} ر.س. يجب أن يكون الرصيد صفر أولاً.`);\n          }\n          // Delete account if balance is zero\n          await tx.delete(accounts).where(eq(accounts.id, supplier.accountId));\n        }\n      }\n\n      // Delete supplier after validating account balance\n      await tx.delete(suppliers).where(eq(suppliers.id, id));\n\n      return true;\n    });\n  }\n\n  async updateSupplierBalance(id: string, amount: number): Promise<void> {\n    const supplier = await this.getSupplier(id);\n    if (supplier) {\n      const newBalance = parseFloat(supplier.currentBalance) + amount;\n      await db\n        .update(suppliers)\n        .set({ currentBalance: newBalance.toString() })\n        .where(eq(suppliers.id, id));\n      \n      // Update linked account balance\n      if (supplier.accountId) {\n        await this.updateAccountBalance(supplier.accountId, amount);\n      }\n    }\n  }\n\n  async getDashboardStats(): Promise<DashboardStats> {\n    const allAccounts = await db.select().from(accounts);\n    const allEntries = await this.getEntries();\n\n    const totalRevenues = allAccounts\n      .filter((acc) => acc.type === \"إيرادات\")\n      .reduce((sum, acc) => sum + Math.abs(Number(acc.balance)), 0);\n\n    const totalExpenses = allAccounts\n      .filter((acc) => acc.type === \"مصروفات\")\n      .reduce((sum, acc) => sum + Number(acc.balance), 0);\n\n    const totalBalance = allAccounts.reduce(\n      (sum, acc) => sum + Number(acc.balance),\n      0\n    );\n\n    const netIncome = totalRevenues - totalExpenses;\n\n    // Get recent entries (last 10)\n    const recentEntries = allEntries.slice(0, 10);\n\n    // Generate monthly data for the chart (last 6 months)\n    const monthlyData = [];\n    const now = new Date();\n    for (let i = 5; i >= 0; i--) {\n      const date = new Date(now.getFullYear(), now.getMonth() - i, 1);\n      const monthName = date.toLocaleDateString(\"ar-SA\", { month: \"short\" });\n      \n      // For demo purposes, generate some sample data\n      monthlyData.push({\n        month: monthName,\n        revenues: Math.random() * 50000 + 10000,\n        expenses: Math.random() * 40000 + 8000,\n      });\n    }\n\n    return {\n      totalRevenues: totalRevenues.toFixed(2),\n      totalExpenses: totalExpenses.toFixed(2),\n      netIncome: netIncome.toFixed(2),\n      totalBalance: totalBalance.toFixed(2),\n      recentEntries,\n      monthlyData,\n    };\n  }\n\n  // Sales Invoices\n  async computeSalesInvoiceTotals(items: Array<{productId: string; quantity: number; unitPrice: number}>): Promise<SalesInvoiceTotals> {\n    let subtotal = 0;\n    let totalCost = 0;\n\n    for (const item of items) {\n      const product = await this.getProduct(item.productId);\n      if (!product) {\n        throw new Error(`الصنف غير موجود: ${item.productId}`);\n      }\n\n      const itemTotal = item.quantity * item.unitPrice;\n      const itemCost = item.quantity * parseFloat(product.costPrice);\n      \n      subtotal += itemTotal;\n      totalCost += itemCost;\n    }\n\n    const taxRate = 0.15; // 15% Saudi VAT\n    const taxAmount = subtotal * taxRate;\n    const total = subtotal + taxAmount;\n\n    return {\n      subtotal: subtotal.toFixed(2),\n      taxAmount: taxAmount.toFixed(2),\n      total: total.toFixed(2),\n      totalCost: totalCost.toFixed(2),\n    };\n  }\n\n  async createSalesInvoiceDraft(insertInvoice: InsertFullSalesInvoice): Promise<FullSalesInvoice> {\n    return await db.transaction(async (tx) => {\n      // Compute totals\n      const totals = await this.computeSalesInvoiceTotals(\n        insertInvoice.items.map(item => ({\n          productId: item.productId,\n          quantity: parseFloat(item.quantity.toString()),\n          unitPrice: parseFloat(item.unitPrice.toString()),\n        }))\n      );\n\n      // Create invoice header\n      const [invoice] = await tx\n        .insert(salesInvoices)\n        .values({\n          invoiceNumber: insertInvoice.invoiceNumber,\n          invoiceDate: new Date(insertInvoice.invoiceDate),\n          customerId: insertInvoice.customerId,\n          totalBeforeTax: totals.subtotal,\n          taxRate: insertInvoice.taxRate?.toString() || \"0.15\",\n          taxAmount: totals.taxAmount,\n          totalAfterTax: totals.total,\n          totalCost: totals.totalCost,\n          status: \"مسودة\",\n          notes: insertInvoice.notes || null,\n        })\n        .returning();\n\n      // Create invoice items\n      const items = [];\n      for (const item of insertInvoice.items) {\n        const product = await this.getProduct(item.productId);\n        if (!product) {\n          throw new Error(`الصنف غير موجود: ${item.productId}`);\n        }\n\n        const quantity = parseFloat(item.quantity.toString());\n        const unitPrice = parseFloat(item.unitPrice.toString());\n        const costPrice = parseFloat(product.costPrice);\n        const total = quantity * unitPrice;\n        const totalCost = quantity * costPrice;\n\n        const [invoiceItem] = await tx\n          .insert(salesInvoiceItems)\n          .values({\n            invoiceId: invoice.id,\n            productId: item.productId,\n            quantity: quantity.toString(),\n            unitPrice: unitPrice.toString(),\n            total: total.toFixed(2),\n            costPrice: costPrice.toString(),\n            totalCost: totalCost.toFixed(2),\n          })\n          .returning();\n\n        items.push({\n          ...invoiceItem,\n          productName: product.itemName,\n          unit: product.unit,\n        });\n      }\n\n      // Get customer name\n      const customer = await this.getCustomer(invoice.customerId);\n\n      return {\n        ...invoice,\n        items,\n        customerName: customer?.name,\n      };\n    });\n  }\n\n  async getSalesInvoices(filters?: SalesInvoiceFilters): Promise<FullSalesInvoice[]> {\n    const conditions = [];\n    \n    if (filters?.status) {\n      conditions.push(eq(salesInvoices.status, filters.status));\n    }\n    if (filters?.customerId) {\n      conditions.push(eq(salesInvoices.customerId, filters.customerId));\n    }\n    if (filters?.from) {\n      conditions.push(gte(salesInvoices.invoiceDate, filters.from));\n    }\n    if (filters?.to) {\n      conditions.push(lte(salesInvoices.invoiceDate, filters.to));\n    }\n\n    const whereClause = conditions.length > 0 ? and(...conditions) : undefined;\n    const allInvoices = await db\n      .select()\n      .from(salesInvoices)\n      .where(whereClause)\n      .orderBy(desc(salesInvoices.createdAt));\n\n    const fullInvoices: FullSalesInvoice[] = [];\n\n    for (const invoice of allInvoices) {\n      const items = await db\n        .select()\n        .from(salesInvoiceItems)\n        .where(eq(salesInvoiceItems.invoiceId, invoice.id));\n\n      const itemsWithDetails = await Promise.all(\n        items.map(async (item) => {\n          const product = await this.getProduct(item.productId);\n          return {\n            ...item,\n            productName: product?.itemName,\n            unit: product?.unit,\n          };\n        })\n      );\n\n      const customer = await this.getCustomer(invoice.customerId);\n\n      fullInvoices.push({\n        ...invoice,\n        items: itemsWithDetails,\n        customerName: customer?.name,\n      });\n    }\n\n    return fullInvoices;\n  }\n\n  async getSalesInvoice(id: string): Promise<FullSalesInvoice | undefined> {\n    const [invoice] = await db\n      .select()\n      .from(salesInvoices)\n      .where(eq(salesInvoices.id, id));\n\n    if (!invoice) return undefined;\n\n    const items = await db\n      .select()\n      .from(salesInvoiceItems)\n      .where(eq(salesInvoiceItems.invoiceId, invoice.id));\n\n    const itemsWithDetails = await Promise.all(\n      items.map(async (item) => {\n        const product = await this.getProduct(item.productId);\n        return {\n          ...item,\n          productName: product?.itemName,\n          unit: product?.unit,\n        };\n      })\n    );\n\n    const customer = await this.getCustomer(invoice.customerId);\n\n    return {\n      ...invoice,\n      items: itemsWithDetails,\n      customerName: customer?.name,\n    };\n  }\n\n  async updateSalesInvoiceDraft(id: string, insertInvoice: InsertFullSalesInvoice): Promise<FullSalesInvoice> {\n    return await db.transaction(async (tx) => {\n      // Check if invoice exists and is still a draft\n      const [existingInvoice] = await tx\n        .select()\n        .from(salesInvoices)\n        .where(eq(salesInvoices.id, id));\n\n      if (!existingInvoice) {\n        throw new Error(\"الفاتورة غير موجودة\");\n      }\n\n      if (existingInvoice.status !== \"مسودة\") {\n        throw new Error(\"لا يمكن تعديل فاتورة منشورة\");\n      }\n\n      // Compute totals\n      const totals = await this.computeSalesInvoiceTotals(\n        insertInvoice.items.map(item => ({\n          productId: item.productId,\n          quantity: parseFloat(item.quantity.toString()),\n          unitPrice: parseFloat(item.unitPrice.toString()),\n        }))\n      );\n\n      // Update invoice header\n      const [invoice] = await tx\n        .update(salesInvoices)\n        .set({\n          invoiceNumber: insertInvoice.invoiceNumber,\n          invoiceDate: new Date(insertInvoice.invoiceDate),\n          customerId: insertInvoice.customerId,\n          totalBeforeTax: totals.subtotal,\n          taxRate: insertInvoice.taxRate?.toString() || \"0.15\",\n          taxAmount: totals.taxAmount,\n          totalAfterTax: totals.total,\n          totalCost: totals.totalCost,\n          notes: insertInvoice.notes || null,\n        })\n        .where(eq(salesInvoices.id, id))\n        .returning();\n\n      // Delete old items\n      await tx.delete(salesInvoiceItems).where(eq(salesInvoiceItems.invoiceId, id));\n\n      // Create new items\n      const items = [];\n      for (const item of insertInvoice.items) {\n        const product = await this.getProduct(item.productId);\n        if (!product) {\n          throw new Error(`الصنف غير موجود: ${item.productId}`);\n        }\n\n        const quantity = parseFloat(item.quantity.toString());\n        const unitPrice = parseFloat(item.unitPrice.toString());\n        const costPrice = parseFloat(product.costPrice);\n        const total = quantity * unitPrice;\n        const totalCost = quantity * costPrice;\n\n        const [invoiceItem] = await tx\n          .insert(salesInvoiceItems)\n          .values({\n            invoiceId: invoice.id,\n            productId: item.productId,\n            quantity: quantity.toString(),\n            unitPrice: unitPrice.toString(),\n            total: total.toFixed(2),\n            costPrice: costPrice.toString(),\n            totalCost: totalCost.toFixed(2),\n          })\n          .returning();\n\n        items.push({\n          ...invoiceItem,\n          productName: product.itemName,\n          unit: product.unit,\n        });\n      }\n\n      const customer = await this.getCustomer(invoice.customerId);\n\n      return {\n        ...invoice,\n        items,\n        customerName: customer?.name,\n      };\n    });\n  }\n\n  async deleteSalesInvoiceDraft(id: string): Promise<boolean> {\n    return await db.transaction(async (tx) => {\n      const [invoice] = await tx\n        .select()\n        .from(salesInvoices)\n        .where(eq(salesInvoices.id, id));\n\n      if (!invoice) {\n        return false;\n      }\n\n      if (invoice.status !== \"مسودة\") {\n        throw new Error(\"لا يمكن حذف فاتورة منشورة\");\n      }\n\n      // Delete items\n      await tx.delete(salesInvoiceItems).where(eq(salesInvoiceItems.invoiceId, id));\n\n      // Delete invoice\n      await tx.delete(salesInvoices).where(eq(salesInvoices.id, id));\n\n      return true;\n    });\n  }\n\n  async postSalesInvoice(id: string): Promise<FullSalesInvoice> {\n    return await db.transaction(async (tx) => {\n      // Get invoice\n      const [invoice] = await tx\n        .select()\n        .from(salesInvoices)\n        .where(eq(salesInvoices.id, id));\n\n      if (!invoice) {\n        throw new Error(\"الفاتورة غير موجودة\");\n      }\n\n      if (invoice.status === \"منشورة\") {\n        throw new Error(\"الفاتورة منشورة مسبقاً\");\n      }\n\n      // Get invoice items\n      const items = await tx\n        .select()\n        .from(salesInvoiceItems)\n        .where(eq(salesInvoiceItems.invoiceId, id));\n\n      // Check stock availability\n      for (const item of items) {\n        const [product] = await tx\n          .select()\n          .from(products)\n          .where(eq(products.id, item.productId));\n\n        if (!product) {\n          throw new Error(`الصنف غير موجود: ${item.productId}`);\n        }\n\n        const availableQty = parseFloat(product.quantityOnHand);\n        const requiredQty = parseFloat(item.quantity);\n\n        if (availableQty < requiredQty) {\n          throw new Error(`كمية غير كافية للصنف \"${product.itemName}\". المتوفر: ${availableQty}، المطلوب: ${requiredQty}`);\n        }\n      }\n\n      // Get customer\n      const [customer] = await tx\n        .select()\n        .from(customers)\n        .where(eq(customers.id, invoice.customerId));\n\n      if (!customer || !customer.accountId) {\n        throw new Error(\"العميل غير موجود أو ليس له حساب محاسبي مرتبط\");\n      }\n\n      // Get or create revenue account\n      let [revenueAccount] = await tx.select().from(accounts).where(eq(accounts.code, \"4100\"));\n      if (!revenueAccount) {\n        [revenueAccount] = await tx\n          .insert(accounts)\n          .values({\n            code: \"4100\",\n            name: \"إيرادات المبيعات\",\n            type: \"إيرادات\",\n            balance: \"0\",\n            isActive: 1,\n          })\n          .returning();\n      }\n\n      // Get or create VAT payable account\n      let [vatAccount] = await tx.select().from(accounts).where(eq(accounts.code, \"2310\"));\n      if (!vatAccount) {\n        [vatAccount] = await tx\n          .insert(accounts)\n          .values({\n            code: \"2310\",\n            name: \"ضريبة القيمة المضافة المستحقة\",\n            type: \"خصوم\",\n            balance: \"0\",\n            isActive: 1,\n          })\n          .returning();\n      }\n\n      // Get or create COGS account\n      let [cogsAccount] = await tx.select().from(accounts).where(eq(accounts.code, \"5100\"));\n      if (!cogsAccount) {\n        [cogsAccount] = await tx\n          .insert(accounts)\n          .values({\n            code: \"5100\",\n            name: \"تكلفة البضاعة المباعة\",\n            type: \"مصروفات\",\n            balance: \"0\",\n            isActive: 1,\n          })\n          .returning();\n      }\n\n      // Get or create Inventory account\n      let [inventoryAccount] = await tx.select().from(accounts).where(eq(accounts.code, \"1310\"));\n      if (!inventoryAccount) {\n        [inventoryAccount] = await tx\n          .insert(accounts)\n          .values({\n            code: \"1310\",\n            name: \"المخزون\",\n            type: \"أصول\",\n            balance: \"0\",\n            isActive: 1,\n          })\n          .returning();\n      }\n\n      // Create revenue entry\n      const [revenueEntry] = await tx\n        .insert(entries)\n        .values({\n          entryNumber: `INV-${invoice.invoiceNumber}`,\n          date: invoice.invoiceDate,\n          description: `قيد إيرادات فاتورة مبيعات رقم ${invoice.invoiceNumber}`,\n          totalDebit: invoice.totalAfterTax,\n          totalCredit: invoice.totalAfterTax,\n          isBalanced: 1,\n        })\n        .returning();\n\n      // Create revenue entry lines and update account balances\n      await tx.insert(entryLines).values({\n        entryId: revenueEntry.id,\n        accountId: customer.accountId,\n        debit: invoice.totalAfterTax,\n        credit: \"0\",\n        description: `مدين: ${customer.name}`,\n      });\n      await tx\n        .update(accounts)\n        .set({ balance: sql`${accounts.balance}::numeric + ${invoice.totalAfterTax}::numeric` })\n        .where(eq(accounts.id, customer.accountId));\n\n      await tx.insert(entryLines).values({\n        entryId: revenueEntry.id,\n        accountId: revenueAccount.id,\n        debit: \"0\",\n        credit: invoice.totalBeforeTax,\n        description: \"إيرادات المبيعات\",\n      });\n      await tx\n        .update(accounts)\n        .set({ balance: sql`${accounts.balance}::numeric - ${invoice.totalBeforeTax}::numeric` })\n        .where(eq(accounts.id, revenueAccount.id));\n\n      await tx.insert(entryLines).values({\n        entryId: revenueEntry.id,\n        accountId: vatAccount.id,\n        debit: \"0\",\n        credit: invoice.taxAmount,\n        description: \"ضريبة القيمة المضافة\",\n      });\n      await tx\n        .update(accounts)\n        .set({ balance: sql`${accounts.balance}::numeric - ${invoice.taxAmount}::numeric` })\n        .where(eq(accounts.id, vatAccount.id));\n\n      // Create cost entry\n      const [costEntry] = await tx\n        .insert(entries)\n        .values({\n          entryNumber: `COGS-${invoice.invoiceNumber}`,\n          date: invoice.invoiceDate,\n          description: `قيد تكلفة فاتورة مبيعات رقم ${invoice.invoiceNumber}`,\n          totalDebit: invoice.totalCost,\n          totalCredit: invoice.totalCost,\n          isBalanced: 1,\n        })\n        .returning();\n\n      // Create cost entry lines and update account balances\n      await tx.insert(entryLines).values({\n        entryId: costEntry.id,\n        accountId: cogsAccount.id,\n        debit: invoice.totalCost,\n        credit: \"0\",\n        description: \"تكلفة البضاعة المباعة\",\n      });\n      await tx\n        .update(accounts)\n        .set({ balance: sql`${accounts.balance}::numeric + ${invoice.totalCost}::numeric` })\n        .where(eq(accounts.id, cogsAccount.id));\n\n      await tx.insert(entryLines).values({\n        entryId: costEntry.id,\n        accountId: inventoryAccount.id,\n        debit: \"0\",\n        credit: invoice.totalCost,\n        description: \"خصم من المخزون\",\n      });\n      await tx\n        .update(accounts)\n        .set({ balance: sql`${accounts.balance}::numeric - ${invoice.totalCost}::numeric` })\n        .where(eq(accounts.id, inventoryAccount.id));\n\n      // Deduct quantities and create stock movements\n      for (const item of items) {\n        const [product] = await tx\n          .select()\n          .from(products)\n          .where(eq(products.id, item.productId));\n\n        const quantityBefore = parseFloat(product!.quantityOnHand);\n        const quantity = parseFloat(item.quantity);\n        const quantityAfter = quantityBefore - quantity;\n\n        // Update product quantity\n        await tx\n          .update(products)\n          .set({ quantityOnHand: quantityAfter.toString() })\n          .where(eq(products.id, item.productId));\n\n        // Create stock movement\n        await tx.insert(stockMovements).values({\n          productId: item.productId,\n          movementType: \"فاتورة مبيعات\",\n          referenceId: invoice.id,\n          referenceNumber: invoice.invoiceNumber,\n          quantity: (-quantity).toString(), // Negative for outbound\n          quantityBefore: quantityBefore.toString(),\n          quantityAfter: quantityAfter.toString(),\n          movementDate: invoice.invoiceDate,\n          notes: `فاتورة مبيعات رقم ${invoice.invoiceNumber}`,\n        });\n      }\n\n      // Update customer balance\n      const newCustomerBalance = parseFloat(customer.currentBalance) + parseFloat(invoice.totalAfterTax);\n      await tx\n        .update(customers)\n        .set({ currentBalance: newCustomerBalance.toString() })\n        .where(eq(customers.id, invoice.customerId));\n\n      // Update invoice status\n      const [postedInvoice] = await tx\n        .update(salesInvoices)\n        .set({\n          status: \"منشورة\",\n          entryId: revenueEntry.id,\n          costEntryId: costEntry.id,\n          postedAt: new Date(),\n        })\n        .where(eq(salesInvoices.id, id))\n        .returning();\n\n      // Return full invoice\n      const itemsWithDetails = await Promise.all(\n        items.map(async (item) => {\n          const product = await this.getProduct(item.productId);\n          return {\n            ...item,\n            productName: product?.itemName,\n            unit: product?.unit,\n          };\n        })\n      );\n\n      return {\n        ...postedInvoice,\n        items: itemsWithDetails,\n        customerName: customer.name,\n      };\n    });\n  }\n\n  // ===============================\n  // Receipt Voucher Operations\n  // ===============================\n\n  async getReceiptVouchers(): Promise<FullReceiptVoucher[]> {\n    const vouchers = await db.select().from(receiptVouchers).orderBy(desc(receiptVouchers.createdAt));\n    \n    return await Promise.all(\n      vouchers.map(async (voucher) => {\n        const allocations = await db\n          .select()\n          .from(receiptVoucherAllocations)\n          .where(eq(receiptVoucherAllocations.voucherId, voucher.id));\n\n        const customer = await this.getCustomer(voucher.customerId);\n        const targetAccount = await db\n          .select()\n          .from(accounts)\n          .where(eq(accounts.id, voucher.targetAccountId))\n          .then(res => res[0]);\n\n        const allocationsWithInvoices = await Promise.all(\n          allocations.map(async (allocation) => {\n            const invoice = await db\n              .select()\n              .from(salesInvoices)\n              .where(eq(salesInvoices.id, allocation.invoiceId))\n              .then(res => res[0]);\n            return {\n              ...allocation,\n              invoiceNumber: invoice?.invoiceNumber,\n            };\n          })\n        );\n\n        return {\n          ...voucher,\n          allocations: allocationsWithInvoices,\n          customerName: customer?.name,\n          targetAccountName: targetAccount?.name,\n        };\n      })\n    );\n  }\n\n  async getReceiptVoucher(id: string): Promise<FullReceiptVoucher | undefined> {\n    const [voucher] = await db.select().from(receiptVouchers).where(eq(receiptVouchers.id, id));\n    if (!voucher) return undefined;\n\n    const allocations = await db\n      .select()\n      .from(receiptVoucherAllocations)\n      .where(eq(receiptVoucherAllocations.voucherId, id));\n\n    const customer = await this.getCustomer(voucher.customerId);\n    const targetAccount = await db\n      .select()\n      .from(accounts)\n      .where(eq(accounts.id, voucher.targetAccountId))\n      .then(res => res[0]);\n\n    const allocationsWithInvoices = await Promise.all(\n      allocations.map(async (allocation) => {\n        const invoice = await db\n          .select()\n          .from(salesInvoices)\n          .where(eq(salesInvoices.id, allocation.invoiceId))\n          .then(res => res[0]);\n        return {\n          ...allocation,\n          invoiceNumber: invoice?.invoiceNumber,\n        };\n      })\n    );\n\n    return {\n      ...voucher,\n      allocations: allocationsWithInvoices,\n      customerName: customer?.name,\n      targetAccountName: targetAccount?.name,\n    };\n  }\n\n  async createReceiptVoucherDraft(data: InsertFullReceiptVoucher): Promise<FullReceiptVoucher> {\n    return await db.transaction(async (tx) => {\n      // Validate allocations if any\n      if (data.allocations && data.allocations.length > 0) {\n        // Check sum of allocations doesn't exceed voucher amount\n        const totalAllocations = data.allocations.reduce(\n          (sum, allocation) => sum + parseFloat(allocation.amount.toString()),\n          0\n        );\n        const voucherAmount = parseFloat(data.amount.toString());\n        \n        if (totalAllocations > voucherAmount) {\n          throw new ValidationError(`مجموع التخصيصات (${totalAllocations}) يتجاوز مبلغ السند (${voucherAmount})`);\n        }\n\n        // Validate each allocation\n        for (const allocation of data.allocations) {\n          // Check amount is positive\n          if (parseFloat(allocation.amount.toString()) <= 0) {\n            throw new ValidationError(\"مبلغ التخصيص يجب أن يكون أكبر من صفر\");\n          }\n\n          const [invoice] = await tx\n            .select()\n            .from(salesInvoices)\n            .where(eq(salesInvoices.id, allocation.invoiceId));\n\n          if (!invoice) {\n            throw new NotFoundError(`الفاتورة غير موجودة: ${allocation.invoiceId}`);\n          }\n\n          if (invoice.customerId !== data.customerId) {\n            throw new ValidationError(`الفاتورة ${invoice.invoiceNumber} لا تنتمي للعميل المحدد`);\n          }\n\n          if (invoice.status !== \"منشورة\") {\n            throw new ValidationError(`الفاتورة ${invoice.invoiceNumber} ليست منشورة`);\n          }\n        }\n      }\n\n      // Create voucher\n      const [voucher] = await tx\n        .insert(receiptVouchers)\n        .values({\n          voucherNumber: data.voucherNumber,\n          voucherDate: new Date(data.voucherDate),\n          customerId: data.customerId,\n          amount: data.amount.toString(),\n          paymentMethod: data.paymentMethod,\n          targetAccountId: data.targetAccountId,\n          checkNumber: data.checkNumber,\n          checkDate: data.checkDate ? new Date(data.checkDate) : undefined,\n          checkBank: data.checkBank,\n          status: \"مسودة\",\n          notes: data.notes,\n        })\n        .returning();\n\n      // Create allocations if any\n      if (data.allocations && data.allocations.length > 0) {\n        await tx.insert(receiptVoucherAllocations).values(\n          data.allocations.map((allocation) => ({\n            voucherId: voucher.id,\n            invoiceId: allocation.invoiceId,\n            amount: allocation.amount.toString(),\n          }))\n        );\n      }\n\n      return await this.getReceiptVoucher(voucher.id) as FullReceiptVoucher;\n    });\n  }\n\n  async updateReceiptVoucherDraft(id: string, data: InsertFullReceiptVoucher): Promise<FullReceiptVoucher> {\n    return await db.transaction(async (tx) => {\n      // Get voucher\n      const [voucher] = await tx.select().from(receiptVouchers).where(eq(receiptVouchers.id, id));\n      \n      if (!voucher) {\n        throw new NotFoundError(\"السند غير موجود\");\n      }\n\n      if (voucher.status !== \"مسودة\") {\n        throw new InvalidStateError(\"لا يمكن تعديل سند منشور\");\n      }\n\n      // Validate allocations if any\n      if (data.allocations && data.allocations.length > 0) {\n        // Check sum of allocations doesn't exceed voucher amount\n        const totalAllocations = data.allocations.reduce(\n          (sum, allocation) => sum + parseFloat(allocation.amount.toString()),\n          0\n        );\n        const voucherAmount = parseFloat(data.amount.toString());\n        \n        if (totalAllocations > voucherAmount) {\n          throw new ValidationError(`مجموع التخصيصات (${totalAllocations}) يتجاوز مبلغ السند (${voucherAmount})`);\n        }\n\n        // Validate each allocation\n        for (const allocation of data.allocations) {\n          // Check amount is positive\n          if (parseFloat(allocation.amount.toString()) <= 0) {\n            throw new ValidationError(\"مبلغ التخصيص يجب أن يكون أكبر من صفر\");\n          }\n\n          const [invoice] = await tx\n            .select()\n            .from(salesInvoices)\n            .where(eq(salesInvoices.id, allocation.invoiceId));\n\n          if (!invoice) {\n            throw new NotFoundError(`الفاتورة غير موجودة: ${allocation.invoiceId}`);\n          }\n\n          if (invoice.customerId !== data.customerId) {\n            throw new ValidationError(`الفاتورة ${invoice.invoiceNumber} لا تنتمي للعميل المحدد`);\n          }\n\n          if (invoice.status !== \"منشورة\") {\n            throw new ValidationError(`الفاتورة ${invoice.invoiceNumber} ليست منشورة`);\n          }\n        }\n      }\n\n      // Update voucher\n      await tx\n        .update(receiptVouchers)\n        .set({\n          voucherNumber: data.voucherNumber,\n          voucherDate: new Date(data.voucherDate),\n          customerId: data.customerId,\n          amount: data.amount.toString(),\n          paymentMethod: data.paymentMethod,\n          targetAccountId: data.targetAccountId,\n          checkNumber: data.checkNumber,\n          checkDate: data.checkDate ? new Date(data.checkDate) : undefined,\n          checkBank: data.checkBank,\n          notes: data.notes,\n        })\n        .where(eq(receiptVouchers.id, id));\n\n      // Delete old allocations\n      await tx.delete(receiptVoucherAllocations).where(eq(receiptVoucherAllocations.voucherId, id));\n\n      // Create new allocations if any\n      if (data.allocations && data.allocations.length > 0) {\n        await tx.insert(receiptVoucherAllocations).values(\n          data.allocations.map((allocation) => ({\n            voucherId: id,\n            invoiceId: allocation.invoiceId,\n            amount: allocation.amount.toString(),\n          }))\n        );\n      }\n\n      return await this.getReceiptVoucher(id) as FullReceiptVoucher;\n    });\n  }\n\n  async deleteReceiptVoucherDraft(id: string): Promise<boolean> {\n    return await db.transaction(async (tx) => {\n      const [voucher] = await tx.select().from(receiptVouchers).where(eq(receiptVouchers.id, id));\n      \n      if (!voucher) {\n        return false;\n      }\n\n      if (voucher.status !== \"مسودة\") {\n        throw new InvalidStateError(\"لا يمكن حذف سند منشور\");\n      }\n\n      // Delete allocations\n      await tx.delete(receiptVoucherAllocations).where(eq(receiptVoucherAllocations.voucherId, id));\n\n      // Delete voucher\n      await tx.delete(receiptVouchers).where(eq(receiptVouchers.id, id));\n\n      return true;\n    });\n  }\n\n  async postReceiptVoucher(id: string): Promise<FullReceiptVoucher> {\n    return await db.transaction(async (tx) => {\n      // Get voucher\n      const [voucher] = await tx.select().from(receiptVouchers).where(eq(receiptVouchers.id, id));\n\n      if (!voucher) {\n        throw new NotFoundError(\"السند غير موجود\");\n      }\n\n      if (voucher.status === \"منشور\") {\n        throw new InvalidStateError(\"السند منشور مسبقاً\");\n      }\n\n      // Get customer\n      const [customer] = await tx.select().from(customers).where(eq(customers.id, voucher.customerId));\n\n      if (!customer || !customer.accountId) {\n        throw new NotFoundError(\"العميل غير موجود أو ليس له حساب محاسبي مرتبط\");\n      }\n\n      // Get target account (bank or cash)\n      const [targetAccount] = await tx.select().from(accounts).where(eq(accounts.id, voucher.targetAccountId));\n\n      if (!targetAccount) {\n        throw new NotFoundError(\"الحساب المستهدف غير موجود\");\n      }\n\n      // Re-validate allocations before posting\n      const allocations = await tx\n        .select()\n        .from(receiptVoucherAllocations)\n        .where(eq(receiptVoucherAllocations.voucherId, id));\n\n      if (allocations.length > 0) {\n        // Check sum of allocations\n        const totalAllocations = allocations.reduce(\n          (sum, allocation) => sum + parseFloat(allocation.amount),\n          0\n        );\n        const voucherAmount = parseFloat(voucher.amount);\n        \n        if (totalAllocations > voucherAmount) {\n          throw new ValidationError(`مجموع التخصيصات (${totalAllocations}) يتجاوز مبلغ السند (${voucherAmount})`);\n        }\n\n        // Validate each allocation\n        for (const allocation of allocations) {\n          const [invoice] = await tx\n            .select()\n            .from(salesInvoices)\n            .where(eq(salesInvoices.id, allocation.invoiceId));\n\n          if (!invoice) {\n            throw new NotFoundError(`الفاتورة غير موجودة: ${allocation.invoiceId}`);\n          }\n\n          if (invoice.customerId !== voucher.customerId) {\n            throw new ValidationError(`الفاتورة ${invoice.invoiceNumber} لا تنتمي للعميل المحدد`);\n          }\n\n          if (invoice.status !== \"منشورة\") {\n            throw new ValidationError(`الفاتورة ${invoice.invoiceNumber} ليست منشورة`);\n          }\n        }\n      }\n\n      // Create accounting entry\n      // Debit: Bank/Cash account, Credit: Customer account\n      const [entry] = await tx\n        .insert(entries)\n        .values({\n          entryNumber: `RCV-${voucher.voucherNumber}`,\n          date: voucher.voucherDate,\n          description: `سند قبض رقم ${voucher.voucherNumber} من ${customer.name}`,\n          totalDebit: voucher.amount,\n          totalCredit: voucher.amount,\n          isBalanced: 1,\n        })\n        .returning();\n\n      // Entry line 1: Debit target account (bank/cash)\n      await tx.insert(entryLines).values({\n        entryId: entry.id,\n        accountId: voucher.targetAccountId,\n        debit: voucher.amount,\n        credit: \"0\",\n        description: `${targetAccount.name} - ${voucher.paymentMethod}`,\n      });\n      await tx\n        .update(accounts)\n        .set({ balance: sql`${accounts.balance}::numeric + ${voucher.amount}::numeric` })\n        .where(eq(accounts.id, voucher.targetAccountId));\n\n      // Entry line 2: Credit customer account\n      await tx.insert(entryLines).values({\n        entryId: entry.id,\n        accountId: customer.accountId,\n        debit: \"0\",\n        credit: voucher.amount,\n        description: `من العميل: ${customer.name}`,\n      });\n      await tx\n        .update(accounts)\n        .set({ balance: sql`${accounts.balance}::numeric - ${voucher.amount}::numeric` })\n        .where(eq(accounts.id, customer.accountId));\n\n      // Update customer balance (decrease debit balance)\n      const newCustomerBalance = parseFloat(customer.currentBalance) - parseFloat(voucher.amount);\n      await tx\n        .update(customers)\n        .set({ currentBalance: newCustomerBalance.toString() })\n        .where(eq(customers.id, voucher.customerId));\n\n      // Update voucher status\n      const [postedVoucher] = await tx\n        .update(receiptVouchers)\n        .set({\n          status: \"منشور\",\n          entryId: entry.id,\n          postedAt: new Date(),\n        })\n        .where(eq(receiptVouchers.id, id))\n        .returning();\n\n      // Use allocations already fetched earlier for validation\n      const allocationsWithInvoices = await Promise.all(\n        allocations.map(async (allocation) => {\n          const invoice = await tx\n            .select()\n            .from(salesInvoices)\n            .where(eq(salesInvoices.id, allocation.invoiceId))\n            .then(res => res[0]);\n          return {\n            ...allocation,\n            invoiceNumber: invoice?.invoiceNumber,\n          };\n        })\n      );\n\n      return {\n        ...postedVoucher,\n        allocations: allocationsWithInvoices,\n        customerName: customer.name,\n        targetAccountName: targetAccount.name,\n      };\n    });\n  }\n\n  // ===============================\n  // Payment Voucher Operations\n  // ===============================\n\n  async getPaymentVouchers(): Promise<FullPaymentVoucher[]> {\n    const vouchers = await db.select().from(paymentVouchers).orderBy(desc(paymentVouchers.createdAt));\n    \n    return await Promise.all(\n      vouchers.map(async (voucher) => {\n        const allocations = await db\n          .select()\n          .from(paymentVoucherAllocations)\n          .where(eq(paymentVoucherAllocations.voucherId, voucher.id));\n\n        const supplier = await this.getSupplier(voucher.supplierId);\n        const sourceAccount = await db\n          .select()\n          .from(accounts)\n          .where(eq(accounts.id, voucher.sourceAccountId))\n          .then(res => res[0]);\n\n        const allocationsWithInvoices = await Promise.all(\n          allocations.map(async (allocation) => {\n            return {\n              ...allocation,\n              invoiceNumber: allocation.purchaseInvoiceId,\n            };\n          })\n        );\n\n        return {\n          ...voucher,\n          allocations: allocationsWithInvoices,\n          supplierName: supplier?.name,\n          sourceAccountName: sourceAccount?.name,\n        };\n      })\n    );\n  }\n\n  async getPaymentVoucher(id: string): Promise<FullPaymentVoucher | undefined> {\n    const [voucher] = await db.select().from(paymentVouchers).where(eq(paymentVouchers.id, id));\n    if (!voucher) return undefined;\n\n    const allocations = await db\n      .select()\n      .from(paymentVoucherAllocations)\n      .where(eq(paymentVoucherAllocations.voucherId, id));\n\n    const supplier = await this.getSupplier(voucher.supplierId);\n    const sourceAccount = await db\n      .select()\n      .from(accounts)\n      .where(eq(accounts.id, voucher.sourceAccountId))\n      .then(res => res[0]);\n\n    const allocationsWithInvoices = await Promise.all(\n      allocations.map(async (allocation) => {\n        return {\n          ...allocation,\n          invoiceNumber: allocation.purchaseInvoiceId,\n        };\n      })\n    );\n\n    return {\n      ...voucher,\n      allocations: allocationsWithInvoices,\n      supplierName: supplier?.name,\n      sourceAccountName: sourceAccount?.name,\n    };\n  }\n\n  async createPaymentVoucherDraft(data: InsertFullPaymentVoucher): Promise<FullPaymentVoucher> {\n    return await db.transaction(async (tx) => {\n      // Validate allocations if any\n      if (data.allocations && data.allocations.length > 0) {\n        // Check sum of allocations doesn't exceed voucher amount\n        const totalAllocations = data.allocations.reduce(\n          (sum, allocation) => sum + parseFloat(allocation.amount.toString()),\n          0\n        );\n        const voucherAmount = parseFloat(data.amount.toString());\n        \n        if (totalAllocations > voucherAmount) {\n          throw new ValidationError(`مجموع التخصيصات (${totalAllocations}) يتجاوز مبلغ السند (${voucherAmount})`);\n        }\n\n        // Validate each allocation\n        for (const allocation of data.allocations) {\n          // Check amount is positive\n          if (parseFloat(allocation.amount.toString()) <= 0) {\n            throw new ValidationError(\"مبلغ التخصيص يجب أن يكون أكبر من صفر\");\n          }\n        }\n      }\n\n      // Create voucher\n      const [voucher] = await tx\n        .insert(paymentVouchers)\n        .values({\n          voucherNumber: data.voucherNumber,\n          voucherDate: new Date(data.voucherDate),\n          supplierId: data.supplierId,\n          amount: data.amount.toString(),\n          paymentMethod: data.paymentMethod,\n          sourceAccountId: data.sourceAccountId,\n          checkNumber: data.checkNumber,\n          checkDate: data.checkDate ? new Date(data.checkDate) : undefined,\n          checkBank: data.checkBank,\n          status: \"مسودة\",\n          notes: data.notes,\n        })\n        .returning();\n\n      // Create allocations if any\n      if (data.allocations && data.allocations.length > 0) {\n        await tx.insert(paymentVoucherAllocations).values(\n          data.allocations.map((allocation) => ({\n            voucherId: voucher.id,\n            purchaseInvoiceId: allocation.purchaseInvoiceId,\n            amount: allocation.amount.toString(),\n          }))\n        );\n      }\n\n      return await this.getPaymentVoucher(voucher.id) as FullPaymentVoucher;\n    });\n  }\n\n  async updatePaymentVoucherDraft(id: string, data: InsertFullPaymentVoucher): Promise<FullPaymentVoucher> {\n    return await db.transaction(async (tx) => {\n      // Get voucher\n      const [voucher] = await tx.select().from(paymentVouchers).where(eq(paymentVouchers.id, id));\n      \n      if (!voucher) {\n        throw new NotFoundError(\"السند غير موجود\");\n      }\n\n      if (voucher.status !== \"مسودة\") {\n        throw new InvalidStateError(\"لا يمكن تعديل سند منشور\");\n      }\n\n      // Validate allocations if any\n      if (data.allocations && data.allocations.length > 0) {\n        // Check sum of allocations doesn't exceed voucher amount\n        const totalAllocations = data.allocations.reduce(\n          (sum, allocation) => sum + parseFloat(allocation.amount.toString()),\n          0\n        );\n        const voucherAmount = parseFloat(data.amount.toString());\n        \n        if (totalAllocations > voucherAmount) {\n          throw new ValidationError(`مجموع التخصيصات (${totalAllocations}) يتجاوز مبلغ السند (${voucherAmount})`);\n        }\n\n        // Validate each allocation\n        for (const allocation of data.allocations) {\n          // Check amount is positive\n          if (parseFloat(allocation.amount.toString()) <= 0) {\n            throw new ValidationError(\"مبلغ التخصيص يجب أن يكون أكبر من صفر\");\n          }\n        }\n      }\n\n      // Update voucher\n      await tx\n        .update(paymentVouchers)\n        .set({\n          voucherNumber: data.voucherNumber,\n          voucherDate: new Date(data.voucherDate),\n          supplierId: data.supplierId,\n          amount: data.amount.toString(),\n          paymentMethod: data.paymentMethod,\n          sourceAccountId: data.sourceAccountId,\n          checkNumber: data.checkNumber,\n          checkDate: data.checkDate ? new Date(data.checkDate) : undefined,\n          checkBank: data.checkBank,\n          notes: data.notes,\n        })\n        .where(eq(paymentVouchers.id, id));\n\n      // Delete old allocations\n      await tx.delete(paymentVoucherAllocations).where(eq(paymentVoucherAllocations.voucherId, id));\n\n      // Create new allocations if any\n      if (data.allocations && data.allocations.length > 0) {\n        await tx.insert(paymentVoucherAllocations).values(\n          data.allocations.map((allocation) => ({\n            voucherId: id,\n            purchaseInvoiceId: allocation.purchaseInvoiceId,\n            amount: allocation.amount.toString(),\n          }))\n        );\n      }\n\n      return await this.getPaymentVoucher(id) as FullPaymentVoucher;\n    });\n  }\n\n  async deletePaymentVoucherDraft(id: string): Promise<boolean> {\n    return await db.transaction(async (tx) => {\n      const [voucher] = await tx.select().from(paymentVouchers).where(eq(paymentVouchers.id, id));\n      \n      if (!voucher) {\n        return false;\n      }\n\n      if (voucher.status !== \"مسودة\") {\n        throw new InvalidStateError(\"لا يمكن حذف سند منشور\");\n      }\n\n      // Delete allocations\n      await tx.delete(paymentVoucherAllocations).where(eq(paymentVoucherAllocations.voucherId, id));\n\n      // Delete voucher\n      await tx.delete(paymentVouchers).where(eq(paymentVouchers.id, id));\n\n      return true;\n    });\n  }\n\n  async postPaymentVoucher(id: string): Promise<FullPaymentVoucher> {\n    return await db.transaction(async (tx) => {\n      // Get voucher\n      const [voucher] = await tx.select().from(paymentVouchers).where(eq(paymentVouchers.id, id));\n\n      if (!voucher) {\n        throw new NotFoundError(\"السند غير موجود\");\n      }\n\n      if (voucher.status === \"منشور\") {\n        throw new InvalidStateError(\"السند منشور مسبقاً\");\n      }\n\n      // Get supplier\n      const [supplier] = await tx.select().from(suppliers).where(eq(suppliers.id, voucher.supplierId));\n\n      if (!supplier || !supplier.accountId) {\n        throw new NotFoundError(\"المورد غير موجود أو ليس له حساب محاسبي مرتبط\");\n      }\n\n      // Get source account (bank or cash)\n      const [sourceAccount] = await tx.select().from(accounts).where(eq(accounts.id, voucher.sourceAccountId));\n\n      if (!sourceAccount) {\n        throw new NotFoundError(\"الحساب المصدر غير موجود\");\n      }\n\n      // Re-validate allocations before posting\n      const allocations = await tx\n        .select()\n        .from(paymentVoucherAllocations)\n        .where(eq(paymentVoucherAllocations.voucherId, id));\n\n      if (allocations.length > 0) {\n        // Check sum of allocations\n        const totalAllocations = allocations.reduce(\n          (sum, allocation) => sum + parseFloat(allocation.amount),\n          0\n        );\n        const voucherAmount = parseFloat(voucher.amount);\n        \n        if (totalAllocations > voucherAmount) {\n          throw new ValidationError(`مجموع التخصيصات (${totalAllocations}) يتجاوز مبلغ السند (${voucherAmount})`);\n        }\n      }\n\n      // Create accounting entry\n      // Payment: Debit Supplier account, Credit Bank/Cash account\n      const [entry] = await tx\n        .insert(entries)\n        .values({\n          entryNumber: `PV-${voucher.voucherNumber}`,\n          date: voucher.voucherDate,\n          description: `سند دفع رقم ${voucher.voucherNumber} إلى ${supplier.name}`,\n          totalDebit: voucher.amount,\n          totalCredit: voucher.amount,\n          isBalanced: 1,\n        })\n        .returning();\n\n      // Entry line 1: Debit supplier account\n      await tx.insert(entryLines).values({\n        entryId: entry.id,\n        accountId: supplier.accountId,\n        debit: voucher.amount,\n        credit: \"0\",\n        description: `إلى المورد: ${supplier.name}`,\n      });\n      await tx\n        .update(accounts)\n        .set({ balance: sql`${accounts.balance}::numeric + ${voucher.amount}::numeric` })\n        .where(eq(accounts.id, supplier.accountId));\n\n      // Entry line 2: Credit source account (bank/cash)\n      await tx.insert(entryLines).values({\n        entryId: entry.id,\n        accountId: voucher.sourceAccountId,\n        debit: \"0\",\n        credit: voucher.amount,\n        description: `${sourceAccount.name} - ${voucher.paymentMethod}`,\n      });\n      await tx\n        .update(accounts)\n        .set({ balance: sql`${accounts.balance}::numeric - ${voucher.amount}::numeric` })\n        .where(eq(accounts.id, voucher.sourceAccountId));\n\n      // Update supplier balance (decrease credit balance)\n      const newSupplierBalance = parseFloat(supplier.currentBalance) - parseFloat(voucher.amount);\n      await tx\n        .update(suppliers)\n        .set({ currentBalance: newSupplierBalance.toString() })\n        .where(eq(suppliers.id, voucher.supplierId));\n\n      // Update voucher status\n      const [postedVoucher] = await tx\n        .update(paymentVouchers)\n        .set({\n          status: \"منشور\",\n          entryId: entry.id,\n          postedAt: new Date(),\n        })\n        .where(eq(paymentVouchers.id, id))\n        .returning();\n\n      // Use allocations already fetched earlier for validation\n      const allocationsWithInvoices = await Promise.all(\n        allocations.map(async (allocation) => {\n          return {\n            ...allocation,\n            invoiceNumber: allocation.purchaseInvoiceId,\n          };\n        })\n      );\n\n      return {\n        ...postedVoucher,\n        allocations: allocationsWithInvoices,\n        supplierName: supplier.name,\n        sourceAccountName: sourceAccount.name,\n      };\n    });\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":70112},"client/src/pages/projects/Tasks.tsx":{"content":"import { ClipboardList } from \"lucide-react\";\n\nexport default function Tasks() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <ClipboardList className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          المهام\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة مهام المشاريع\n      </p>\n    </div>\n  );\n}\n","size_bytes":487},"client/src/pages/budgets/Forecasts.tsx":{"content":"import { LineChart } from \"lucide-react\";\n\nexport default function Forecasts() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <LineChart className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          التنبؤات المالية\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: التنبؤ بالأداء المالي المستقبلي\n      </p>\n    </div>\n  );\n}\n","size_bytes":525},"client/src/pages/reports/CashFlowStatement.tsx":{"content":"import { Banknote } from \"lucide-react\";\n\nexport default function CashFlowStatement() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Banknote className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          قائمة التدفقات النقدية\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: قائمة التدفقات النقدية - التدفقات التشغيلية والاستثمارية والتمويلية\n      </p>\n    </div>\n  );\n}\n","size_bytes":609},"client/src/pages/fixed-assets/Disposal.tsx":{"content":"export { default } from './AssetDisposal';\n","size_bytes":43},"client/src/pages/cash-bank/CashPayments.tsx":{"content":"import { CreditCard } from \"lucide-react\";\n\nexport default function CashPayments() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <CreditCard className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          سندات الصرف\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة سندات الصرف النقدية\n      </p>\n    </div>\n  );\n}\n","size_bytes":508},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":844},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"client/src/pages/cash-bank/BankReconciliation.tsx":{"content":"import { ArrowLeftRight } from \"lucide-react\";\n\nexport default function BankReconciliation() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <ArrowLeftRight className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          التسويات البنكية\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة التسويات البنكية\n      </p>\n    </div>\n  );\n}\n","size_bytes":527},"client/src/pages/crm/Analytics.tsx":{"content":"import { BarChart3 } from \"lucide-react\";\n\nexport default function CRMAnalytics() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <BarChart3 className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          تحليلات العملاء\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تحليل سلوك العملاء وأداء المبيعات\n      </p>\n    </div>\n  );\n}\n","size_bytes":529},"client/src/pages/budgets/AnnualBudgets.tsx":{"content":"import { Calculator } from \"lucide-react\";\n\nexport default function AnnualBudgets() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Calculator className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          الميزانيات السنوية\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إعداد وإدارة الميزانيات السنوية\n      </p>\n    </div>\n  );\n}\n","size_bytes":535},"client/src/pages/sales/Quotations.tsx":{"content":"import { FileText } from \"lucide-react\";\n\nexport default function Quotations() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <FileText className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          عروض الأسعار\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة عروض الأسعار للعملاء\n      </p>\n    </div>\n  );\n}\n","size_bytes":506},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/pages/quality/CorrectiveActions.tsx":{"content":"import { Wrench } from \"lucide-react\";\n\nexport default function CorrectiveActions() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Wrench className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          الإجراءات التصحيحية\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة الإجراءات التصحيحية والوقائية\n      </p>\n    </div>\n  );\n}\n","size_bytes":541},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/pages/contracts/Alerts.tsx":{"content":"import { MessageSquare } from \"lucide-react\";\n\nexport default function Alerts() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <MessageSquare className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          تنبيهات العقود\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تنبيهات انتهاء وتجديد العقود\n      </p>\n    </div>\n  );\n}\n","size_bytes":520},"client/src/pages/fixed-assets/AssetRegister.tsx":{"content":"import { PackageCheck } from \"lucide-react\";\n\nexport default function AssetRegister() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <PackageCheck className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          تسجيل الأصول\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تسجيل الأصول الثابتة الجديدة\n      </p>\n    </div>\n  );\n}\n","size_bytes":521},"client/src/pages/master/CostCenters.tsx":{"content":"import { Target } from \"lucide-react\";\n\nexport default function CostCenters() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Target className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          إدارة مراكز التكلفة\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة مراكز التكلفة والأقسام\n      </p>\n    </div>\n  );\n}\n","size_bytes":520},"client/src/pages/meetings/Decisions.tsx":{"content":"import { CheckCircle } from \"lucide-react\";\n\nexport default function MeetingDecisions() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <CheckCircle className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          القرارات والتوصيات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: متابعة قرارات وتوصيات الاجتماعات\n      </p>\n    </div>\n  );\n}\n","size_bytes":542},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/pages/pos/DailyInvoices.tsx":{"content":"import { FileCheck } from \"lucide-react\";\n\nexport default function DailyInvoices() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <FileCheck className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          الفواتير اليومية\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: عرض جميع فواتير المبيعات اليومية\n      </p>\n    </div>\n  );\n}\n","size_bytes":530},"client/src/pages/production/BillOfMaterials.tsx":{"content":"import { FileText } from \"lucide-react\";\n\nexport default function BillOfMaterials() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <FileText className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          وصفات الإنتاج (BOM)\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة وصفات وقوائم مواد الإنتاج\n      </p>\n    </div>\n  );\n}\n","size_bytes":528},"client/src/pages/ecommerce/OnlineCustomers.tsx":{"content":"import { Users } from \"lucide-react\";\n\nexport default function OnlineCustomers() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Users className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          عملاء المتجر الإلكتروني\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة عملاء المتجر الإلكتروني\n      </p>\n    </div>\n  );\n}\n","size_bytes":532},"client/src/pages/fixed-assets/Transfer.tsx":{"content":"export { default } from './AssetTransfer';\n","size_bytes":43},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/pages/loyalty/Coupons.tsx":{"content":"import { Ticket } from \"lucide-react\";\n\nexport default function Coupons() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Ticket className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          الكوبونات والعروض\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة الكوبونات والعروض الترويجية\n      </p>\n    </div>\n  );\n}\n","size_bytes":523},"client/src/pages/sales/Orders.tsx":{"content":"export { default } from './SalesOrders';\n","size_bytes":41},"client/src/pages/sales/SalesReturns.tsx":{"content":"import { PackageX } from \"lucide-react\";\n\nexport default function SalesReturns() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <PackageX className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          مرتجعات المبيعات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة مرتجعات المبيعات\n      </p>\n    </div>\n  );\n}\n","size_bytes":509},"client/src/pages/sales/Customers.tsx":{"content":"export { default } from './SalesCustomers';\n","size_bytes":44},"client/src/pages/loyalty/LoyaltyReports.tsx":{"content":"import { FileText } from \"lucide-react\";\n\nexport default function LoyaltyReports() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <FileText className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          تقارير الولاء\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تقارير شاملة عن برامج الولاء\n      </p>\n    </div>\n  );\n}\n","size_bytes":515},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\n\ndeclare module 'http' {\n  interface IncomingMessage {\n    rawBody: unknown\n  }\n}\napp.use(express.json({\n  verify: (req, _res, buf) => {\n    req.rawBody = buf;\n  }\n}));\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2210},"client/src/pages/documents/Archive.tsx":{"content":"import { Archive as ArchiveIcon } from \"lucide-react\";\n\nexport default function DocumentArchive() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <ArchiveIcon className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          الأرشيف\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: أرشفة المستندات القديمة\n      </p>\n    </div>\n  );\n}\n","size_bytes":514},"client/src/pages/inventory/reports/StockBalance.tsx":{"content":"import { Package } from \"lucide-react\";\n\nexport default function StockBalance() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Package className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          أرصدة المخزون\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: عرض أرصدة المخزون الحالية\n      </p>\n    </div>\n  );\n}\n","size_bytes":506},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/pages/crm/Activities.tsx":{"content":"import { Activity } from \"lucide-react\";\n\nexport default function Activities() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Activity className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          الأنشطة والاتصالات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تسجيل المكالمات والاجتماعات والمهام\n      </p>\n    </div>\n  );\n}\n","size_bytes":536},"client/src/pages/maintenance/MaintenanceCosts.tsx":{"content":"import { DollarSign } from \"lucide-react\";\n\nexport default function MaintenanceCosts() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <DollarSign className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          تكاليف الصيانة\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تتبع تكاليف الصيانة والإصلاح\n      </p>\n    </div>\n  );\n}\n","size_bytes":524},"client/src/pages/master/Customers.tsx":{"content":"import { useState } from \"react\";\nimport { UserPlus, Save, Trash2, Plus } from \"lucide-react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { insertCustomerSchema, type InsertCustomer, type Customer } from \"@shared/schema\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n  FormDescription,\n} from \"@/components/ui/form\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\n\nexport default function Customers() {\n  const { toast } = useToast();\n  const [selectedCustomer, setSelectedCustomer] = useState<Customer | null>(null);\n\n  const form = useForm<InsertCustomer>({\n    resolver: zodResolver(insertCustomerSchema),\n    defaultValues: {\n      code: \"\",\n      name: \"\",\n      phone: \"\",\n      email: \"\",\n      address: \"\",\n      taxNumber: \"\",\n      openingBalance: \"0\",\n      isActive: 1,\n    },\n  });\n\n  // Fetch all customers\n  const { data: customers, isLoading, isError, error } = useQuery<Customer[]>({\n    queryKey: [\"/api/customers\"],\n  });\n\n  // Create customer mutation\n  const createMutation = useMutation({\n    mutationFn: async (data: InsertCustomer) => {\n      return await apiRequest(\"POST\", \"/api/customers\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/customers\"] });\n      toast({\n        title: \"تم الحفظ بنجاح\",\n        description: \"تم إضافة العميل بنجاح وإنشاء حساب محاسبي مرتبط\",\n      });\n      handleReset();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"خطأ\",\n        description: error.message || \"فشل في إضافة العميل\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Update customer mutation\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: InsertCustomer }) => {\n      return await apiRequest(\"PUT\", `/api/customers/${id}`, data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/customers\"] });\n      toast({\n        title: \"تم التحديث بنجاح\",\n        description: \"تم تحديث بيانات العميل بنجاح\",\n      });\n      handleReset();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"خطأ\",\n        description: error.message || \"فشل في تحديث العميل\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Delete customer mutation\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return await apiRequest(\"DELETE\", `/api/customers/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/customers\"] });\n      toast({\n        title: \"تم الحذف بنجاح\",\n        description: \"تم حذف العميل بنجاح\",\n      });\n      handleReset();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"خطأ\",\n        description: error.message || \"فشل في حذف العميل\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: InsertCustomer) => {\n    if (selectedCustomer) {\n      updateMutation.mutate({ id: selectedCustomer.id, data });\n    } else {\n      createMutation.mutate(data);\n    }\n  };\n\n  const handleReset = () => {\n    setSelectedCustomer(null);\n    form.reset({\n      code: \"\",\n      name: \"\",\n      phone: \"\",\n      email: \"\",\n      address: \"\",\n      taxNumber: \"\",\n      openingBalance: \"0\",\n      isActive: 1,\n    });\n  };\n\n  const handleDelete = () => {\n    if (selectedCustomer) {\n      if (confirm(\"هل أنت متأكد من حذف هذا العميل؟ سيتم حذف الحساب المحاسبي المرتبط أيضاً.\")) {\n        deleteMutation.mutate(selectedCustomer.id);\n      }\n    }\n  };\n\n  const handleRowClick = (customer: Customer) => {\n    setSelectedCustomer(customer);\n    form.reset({\n      code: customer.code,\n      name: customer.name,\n      phone: customer.phone || \"\",\n      email: customer.email || \"\",\n      address: customer.address || \"\",\n      taxNumber: customer.taxNumber || \"\",\n      openingBalance: customer.openingBalance,\n      isActive: customer.isActive,\n    });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <UserPlus className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          إدارة بيانات العملاء\n        </h1>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>\n            {selectedCustomer ? \"تعديل بيانات عميل\" : \"إضافة عميل جديد\"}\n          </CardTitle>\n          <CardDescription>\n            قم بإدخال بيانات العميل. سيتم إنشاء حساب محاسبي مرتبط تلقائياً\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"code\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>كود العميل *</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          placeholder=\"مثال: C001\"\n                          data-testid=\"input-customer-code\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"name\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>اسم العميل *</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          placeholder=\"أدخل اسم العميل\"\n                          data-testid=\"input-customer-name\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"phone\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>رقم الهاتف</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          placeholder=\"05xxxxxxxx\"\n                          data-testid=\"input-customer-phone\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"email\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>البريد الإلكتروني</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          type=\"email\"\n                          placeholder=\"example@email.com\"\n                          data-testid=\"input-customer-email\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"taxNumber\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>الرقم الضريبي / السجل التجاري</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          placeholder=\"رقم السجل أو الرقم الضريبي\"\n                          data-testid=\"input-customer-tax\"\n                        />\n                      </FormControl>\n                      <FormDescription>\n                        للشركات فقط (متوافق مع الزكاة والدخل)\n                      </FormDescription>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"openingBalance\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>الرصيد الافتتاحي</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          type=\"number\"\n                          step=\"0.01\"\n                          placeholder=\"0.00\"\n                          data-testid=\"input-opening-balance\"\n                        />\n                      </FormControl>\n                      <FormDescription>\n                        الرصيد المدين للعميل عند البداية\n                      </FormDescription>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <FormField\n                control={form.control}\n                name=\"address\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>العنوان</FormLabel>\n                    <FormControl>\n                      <Textarea\n                        {...field}\n                        placeholder=\"أدخل عنوان العميل بالتفصيل\"\n                        rows={3}\n                        data-testid=\"input-customer-address\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <div className=\"flex gap-2 flex-wrap\">\n                <Button\n                  type=\"submit\"\n                  disabled={createMutation.isPending || updateMutation.isPending}\n                  data-testid=\"button-save\"\n                >\n                  <Save className=\"w-4 h-4 ml-2\" />\n                  {selectedCustomer ? \"تحديث\" : \"حفظ\"}\n                </Button>\n\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={handleReset}\n                  data-testid=\"button-reset\"\n                >\n                  <Plus className=\"w-4 h-4 ml-2\" />\n                  جديد\n                </Button>\n\n                {selectedCustomer && (\n                  <Button\n                    type=\"button\"\n                    variant=\"destructive\"\n                    onClick={handleDelete}\n                    disabled={deleteMutation.isPending}\n                    data-testid=\"button-delete\"\n                  >\n                    <Trash2 className=\"w-4 h-4 ml-2\" />\n                    حذف\n                  </Button>\n                )}\n              </div>\n            </form>\n          </Form>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between flex-wrap gap-2\">\n            <div>\n              <CardTitle>قائمة العملاء</CardTitle>\n              <CardDescription>\n                اضغط على أي عميل لتعديله أو حذفه\n              </CardDescription>\n            </div>\n            {customers && (\n              <Badge variant=\"secondary\" data-testid=\"text-customer-count\">\n                إجمالي العملاء: {customers.length}\n              </Badge>\n            )}\n          </div>\n        </CardHeader>\n        <CardContent>\n          {isLoading ? (\n            <div className=\"text-center py-12\">\n              <div className=\"inline-block w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mb-2\"></div>\n              <p className=\"text-muted-foreground\">جاري تحميل بيانات العملاء...</p>\n            </div>\n          ) : isError ? (\n            <div className=\"text-center py-12\">\n              <div className=\"text-destructive mb-2\">⚠️ حدث خطأ في تحميل البيانات</div>\n              <p className=\"text-sm text-muted-foreground\">\n                {error instanceof Error ? error.message : \"فشل في جلب بيانات العملاء\"}\n              </p>\n              <Button \n                variant=\"outline\" \n                size=\"sm\" \n                className=\"mt-4\"\n                onClick={() => queryClient.invalidateQueries({ queryKey: [\"/api/customers\"] })}\n              >\n                إعادة المحاولة\n              </Button>\n            </div>\n          ) : customers && customers.length > 0 ? (\n            <div className=\"border rounded-md overflow-x-auto\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>الكود</TableHead>\n                    <TableHead>الاسم</TableHead>\n                    <TableHead>الهاتف</TableHead>\n                    <TableHead>البريد</TableHead>\n                    <TableHead>الرقم الضريبي</TableHead>\n                    <TableHead className=\"text-left\">الرصيد الحالي</TableHead>\n                    <TableHead>الحالة</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {customers.map((customer) => (\n                    <TableRow\n                      key={customer.id}\n                      onClick={() => handleRowClick(customer)}\n                      className={`cursor-pointer hover-elevate ${\n                        selectedCustomer?.id === customer.id\n                          ? \"bg-muted\"\n                          : \"\"\n                      }`}\n                      data-testid={`row-customer-${customer.id}`}\n                    >\n                      <TableCell className=\"font-medium\" data-testid={`text-code-${customer.id}`}>\n                        {customer.code}\n                      </TableCell>\n                      <TableCell data-testid={`text-name-${customer.id}`}>\n                        {customer.name}\n                      </TableCell>\n                      <TableCell data-testid={`text-phone-${customer.id}`}>\n                        {customer.phone || \"-\"}\n                      </TableCell>\n                      <TableCell data-testid={`text-email-${customer.id}`}>\n                        {customer.email || \"-\"}\n                      </TableCell>\n                      <TableCell data-testid={`text-tax-${customer.id}`}>\n                        {customer.taxNumber || \"-\"}\n                      </TableCell>\n                      <TableCell \n                        className={`text-left font-semibold ${\n                          parseFloat(customer.currentBalance) > 0 \n                            ? \"text-green-600 dark:text-green-400\" \n                            : parseFloat(customer.currentBalance) < 0\n                            ? \"text-red-600 dark:text-red-400\"\n                            : \"\"\n                        }`}\n                        data-testid={`text-balance-${customer.id}`}\n                      >\n                        {parseFloat(customer.currentBalance).toFixed(2)} ر.س\n                      </TableCell>\n                      <TableCell data-testid={`text-status-${customer.id}`}>\n                        <Badge variant={customer.isActive ? \"default\" : \"secondary\"}>\n                          {customer.isActive ? \"نشط\" : \"غير نشط\"}\n                        </Badge>\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </div>\n          ) : (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              لا يوجد عملاء مسجلين. قم بإضافة عميل جديد من الأعلى.\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":16928},"client/src/pages/cash-bank/Receipts.tsx":{"content":"export { default } from './CashReceipts';\n","size_bytes":42},"client/src/pages/fixed-assets/reports/AssetRegisterReport.tsx":{"content":"import { FileSpreadsheet } from \"lucide-react\";\n\nexport default function AssetRegisterReport() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <FileSpreadsheet className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          سجل الأصول\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: سجل الأصول الكامل\n      </p>\n    </div>\n  );\n}\n","size_bytes":508},"client/src/pages/Settings.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Settings as SettingsIcon, Moon, Sun } from \"lucide-react\";\nimport { useState, useEffect } from \"react\";\n\nexport default function Settings() {\n  const [theme, setTheme] = useState<\"light\" | \"dark\">(\"light\");\n\n  useEffect(() => {\n    const savedTheme = localStorage.getItem(\"theme\") as \"light\" | \"dark\" || \"light\";\n    setTheme(savedTheme);\n    document.documentElement.classList.toggle(\"dark\", savedTheme === \"dark\");\n  }, []);\n\n  const toggleTheme = () => {\n    const newTheme = theme === \"light\" ? \"dark\" : \"light\";\n    setTheme(newTheme);\n    localStorage.setItem(\"theme\", newTheme);\n    document.documentElement.classList.toggle(\"dark\", newTheme === \"dark\");\n  };\n\n  return (\n    <div className=\"p-8 space-y-6\" data-testid=\"page-settings\">\n      <div>\n        <h1 className=\"text-3xl font-bold mb-2\" data-testid=\"text-page-title\">\n          الإعدادات\n        </h1>\n        <p className=\"text-muted-foreground\">\n          إدارة إعدادات التطبيق والتفضيلات\n        </p>\n      </div>\n\n      <Card className=\"p-6\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"bg-primary/10 p-3 rounded-lg\">\n              {theme === \"light\" ? (\n                <Sun className=\"w-6 h-6 text-primary\" />\n              ) : (\n                <Moon className=\"w-6 h-6 text-primary\" />\n              )}\n            </div>\n            <div>\n              <h3 className=\"font-medium text-lg\">المظهر</h3>\n              <p className=\"text-sm text-muted-foreground\">\n                {theme === \"light\" ? \"الوضع النهاري\" : \"الوضع الليلي\"}\n              </p>\n            </div>\n          </div>\n          <Button\n            onClick={toggleTheme}\n            variant=\"outline\"\n            data-testid=\"button-toggle-theme\"\n          >\n            {theme === \"light\" ? (\n              <>\n                <Moon className=\"w-5 h-5 me-2\" />\n                تفعيل الوضع الليلي\n              </>\n            ) : (\n              <>\n                <Sun className=\"w-5 h-5 me-2\" />\n                تفعيل الوضع النهاري\n              </>\n            )}\n          </Button>\n        </div>\n      </Card>\n\n      <Card className=\"p-6\">\n        <div className=\"flex items-center gap-3 mb-4\">\n          <div className=\"bg-primary/10 p-3 rounded-lg\">\n            <SettingsIcon className=\"w-6 h-6 text-primary\" />\n          </div>\n          <h3 className=\"font-medium text-lg\">معلومات التطبيق</h3>\n        </div>\n        <div className=\"space-y-3 text-sm\">\n          <div className=\"flex justify-between p-3 bg-muted/50 rounded\">\n            <span className=\"text-muted-foreground\">اسم التطبيق</span>\n            <span className=\"font-medium\">RinaPro Business</span>\n          </div>\n          <div className=\"flex justify-between p-3 bg-muted/50 rounded\">\n            <span className=\"text-muted-foreground\">الإصدار</span>\n            <span className=\"font-medium\">1.0.0</span>\n          </div>\n          <div className=\"flex justify-between p-3 bg-muted/50 rounded\">\n            <span className=\"text-muted-foreground\">النوع</span>\n            <span className=\"font-medium\">نظام محاسبة احترافي</span>\n          </div>\n        </div>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":3468},"client/src/pages/fixed-assets/Register.tsx":{"content":"export { default } from './AssetRegister';\n","size_bytes":43},"client/src/pages/documents/Search.tsx":{"content":"import { Search as SearchIcon } from \"lucide-react\";\n\nexport default function DocumentSearch() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <SearchIcon className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          البحث في المستندات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: البحث السريع في المستندات\n      </p>\n    </div>\n  );\n}\n","size_bytes":533},"client/src/pages/hr/Deductions.tsx":{"content":"import { TrendingDown } from \"lucide-react\";\n\nexport default function Deductions() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <TrendingDown className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          الاستقطاعات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة استقطاعات الموظفين\n      </p>\n    </div>\n  );\n}\n","size_bytes":510},"client/src/pages/purchasing/GoodsReceipt.tsx":{"content":"import { PackageCheck } from \"lucide-react\";\n\nexport default function GoodsReceipt() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <PackageCheck className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          استلام البضاعة\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة استلام البضاعة من الموردين\n      </p>\n    </div>\n  );\n}\n","size_bytes":531},"client/src/pages/maintenance/MaintenanceSchedule.tsx":{"content":"import { Calendar } from \"lucide-react\";\n\nexport default function MaintenanceSchedule() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Calendar className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          جدول الصيانة\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: جدولة الصيانة الدورية والوقائية\n      </p>\n    </div>\n  );\n}\n","size_bytes":525},"client/src/pages/purchasing/PurchaseOrders.tsx":{"content":"import { ClipboardList } from \"lucide-react\";\n\nexport default function PurchaseOrders() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <ClipboardList className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          طلبات الشراء\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة طلبات الشراء\n      </p>\n    </div>\n  );\n}\n","size_bytes":505},"client/src/pages/projects/ProjectReports.tsx":{"content":"import { FileBarChart } from \"lucide-react\";\n\nexport default function ProjectReports() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <FileBarChart className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          تقارير المشاريع\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تقارير أداء وميزانيات المشاريع\n      </p>\n    </div>\n  );\n}\n","size_bytes":532},"client/src/pages/bi/DataAnalysis.tsx":{"content":"import { BarChart } from \"lucide-react\";\n\nexport default function DataAnalysis() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <BarChart className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          تحليل البيانات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تحليل متقدم للبيانات التجارية\n      </p>\n    </div>\n  );\n}\n","size_bytes":518},"client/src/pages/cash-bank/Payments.tsx":{"content":"export { default } from './CashPayments';\n","size_bytes":42},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"server/db.ts":{"content":"import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });\n","size_bytes":483},"client/src/pages/budgets/ActualVsBudget.tsx":{"content":"import { TrendingUp } from \"lucide-react\";\n\nexport default function ActualVsBudget() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <TrendingUp className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          الفعلي مقابل المخطط\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: مقارنة الأداء الفعلي بالميزانية المخططة\n      </p>\n    </div>\n  );\n}\n","size_bytes":552},"client/src/pages/hr/Attendance.tsx":{"content":"import { Clock } from \"lucide-react\";\n\nexport default function Attendance() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Clock className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          الحضور والانصراف\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة الحضور والانصراف\n      </p>\n    </div>\n  );\n}\n","size_bytes":501},"client/src/pages/sales/SalesInvoices.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { insertFullSalesInvoiceSchema, type InsertFullSalesInvoice, type FullSalesInvoice, type Product, type Customer } from \"@shared/schema\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { FileCheck, Plus, Edit, Trash2, Send, X } from \"lucide-react\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface InvoiceItem {\n  productId: string;\n  quantity: number;\n  unitPrice: number;\n}\n\nexport default function SalesInvoices() {\n  const { toast } = useToast();\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [editingInvoice, setEditingInvoice] = useState<FullSalesInvoice | null>(null);\n  const [invoiceItems, setInvoiceItems] = useState<InvoiceItem[]>([]);\n\n  // Fetch invoices\n  const { data: invoices, isLoading, error } = useQuery<FullSalesInvoice[]>({\n    queryKey: [\"/api/sales-invoices\"],\n  });\n\n  // Fetch products for dropdown\n  const { data: products } = useQuery<Product[]>({\n    queryKey: [\"/api/products\"],\n  });\n\n  // Fetch customers for dropdown\n  const { data: customers } = useQuery<Customer[]>({\n    queryKey: [\"/api/customers\"],\n  });\n\n  const form = useForm<InsertFullSalesInvoice>({\n    resolver: zodResolver(insertFullSalesInvoiceSchema),\n    defaultValues: {\n      invoiceNumber: \"\",\n      invoiceDate: new Date().toISOString().split('T')[0],\n      customerId: \"\",\n      taxRate: \"0.15\",\n      notes: \"\",\n      items: [],\n    },\n  });\n\n  // Create mutation\n  const createMutation = useMutation({\n    mutationFn: async (data: InsertFullSalesInvoice) => {\n      return await apiRequest(\"POST\", \"/api/sales-invoices\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/sales-invoices\"] });\n      toast({\n        title: \"تم الحفظ\",\n        description: \"تم إنشاء الفاتورة بنجاح\",\n      });\n      setIsDialogOpen(false);\n      form.reset();\n      setInvoiceItems([]);\n      setEditingInvoice(null);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"خطأ\",\n        description: error.message || \"فشل في حفظ الفاتورة\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Update mutation\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: InsertFullSalesInvoice }) => {\n      return await apiRequest(\"PUT\", `/api/sales-invoices/${id}`, data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/sales-invoices\"] });\n      toast({\n        title: \"تم التحديث\",\n        description: \"تم تعديل الفاتورة بنجاح\",\n      });\n      setIsDialogOpen(false);\n      form.reset();\n      setInvoiceItems([]);\n      setEditingInvoice(null);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"خطأ\",\n        description: error.message || \"فشل في تعديل الفاتورة\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Delete mutation\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return await apiRequest(\"DELETE\", `/api/sales-invoices/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/sales-invoices\"] });\n      toast({\n        title: \"تم الحذف\",\n        description: \"تم حذف الفاتورة بنجاح\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"خطأ\",\n        description: error.message || \"فشل في حذف الفاتورة\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Post mutation\n  const postMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return await apiRequest(\"POST\", `/api/sales-invoices/${id}/post`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/sales-invoices\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/products\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/customers\"] });\n      toast({\n        title: \"تم النشر\",\n        description: \"تم نشر الفاتورة وتحديث المخزون والحسابات\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"خطأ\",\n        description: error.message || \"فشل في نشر الفاتورة\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: InsertFullSalesInvoice) => {\n    if (invoiceItems.length === 0) {\n      toast({\n        title: \"خطأ\",\n        description: \"يجب إضافة صنف واحد على الأقل\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const formData = {\n      ...data,\n      items: invoiceItems,\n    };\n\n    if (editingInvoice) {\n      updateMutation.mutate({ id: editingInvoice.id, data: formData });\n    } else {\n      createMutation.mutate(formData);\n    }\n  };\n\n  const handleEdit = (invoice: FullSalesInvoice) => {\n    setEditingInvoice(invoice);\n    form.reset({\n      invoiceNumber: invoice.invoiceNumber,\n      invoiceDate: new Date(invoice.invoiceDate).toISOString().split('T')[0],\n      customerId: invoice.customerId,\n      taxRate: invoice.taxRate,\n      notes: invoice.notes || \"\",\n      items: [],\n    });\n    setInvoiceItems(invoice.items.map(item => ({\n      productId: item.productId,\n      quantity: parseFloat(item.quantity),\n      unitPrice: parseFloat(item.unitPrice),\n    })));\n    setIsDialogOpen(true);\n  };\n\n  const handleDelete = (id: string) => {\n    if (confirm(\"هل أنت متأكد من حذف هذه الفاتورة؟\")) {\n      deleteMutation.mutate(id);\n    }\n  };\n\n  const handlePost = (id: string) => {\n    if (confirm(\"هل أنت متأكد من نشر هذه الفاتورة؟ لن يمكنك التعديل عليها بعد النشر.\")) {\n      postMutation.mutate(id);\n    }\n  };\n\n  const addItem = () => {\n    setInvoiceItems([...invoiceItems, { productId: \"\", quantity: 1, unitPrice: 0 }]);\n  };\n\n  const removeItem = (index: number) => {\n    setInvoiceItems(invoiceItems.filter((_, i) => i !== index));\n  };\n\n  const updateItem = (index: number, field: keyof InvoiceItem, value: any) => {\n    const newItems = [...invoiceItems];\n    newItems[index] = { ...newItems[index], [field]: value };\n    setInvoiceItems(newItems);\n  };\n\n  const calculateTotals = () => {\n    const subtotal = invoiceItems.reduce((sum, item) => sum + (item.quantity * item.unitPrice), 0);\n    const tax = subtotal * 0.15;\n    const total = subtotal + tax;\n    return { subtotal, tax, total };\n  };\n\n  const { subtotal, tax, total } = calculateTotals();\n\n  if (isLoading) {\n    return <div className=\"flex justify-center p-8\">جاري التحميل...</div>;\n  }\n\n  if (error) {\n    return <div className=\"text-destructive p-4\">خطأ: {(error as Error).message}</div>;\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-3\">\n          <FileCheck className=\"w-8 h-8 text-primary\" />\n          <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n            فواتير المبيعات\n          </h1>\n        </div>\n        <Dialog open={isDialogOpen} onOpenChange={(open) => {\n          setIsDialogOpen(open);\n          if (!open) {\n            form.reset();\n            setInvoiceItems([]);\n            setEditingInvoice(null);\n          }\n        }}>\n          <DialogTrigger asChild>\n            <Button data-testid=\"button-add-invoice\">\n              <Plus className=\"ml-2 w-4 h-4\" />\n              فاتورة جديدة\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n            <DialogHeader>\n              <DialogTitle>\n                {editingInvoice ? \"تعديل فاتورة مبيعات\" : \"فاتورة مبيعات جديدة\"}\n              </DialogTitle>\n            </DialogHeader>\n            <Form {...form}>\n              <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"invoiceNumber\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>رقم الفاتورة</FormLabel>\n                        <FormControl>\n                          <Input {...field} data-testid=\"input-invoice-number\" placeholder=\"INV-001\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"invoiceDate\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>تاريخ الفاتورة</FormLabel>\n                        <FormControl>\n                          <Input \n                            type=\"date\" \n                            {...field} \n                            value={typeof field.value === 'string' ? field.value : field.value.toISOString().split('T')[0]}\n                            data-testid=\"input-invoice-date\" \n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"customerId\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>العميل</FormLabel>\n                        <Select onValueChange={field.onChange} value={field.value}>\n                          <FormControl>\n                            <SelectTrigger data-testid=\"select-customer\">\n                              <SelectValue placeholder=\"اختر العميل\" />\n                            </SelectTrigger>\n                          </FormControl>\n                          <SelectContent>\n                            {customers?.map((customer) => (\n                              <SelectItem key={customer.id} value={customer.id}>\n                                {customer.name}\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"taxRate\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>نسبة الضريبة</FormLabel>\n                        <FormControl>\n                          <Input {...field} data-testid=\"input-tax-rate\" placeholder=\"0.15\" readOnly />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <FormField\n                  control={form.control}\n                  name=\"notes\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>ملاحظات</FormLabel>\n                      <FormControl>\n                        <Textarea {...field} data-testid=\"input-notes\" placeholder=\"ملاحظات إضافية...\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <h3 className=\"text-lg font-semibold\">الأصناف</h3>\n                    <Button type=\"button\" onClick={addItem} variant=\"outline\" size=\"sm\" data-testid=\"button-add-item\">\n                      <Plus className=\"ml-2 w-4 h-4\" />\n                      إضافة صنف\n                    </Button>\n                  </div>\n\n                  {invoiceItems.map((item, index) => (\n                    <Card key={index}>\n                      <CardContent className=\"pt-4\">\n                        <div className=\"grid grid-cols-4 gap-4 items-end\">\n                          <div className=\"col-span-2\">\n                            <label className=\"text-sm font-medium\">الصنف</label>\n                            <Select\n                              value={item.productId}\n                              onValueChange={(value) => {\n                                const product = products?.find(p => p.id === value);\n                                if (product) {\n                                  updateItem(index, 'productId', value);\n                                  updateItem(index, 'unitPrice', parseFloat(product.salePrice));\n                                }\n                              }}\n                            >\n                              <SelectTrigger data-testid={`select-product-${index}`}>\n                                <SelectValue placeholder=\"اختر الصنف\" />\n                              </SelectTrigger>\n                              <SelectContent>\n                                {products?.map((product) => (\n                                  <SelectItem key={product.id} value={product.id}>\n                                    {product.itemName} ({product.unit})\n                                  </SelectItem>\n                                ))}\n                              </SelectContent>\n                            </Select>\n                          </div>\n\n                          <div>\n                            <label className=\"text-sm font-medium\">الكمية</label>\n                            <Input\n                              type=\"number\"\n                              value={item.quantity}\n                              onChange={(e) => updateItem(index, 'quantity', parseFloat(e.target.value) || 0)}\n                              data-testid={`input-quantity-${index}`}\n                              min=\"1\"\n                            />\n                          </div>\n\n                          <div>\n                            <label className=\"text-sm font-medium\">السعر</label>\n                            <Input\n                              type=\"number\"\n                              value={item.unitPrice}\n                              onChange={(e) => updateItem(index, 'unitPrice', parseFloat(e.target.value) || 0)}\n                              data-testid={`input-price-${index}`}\n                              min=\"0\"\n                            />\n                          </div>\n                        </div>\n                        <div className=\"flex items-center justify-between mt-2\">\n                          <div className=\"text-sm text-muted-foreground\">\n                            المجموع: {(item.quantity * item.unitPrice).toFixed(2)} ر.س\n                          </div>\n                          <Button\n                            type=\"button\"\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={() => removeItem(index)}\n                            data-testid={`button-remove-item-${index}`}\n                          >\n                            <X className=\"w-4 h-4\" />\n                          </Button>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n\n                  {invoiceItems.length === 0 && (\n                    <div className=\"text-center p-8 text-muted-foreground border-2 border-dashed rounded-lg\">\n                      لم يتم إضافة أصناف بعد\n                    </div>\n                  )}\n                </div>\n\n                <Card>\n                  <CardContent className=\"pt-4\">\n                    <div className=\"space-y-2\">\n                      <div className=\"flex justify-between\">\n                        <span>المجموع قبل الضريبة:</span>\n                        <span className=\"font-semibold\">{subtotal.toFixed(2)} ر.س</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span>ضريبة القيمة المضافة (15%):</span>\n                        <span className=\"font-semibold\">{tax.toFixed(2)} ر.س</span>\n                      </div>\n                      <div className=\"flex justify-between text-lg font-bold border-t pt-2\">\n                        <span>الإجمالي:</span>\n                        <span className=\"text-primary\">{total.toFixed(2)} ر.س</span>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n\n                <div className=\"flex justify-end gap-2\">\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    onClick={() => setIsDialogOpen(false)}\n                    data-testid=\"button-cancel\"\n                  >\n                    إلغاء\n                  </Button>\n                  <Button\n                    type=\"submit\"\n                    disabled={createMutation.isPending || updateMutation.isPending}\n                    data-testid=\"button-submit\"\n                  >\n                    {editingInvoice ? \"تحديث الفاتورة\" : \"حفظ كمسودة\"}\n                  </Button>\n                </div>\n              </form>\n            </Form>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>جميع الفواتير</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>رقم الفاتورة</TableHead>\n                <TableHead>التاريخ</TableHead>\n                <TableHead>العميل</TableHead>\n                <TableHead>الإجمالي</TableHead>\n                <TableHead>الحالة</TableHead>\n                <TableHead className=\"text-left\">الإجراءات</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {invoices && invoices.length > 0 ? (\n                invoices.map((invoice) => (\n                  <TableRow key={invoice.id} data-testid={`row-invoice-${invoice.id}`}>\n                    <TableCell className=\"font-medium\">{invoice.invoiceNumber}</TableCell>\n                    <TableCell>{new Date(invoice.invoiceDate).toLocaleDateString('ar-SA')}</TableCell>\n                    <TableCell>{invoice.customerName}</TableCell>\n                    <TableCell>{parseFloat(invoice.totalAfterTax).toFixed(2)} ر.س</TableCell>\n                    <TableCell>\n                      <Badge variant={invoice.status === \"منشورة\" ? \"default\" : \"secondary\"}>\n                        {invoice.status}\n                      </Badge>\n                    </TableCell>\n                    <TableCell className=\"text-left\">\n                      <div className=\"flex gap-2 justify-end\">\n                        {invoice.status === \"مسودة\" && (\n                          <>\n                            <Button\n                              variant=\"ghost\"\n                              size=\"sm\"\n                              onClick={() => handleEdit(invoice)}\n                              data-testid={`button-edit-${invoice.id}`}\n                            >\n                              <Edit className=\"w-4 h-4\" />\n                            </Button>\n                            <Button\n                              variant=\"ghost\"\n                              size=\"sm\"\n                              onClick={() => handleDelete(invoice.id)}\n                              data-testid={`button-delete-${invoice.id}`}\n                            >\n                              <Trash2 className=\"w-4 h-4 text-destructive\" />\n                            </Button>\n                            <Button\n                              variant=\"default\"\n                              size=\"sm\"\n                              onClick={() => handlePost(invoice.id)}\n                              data-testid={`button-post-${invoice.id}`}\n                              disabled={postMutation.isPending}\n                            >\n                              <Send className=\"w-4 h-4 ml-1\" />\n                              نشر\n                            </Button>\n                          </>\n                        )}\n                        {invoice.status === \"منشورة\" && (\n                          <Badge variant=\"outline\" className=\"text-green-600\">\n                            ✓ منشورة\n                          </Badge>\n                        )}\n                      </div>\n                    </TableCell>\n                  </TableRow>\n                ))\n              ) : (\n                <TableRow>\n                  <TableCell colSpan={6} className=\"text-center text-muted-foreground py-8\">\n                    لا توجد فواتير بعد\n                  </TableCell>\n                </TableRow>\n              )}\n            </TableBody>\n          </Table>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":22295},"client/src/pages/sales/reports/SalesCustomerStatement.tsx":{"content":"import { FileOutput } from \"lucide-react\";\n\nexport default function SalesCustomerStatement() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <FileOutput className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          كشف حساب عميل\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: كشف حساب تفصيلي للعميل\n      </p>\n    </div>\n  );\n}\n","size_bytes":515},"client/src/pages/bi/CustomReports.tsx":{"content":"import { FileBarChart } from \"lucide-react\";\n\nexport default function CustomReports() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <FileBarChart className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          التقارير المخصصة\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إنشاء تقارير مخصصة حسب الحاجة\n      </p>\n    </div>\n  );\n}\n","size_bytes":530},"client/src/pages/reports/BalanceSheet.tsx":{"content":"import { Landmark } from \"lucide-react\";\n\nexport default function BalanceSheet() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Landmark className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          الميزانية العمومية\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: عرض الميزانية العمومية التفصيلية\n      </p>\n    </div>\n  );\n}\n","size_bytes":532},"client/src/pages/fixed-assets/AssetDisposal.tsx":{"content":"import { PackageX } from \"lucide-react\";\n\nexport default function AssetDisposal() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <PackageX className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          استبعاد الأصول\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: استبعاد أو بيع الأصول\n      </p>\n    </div>\n  );\n}\n","size_bytes":503},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/pages/risk-management/RiskIdentification.tsx":{"content":"import { AlertTriangle } from \"lucide-react\";\n\nexport default function RiskIdentification() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <AlertTriangle className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          تحديد المخاطر\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تحديد وتسجيل المخاطر المحتملة\n      </p>\n    </div>\n  );\n}\n","size_bytes":532},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/pages/bi/Dashboards.tsx":{"content":"import { LayoutDashboard } from \"lucide-react\";\n\nexport default function BIDashboards() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <LayoutDashboard className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          لوحات التحكم التحليلية\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: لوحات تحكم تفاعلية للتحليلات\n      </p>\n    </div>\n  );\n}\n","size_bytes":545},"client/src/pages/settings/SettingsBranches.tsx":{"content":"import { Building2 } from \"lucide-react\";\n\nexport default function SettingsBranches() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Building2 className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          إدارة الفروع\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة فروع الشركة\n      </p>\n    </div>\n  );\n}\n","size_bytes":497},"client/src/pages/inventory/Warehouses.tsx":{"content":"import { Building2 } from \"lucide-react\";\n\nexport default function Warehouses() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Building2 className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          إدارة المخازن\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة المخازن ومواقع التخزين\n      </p>\n    </div>\n  );\n}\n","size_bytes":514},"client/src/pages/purchasing/reports/SupplierStatement.tsx":{"content":"import { FileOutput } from \"lucide-react\";\n\nexport default function SupplierStatement() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <FileOutput className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          كشف حساب مورد\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: كشف حساب تفصيلي للمورد\n      </p>\n    </div>\n  );\n}\n","size_bytes":510},"server/routes.ts":{"content":"import type { Express, Request, Response, NextFunction } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport {\n  insertAccountSchema,\n  insertFullEntrySchema,\n  insertProductSchema,\n  insertCustomerSchema,\n  insertSupplierSchema,\n  insertFullSalesInvoiceSchema,\n  insertFullReceiptVoucherSchema,\n  insertFullPaymentVoucherSchema,\n  type InsertAccount,\n  type InsertFullEntry,\n  type InsertProduct,\n  type InsertCustomer,\n  type InsertFullSalesInvoice,\n} from \"@shared/schema\";\nimport { z } from \"zod\";\nimport { AppError } from \"./errors\";\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Accounts Routes\n  app.get(\"/api/accounts\", async (_req, res) => {\n    try {\n      const accounts = await storage.getAccounts();\n      res.json(accounts);\n    } catch (error) {\n      console.error(\"Error fetching accounts:\", error);\n      res.status(500).json({ error: \"فشل في جلب الحسابات\" });\n    }\n  });\n\n  app.get(\"/api/accounts/:id\", async (req, res) => {\n    try {\n      const account = await storage.getAccount(req.params.id);\n      if (!account) {\n        return res.status(404).json({ error: \"الحساب غير موجود\" });\n      }\n      res.json(account);\n    } catch (error) {\n      console.error(\"Error fetching account:\", error);\n      res.status(500).json({ error: \"فشل في جلب الحساب\" });\n    }\n  });\n\n  app.post(\"/api/accounts\", async (req, res) => {\n    try {\n      const validatedData = insertAccountSchema.parse(req.body);\n\n      // Check if account code already exists\n      const existing = await storage.getAccountByCode(validatedData.code);\n      if (existing) {\n        return res.status(400).json({ error: \"رمز الحساب موجود بالفعل\" });\n      }\n\n      const account = await storage.createAccount(validatedData);\n      res.status(201).json(account);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ \n          error: \"بيانات غير صحيحة\",\n          details: error.errors \n        });\n      }\n      console.error(\"Error creating account:\", error);\n      res.status(500).json({ error: \"فشل في إنشاء الحساب\" });\n    }\n  });\n\n  app.put(\"/api/accounts/:id\", async (req, res) => {\n    try {\n      const validatedData = insertAccountSchema.partial().parse(req.body);\n      const account = await storage.updateAccount(req.params.id, validatedData);\n      \n      if (!account) {\n        return res.status(404).json({ error: \"الحساب غير موجود\" });\n      }\n      \n      res.json(account);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ \n          error: \"بيانات غير صحيحة\",\n          details: error.errors \n        });\n      }\n      console.error(\"Error updating account:\", error);\n      res.status(500).json({ error: \"فشل في تحديث الحساب\" });\n    }\n  });\n\n  app.delete(\"/api/accounts/:id\", async (req, res) => {\n    try {\n      const deleted = await storage.deleteAccount(req.params.id);\n      if (!deleted) {\n        return res.status(404).json({ error: \"الحساب غير موجود\" });\n      }\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error deleting account:\", error);\n      res.status(500).json({ error: \"فشل في حذف الحساب\" });\n    }\n  });\n\n  // Entries Routes\n  app.get(\"/api/entries\", async (_req, res) => {\n    try {\n      const entries = await storage.getEntries();\n      res.json(entries);\n    } catch (error) {\n      console.error(\"Error fetching entries:\", error);\n      res.status(500).json({ error: \"فشل في جلب القيود\" });\n    }\n  });\n\n  app.get(\"/api/entries/:id\", async (req, res) => {\n    try {\n      const entry = await storage.getEntry(req.params.id);\n      if (!entry) {\n        return res.status(404).json({ error: \"القيد غير موجود\" });\n      }\n      res.json(entry);\n    } catch (error) {\n      console.error(\"Error fetching entry:\", error);\n      res.status(500).json({ error: \"فشل في جلب القيد\" });\n    }\n  });\n\n  app.post(\"/api/entries\", async (req, res) => {\n    try {\n      const validatedData = insertFullEntrySchema.parse(req.body);\n\n      // Validate that entry is balanced\n      const totalDebit = validatedData.lines.reduce(\n        (sum, line) => sum + Number(line.debit || 0),\n        0\n      );\n      const totalCredit = validatedData.lines.reduce(\n        (sum, line) => sum + Number(line.credit || 0),\n        0\n      );\n\n      if (totalDebit !== totalCredit) {\n        return res.status(400).json({ \n          error: \"القيد غير متوازن - المدين لا يساوي الدائن\" \n        });\n      }\n\n      if (totalDebit === 0) {\n        return res.status(400).json({ \n          error: \"القيد يجب أن يحتوي على مبالغ\" \n        });\n      }\n\n      // Create entry\n      const entry = await storage.createEntry(\n        {\n          entryNumber: validatedData.entryNumber,\n          date: validatedData.date,\n          description: validatedData.description,\n        },\n        validatedData.lines\n      );\n\n      res.status(201).json(entry);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ \n          error: \"بيانات غير صحيحة\",\n          details: error.errors \n        });\n      }\n      console.error(\"Error creating entry:\", error);\n      res.status(500).json({ error: \"فشل في إنشاء القيد\" });\n    }\n  });\n\n  app.delete(\"/api/entries/:id\", async (req, res) => {\n    try {\n      const deleted = await storage.deleteEntry(req.params.id);\n      if (!deleted) {\n        return res.status(404).json({ error: \"القيد غير موجود\" });\n      }\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error deleting entry:\", error);\n      res.status(500).json({ error: \"فشل في حذف القيد\" });\n    }\n  });\n\n  // Reports Routes\n  app.get(\"/api/trial-balance\", async (_req, res) => {\n    try {\n      const trialBalance = await storage.getTrialBalance();\n      res.json(trialBalance);\n    } catch (error) {\n      console.error(\"Error fetching trial balance:\", error);\n      res.status(500).json({ error: \"فشل في جلب ميزان المراجعة\" });\n    }\n  });\n\n  app.get(\"/api/reports/income-statement\", async (req, res) => {\n    try {\n      const from = req.query.from \n        ? new Date(req.query.from as string) \n        : new Date(new Date().getFullYear(), 0, 1);\n      const to = req.query.to \n        ? new Date(req.query.to as string) \n        : new Date();\n\n      const incomeStatement = await storage.getIncomeStatement(from, to);\n      res.json(incomeStatement);\n    } catch (error) {\n      console.error(\"Error fetching income statement:\", error);\n      res.status(500).json({ error: \"فشل في جلب قائمة الدخل\" });\n    }\n  });\n\n  app.get(\"/api/reports/balance-sheet\", async (req, res) => {\n    try {\n      const date = req.query.date \n        ? new Date(req.query.date as string) \n        : new Date();\n\n      const balanceSheet = await storage.getBalanceSheet(date);\n      res.json(balanceSheet);\n    } catch (error) {\n      console.error(\"Error fetching balance sheet:\", error);\n      res.status(500).json({ error: \"فشل في جلب الميزانية العمومية\" });\n    }\n  });\n\n  // Dashboard Routes\n  app.get(\"/api/dashboard/stats\", async (_req, res) => {\n    try {\n      const stats = await storage.getDashboardStats();\n      res.json(stats);\n    } catch (error) {\n      console.error(\"Error fetching dashboard stats:\", error);\n      res.status(500).json({ error: \"فشل في جلب الإحصائيات\" });\n    }\n  });\n\n  // Products Routes\n  app.get(\"/api/products\", async (_req, res) => {\n    try {\n      const products = await storage.getProducts();\n      res.json(products);\n    } catch (error) {\n      console.error(\"Error fetching products:\", error);\n      res.status(500).json({ error: \"فشل في جلب الأصناف\" });\n    }\n  });\n\n  app.get(\"/api/products/:id\", async (req, res) => {\n    try {\n      const product = await storage.getProduct(req.params.id);\n      if (!product) {\n        return res.status(404).json({ error: \"الصنف غير موجود\" });\n      }\n      res.json(product);\n    } catch (error) {\n      console.error(\"Error fetching product:\", error);\n      res.status(500).json({ error: \"فشل في جلب الصنف\" });\n    }\n  });\n\n  app.post(\"/api/products\", async (req, res) => {\n    try {\n      const validatedData = insertProductSchema.parse(req.body);\n\n      // Check if product code already exists\n      const existing = await storage.getProductByCode(validatedData.itemCode);\n      if (existing) {\n        return res.status(400).json({ error: \"كود الصنف موجود بالفعل\" });\n      }\n\n      const product = await storage.createProduct(validatedData);\n      res.status(201).json(product);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ \n          error: \"بيانات غير صحيحة\",\n          details: error.errors \n        });\n      }\n      console.error(\"Error creating product:\", error);\n      res.status(500).json({ error: \"فشل في إنشاء الصنف\" });\n    }\n  });\n\n  app.put(\"/api/products/:id\", async (req, res) => {\n    try {\n      const validatedData = insertProductSchema.partial().parse(req.body);\n      const product = await storage.updateProduct(req.params.id, validatedData);\n      \n      if (!product) {\n        return res.status(404).json({ error: \"الصنف غير موجود\" });\n      }\n      \n      res.json(product);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ \n          error: \"بيانات غير صحيحة\",\n          details: error.errors \n        });\n      }\n      console.error(\"Error updating product:\", error);\n      res.status(500).json({ error: \"فشل في تحديث الصنف\" });\n    }\n  });\n\n  app.delete(\"/api/products/:id\", async (req, res) => {\n    try {\n      const deleted = await storage.deleteProduct(req.params.id);\n      if (!deleted) {\n        return res.status(404).json({ error: \"الصنف غير موجود\" });\n      }\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error deleting product:\", error);\n      res.status(500).json({ error: \"فشل في حذف الصنف\" });\n    }\n  });\n\n  // Customers Routes\n  app.get(\"/api/customers\", async (_req, res) => {\n    try {\n      const customers = await storage.getCustomers();\n      res.json(customers);\n    } catch (error) {\n      console.error(\"Error fetching customers:\", error);\n      res.status(500).json({ error: \"فشل في جلب العملاء\" });\n    }\n  });\n\n  app.get(\"/api/customers/:id\", async (req, res) => {\n    try {\n      const customer = await storage.getCustomer(req.params.id);\n      if (!customer) {\n        return res.status(404).json({ error: \"العميل غير موجود\" });\n      }\n      res.json(customer);\n    } catch (error) {\n      console.error(\"Error fetching customer:\", error);\n      res.status(500).json({ error: \"فشل في جلب العميل\" });\n    }\n  });\n\n  app.post(\"/api/customers\", async (req, res) => {\n    try {\n      const validatedData = insertCustomerSchema.parse(req.body);\n\n      // Check if customer code already exists\n      const existing = await storage.getCustomerByCode(validatedData.code);\n      if (existing) {\n        return res.status(400).json({ error: \"كود العميل موجود بالفعل\" });\n      }\n\n      const customer = await storage.createCustomer(validatedData);\n      res.status(201).json(customer);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ \n          error: \"بيانات غير صحيحة\",\n          details: error.errors \n        });\n      }\n      console.error(\"Error creating customer:\", error);\n      res.status(500).json({ error: \"فشل في إنشاء العميل\" });\n    }\n  });\n\n  app.put(\"/api/customers/:id\", async (req, res) => {\n    try {\n      const validatedData = insertCustomerSchema.partial().parse(req.body);\n      const customer = await storage.updateCustomer(req.params.id, validatedData);\n      \n      if (!customer) {\n        return res.status(404).json({ error: \"العميل غير موجود\" });\n      }\n      \n      res.json(customer);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ \n          error: \"بيانات غير صحيحة\",\n          details: error.errors \n        });\n      }\n      console.error(\"Error updating customer:\", error);\n      res.status(500).json({ error: \"فشل في تحديث العميل\" });\n    }\n  });\n\n  app.delete(\"/api/customers/:id\", async (req, res) => {\n    try {\n      const deleted = await storage.deleteCustomer(req.params.id);\n      if (!deleted) {\n        return res.status(404).json({ error: \"العميل غير موجود\" });\n      }\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error deleting customer:\", error);\n      res.status(500).json({ error: \"فشل في حذف العميل\" });\n    }\n  });\n\n  // Suppliers Routes\n  app.get(\"/api/suppliers\", async (_req, res) => {\n    try {\n      const suppliers = await storage.getSuppliers();\n      res.json(suppliers);\n    } catch (error) {\n      console.error(\"Error fetching suppliers:\", error);\n      res.status(500).json({ error: \"فشل في جلب الموردين\" });\n    }\n  });\n\n  app.get(\"/api/suppliers/:id\", async (req, res) => {\n    try {\n      const supplier = await storage.getSupplier(req.params.id);\n      if (!supplier) {\n        return res.status(404).json({ error: \"المورد غير موجود\" });\n      }\n      res.json(supplier);\n    } catch (error) {\n      console.error(\"Error fetching supplier:\", error);\n      res.status(500).json({ error: \"فشل في جلب المورد\" });\n    }\n  });\n\n  app.post(\"/api/suppliers\", async (req, res) => {\n    try {\n      const validatedData = insertSupplierSchema.parse(req.body);\n\n      // Check if supplier code already exists\n      const existing = await storage.getSupplierByCode(validatedData.code);\n      if (existing) {\n        return res.status(400).json({ error: \"كود المورد موجود بالفعل\" });\n      }\n\n      const supplier = await storage.createSupplier(validatedData);\n      res.status(201).json(supplier);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ \n          error: \"بيانات غير صحيحة\",\n          details: error.errors \n        });\n      }\n      console.error(\"Error creating supplier:\", error);\n      res.status(500).json({ error: \"فشل في إنشاء المورد\" });\n    }\n  });\n\n  app.put(\"/api/suppliers/:id\", async (req, res) => {\n    try {\n      const validatedData = insertSupplierSchema.partial().parse(req.body);\n      const supplier = await storage.updateSupplier(req.params.id, validatedData);\n      \n      if (!supplier) {\n        return res.status(404).json({ error: \"المورد غير موجود\" });\n      }\n      \n      res.json(supplier);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ \n          error: \"بيانات غير صحيحة\",\n          details: error.errors \n        });\n      }\n      console.error(\"Error updating supplier:\", error);\n      res.status(500).json({ error: \"فشل في تحديث المورد\" });\n    }\n  });\n\n  app.delete(\"/api/suppliers/:id\", async (req, res) => {\n    try {\n      const deleted = await storage.deleteSupplier(req.params.id);\n      if (!deleted) {\n        return res.status(404).json({ error: \"المورد غير موجود\" });\n      }\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error deleting supplier:\", error);\n      res.status(500).json({ error: \"فشل في حذف المورد\" });\n    }\n  });\n\n  // Sales Invoices Routes\n  app.get(\"/api/sales-invoices\", async (req, res) => {\n    try {\n      const filters: any = {};\n      \n      if (req.query.status) {\n        filters.status = req.query.status as string;\n      }\n      if (req.query.customerId) {\n        filters.customerId = req.query.customerId as string;\n      }\n      if (req.query.from) {\n        filters.from = new Date(req.query.from as string);\n      }\n      if (req.query.to) {\n        filters.to = new Date(req.query.to as string);\n      }\n\n      const invoices = await storage.getSalesInvoices(filters);\n      res.json(invoices);\n    } catch (error) {\n      console.error(\"Error fetching sales invoices:\", error);\n      res.status(500).json({ error: \"فشل في جلب الفواتير\" });\n    }\n  });\n\n  app.get(\"/api/sales-invoices/:id\", async (req, res) => {\n    try {\n      const invoice = await storage.getSalesInvoice(req.params.id);\n      if (!invoice) {\n        return res.status(404).json({ error: \"الفاتورة غير موجودة\" });\n      }\n      res.json(invoice);\n    } catch (error) {\n      console.error(\"Error fetching sales invoice:\", error);\n      res.status(500).json({ error: \"فشل في جلب الفاتورة\" });\n    }\n  });\n\n  app.post(\"/api/sales-invoices\", async (req, res) => {\n    try {\n      const validatedData = insertFullSalesInvoiceSchema.parse(req.body);\n\n      // Check if invoice number already exists\n      const allInvoices = await storage.getSalesInvoices();\n      const existing = allInvoices.find(inv => inv.invoiceNumber === validatedData.invoiceNumber);\n      if (existing) {\n        return res.status(400).json({ error: \"رقم الفاتورة موجود بالفعل\" });\n      }\n\n      const invoice = await storage.createSalesInvoiceDraft(validatedData);\n      res.status(201).json(invoice);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ \n          error: \"بيانات غير صحيحة\",\n          details: error.errors \n        });\n      }\n      console.error(\"Error creating sales invoice:\", error);\n      res.status(500).json({ \n        error: error instanceof Error ? error.message : \"فشل في إنشاء الفاتورة\" \n      });\n    }\n  });\n\n  app.put(\"/api/sales-invoices/:id\", async (req, res) => {\n    try {\n      const validatedData = insertFullSalesInvoiceSchema.parse(req.body);\n      const invoice = await storage.updateSalesInvoiceDraft(req.params.id, validatedData);\n      res.json(invoice);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ \n          error: \"بيانات غير صحيحة\",\n          details: error.errors \n        });\n      }\n      console.error(\"Error updating sales invoice:\", error);\n      res.status(500).json({ \n        error: error instanceof Error ? error.message : \"فشل في تحديث الفاتورة\" \n      });\n    }\n  });\n\n  app.delete(\"/api/sales-invoices/:id\", async (req, res) => {\n    try {\n      const deleted = await storage.deleteSalesInvoiceDraft(req.params.id);\n      if (!deleted) {\n        return res.status(404).json({ error: \"الفاتورة غير موجودة\" });\n      }\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error deleting sales invoice:\", error);\n      res.status(500).json({ \n        error: error instanceof Error ? error.message : \"فشل في حذف الفاتورة\" \n      });\n    }\n  });\n\n  app.post(\"/api/sales-invoices/:id/post\", async (req, res) => {\n    try {\n      const invoice = await storage.postSalesInvoice(req.params.id);\n      res.json(invoice);\n    } catch (error) {\n      console.error(\"Error posting sales invoice:\", error);\n      res.status(500).json({ \n        error: error instanceof Error ? error.message : \"فشل في نشر الفاتورة\" \n      });\n    }\n  });\n\n  // Receipt Voucher routes\n  app.get(\"/api/receipt-vouchers\", async (_req, res) => {\n    try {\n      const vouchers = await storage.getReceiptVouchers();\n      res.json(vouchers);\n    } catch (error) {\n      console.error(\"Error fetching receipt vouchers:\", error);\n      res.status(500).json({ error: \"فشل في جلب سندات القبض\" });\n    }\n  });\n\n  app.get(\"/api/receipt-vouchers/:id\", async (req, res) => {\n    try {\n      const voucher = await storage.getReceiptVoucher(req.params.id);\n      if (!voucher) {\n        return res.status(404).json({ error: \"السند غير موجود\" });\n      }\n      res.json(voucher);\n    } catch (error) {\n      console.error(\"Error fetching receipt voucher:\", error);\n      res.status(500).json({ error: \"فشل في جلب السند\" });\n    }\n  });\n\n  app.post(\"/api/receipt-vouchers\", async (req, res) => {\n    try {\n      const validatedData = insertFullReceiptVoucherSchema.parse(req.body);\n\n      // Check if voucher number already exists\n      const allVouchers = await storage.getReceiptVouchers();\n      const existing = allVouchers.find(v => v.voucherNumber === validatedData.voucherNumber);\n      if (existing) {\n        return res.status(400).json({ error: \"رقم السند موجود بالفعل\" });\n      }\n\n      const voucher = await storage.createReceiptVoucherDraft(validatedData);\n      res.status(201).json(voucher);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ \n          error: \"بيانات غير صحيحة\",\n          details: error.errors \n        });\n      }\n      if (error instanceof AppError) {\n        return res.status(error.status).json({ error: error.message });\n      }\n      console.error(\"Error creating receipt voucher:\", error);\n      res.status(500).json({ \n        error: error instanceof Error ? error.message : \"فشل في إنشاء السند\" \n      });\n    }\n  });\n\n  app.put(\"/api/receipt-vouchers/:id\", async (req, res) => {\n    try {\n      const validatedData = insertFullReceiptVoucherSchema.parse(req.body);\n      const voucher = await storage.updateReceiptVoucherDraft(req.params.id, validatedData);\n      res.json(voucher);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ \n          error: \"بيانات غير صحيحة\",\n          details: error.errors \n        });\n      }\n      if (error instanceof AppError) {\n        return res.status(error.status).json({ error: error.message });\n      }\n      console.error(\"Error updating receipt voucher:\", error);\n      res.status(500).json({ \n        error: error instanceof Error ? error.message : \"فشل في تحديث السند\" \n      });\n    }\n  });\n\n  app.delete(\"/api/receipt-vouchers/:id\", async (req, res) => {\n    try {\n      const deleted = await storage.deleteReceiptVoucherDraft(req.params.id);\n      if (!deleted) {\n        return res.status(404).json({ error: \"السند غير موجود\" });\n      }\n      res.json({ success: true });\n    } catch (error) {\n      if (error instanceof AppError) {\n        return res.status(error.status).json({ error: error.message });\n      }\n      console.error(\"Error deleting receipt voucher:\", error);\n      res.status(500).json({ \n        error: error instanceof Error ? error.message : \"فشل في حذف السند\" \n      });\n    }\n  });\n\n  app.post(\"/api/receipt-vouchers/:id/post\", async (req, res) => {\n    try {\n      const voucher = await storage.postReceiptVoucher(req.params.id);\n      res.json(voucher);\n    } catch (error) {\n      if (error instanceof AppError) {\n        return res.status(error.status).json({ error: error.message });\n      }\n      console.error(\"Error posting receipt voucher:\", error);\n      res.status(500).json({ \n        error: error instanceof Error ? error.message : \"فشل في نشر السند\" \n      });\n    }\n  });\n\n  // Payment Voucher routes\n  app.get(\"/api/payment-vouchers\", async (_req, res) => {\n    try {\n      const vouchers = await storage.getPaymentVouchers();\n      res.json(vouchers);\n    } catch (error) {\n      console.error(\"Error fetching payment vouchers:\", error);\n      res.status(500).json({ error: \"فشل في جلب سندات الدفع\" });\n    }\n  });\n\n  app.get(\"/api/payment-vouchers/:id\", async (req, res) => {\n    try {\n      const voucher = await storage.getPaymentVoucher(req.params.id);\n      if (!voucher) {\n        return res.status(404).json({ error: \"السند غير موجود\" });\n      }\n      res.json(voucher);\n    } catch (error) {\n      console.error(\"Error fetching payment voucher:\", error);\n      res.status(500).json({ error: \"فشل في جلب السند\" });\n    }\n  });\n\n  app.post(\"/api/payment-vouchers\", async (req, res) => {\n    try {\n      const validatedData = insertFullPaymentVoucherSchema.parse(req.body);\n\n      // Check if voucher number already exists\n      const allVouchers = await storage.getPaymentVouchers();\n      const existing = allVouchers.find(v => v.voucherNumber === validatedData.voucherNumber);\n      if (existing) {\n        return res.status(400).json({ error: \"رقم السند موجود بالفعل\" });\n      }\n\n      const voucher = await storage.createPaymentVoucherDraft(validatedData);\n      res.status(201).json(voucher);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ \n          error: \"بيانات غير صحيحة\",\n          details: error.errors \n        });\n      }\n      if (error instanceof AppError) {\n        return res.status(error.status).json({ error: error.message });\n      }\n      console.error(\"Error creating payment voucher:\", error);\n      res.status(500).json({ \n        error: error instanceof Error ? error.message : \"فشل في إنشاء السند\" \n      });\n    }\n  });\n\n  app.put(\"/api/payment-vouchers/:id\", async (req, res) => {\n    try {\n      const validatedData = insertFullPaymentVoucherSchema.parse(req.body);\n      const voucher = await storage.updatePaymentVoucherDraft(req.params.id, validatedData);\n      res.json(voucher);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ \n          error: \"بيانات غير صحيحة\",\n          details: error.errors \n        });\n      }\n      if (error instanceof AppError) {\n        return res.status(error.status).json({ error: error.message });\n      }\n      console.error(\"Error updating payment voucher:\", error);\n      res.status(500).json({ \n        error: error instanceof Error ? error.message : \"فشل في تحديث السند\" \n      });\n    }\n  });\n\n  app.delete(\"/api/payment-vouchers/:id\", async (req, res) => {\n    try {\n      const deleted = await storage.deletePaymentVoucherDraft(req.params.id);\n      if (!deleted) {\n        return res.status(404).json({ error: \"السند غير موجود\" });\n      }\n      res.json({ success: true });\n    } catch (error) {\n      if (error instanceof AppError) {\n        return res.status(error.status).json({ error: error.message });\n      }\n      console.error(\"Error deleting payment voucher:\", error);\n      res.status(500).json({ \n        error: error instanceof Error ? error.message : \"فشل في حذف السند\" \n      });\n    }\n  });\n\n  app.post(\"/api/payment-vouchers/:id/post\", async (req, res) => {\n    try {\n      const voucher = await storage.postPaymentVoucher(req.params.id);\n      res.json(voucher);\n    } catch (error) {\n      if (error instanceof AppError) {\n        return res.status(error.status).json({ error: error.message });\n      }\n      console.error(\"Error posting payment voucher:\", error);\n      res.status(500).json({ \n        error: error instanceof Error ? error.message : \"فشل في نشر السند\" \n      });\n    }\n  });\n\n  // Centralized error handling middleware\n  // MUST be added after all routes\n  app.use((err: Error, req: Request, res: Response, next: NextFunction) => {\n    // Handle AppError instances (ValidationError, NotFoundError, etc.)\n    if (err instanceof AppError) {\n      return res.status(err.status).json({ \n        error: err.message,\n        code: err.code \n      });\n    }\n\n    // Handle Zod validation errors\n    if (err instanceof z.ZodError) {\n      return res.status(400).json({ \n        error: \"بيانات غير صحيحة\",\n        details: err.errors \n      });\n    }\n\n    // Unknown errors - log and return 500\n    console.error(\"Unhandled error:\", err);\n    res.status(500).json({ \n      error: err instanceof Error ? err.message : \"حدث خطأ في الخادم\" \n    });\n  });\n\n  const httpServer = createServer(app);\n\n  return httpServer;\n}\n","size_bytes":28551},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"Cairo\", \"var(--font-sans)\", \"sans-serif\"],\n        serif: [\"Tajawal\", \"var(--font-serif)\", \"serif\"],\n        mono: [\"var(--font-mono)\", \"monospace\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":4106},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/pages/master/FiscalPeriods.tsx":{"content":"import { Calendar } from \"lucide-react\";\n\nexport default function FiscalPeriods() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Calendar className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          إدارة الفترات المالية\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة الفترات المالية للشركة\n      </p>\n    </div>\n  );\n}\n","size_bytes":530},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1904},"client/src/pages/shipping/Tracking.tsx":{"content":"import { FileBarChart } from \"lucide-react\";\n\nexport default function Tracking() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <FileBarChart className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          تتبع الشحنات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تتبع حالة الشحنات\n      </p>\n    </div>\n  );\n}\n","size_bytes":495},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/pages/hr/Allowances.tsx":{"content":"import { DollarSign } from \"lucide-react\";\n\nexport default function Allowances() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <DollarSign className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          البدلات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة بدلات الموظفين\n      </p>\n    </div>\n  );\n}\n","size_bytes":490},"client/src/pages/cash-bank/BankAccounts.tsx":{"content":"import { Landmark } from \"lucide-react\";\n\nexport default function BankAccounts() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Landmark className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          الحسابات البنكية\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة الحسابات البنكية\n      </p>\n    </div>\n  );\n}\n","size_bytes":509},"client/src/pages/settings/CompanySettings.tsx":{"content":"import { Building2, Upload } from \"lucide-react\";\nimport { Card } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\n\nexport default function CompanySettings() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Building2 className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          إعدادات بيانات الشركة\n        </h1>\n      </div>\n\n      <Card className=\"p-6\">\n        <div className=\"space-y-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"company-name\">اسم الشركة *</Label>\n              <Input\n                id=\"company-name\"\n                placeholder=\"أدخل اسم الشركة\"\n                data-testid=\"input-company-name\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"commercial-reg\">السجل التجاري *</Label>\n              <Input\n                id=\"commercial-reg\"\n                placeholder=\"رقم السجل التجاري\"\n                data-testid=\"input-commercial-reg\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"tax-number\">الرقم الضريبي *</Label>\n              <Input\n                id=\"tax-number\"\n                placeholder=\"الرقم الضريبي\"\n                data-testid=\"input-tax-number\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"phone\">رقم الهاتف</Label>\n              <Input\n                id=\"phone\"\n                placeholder=\"رقم الهاتف\"\n                data-testid=\"input-phone\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email\">البريد الإلكتروني</Label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                placeholder=\"البريد الإلكتروني\"\n                data-testid=\"input-email\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"website\">الموقع الإلكتروني</Label>\n              <Input\n                id=\"website\"\n                placeholder=\"www.example.com\"\n                data-testid=\"input-website\"\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"address\">العنوان</Label>\n            <Textarea\n              id=\"address\"\n              placeholder=\"العنوان الكامل للشركة\"\n              className=\"min-h-[100px]\"\n              data-testid=\"textarea-address\"\n            />\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label>شعار الشركة</Label>\n            <div className=\"flex items-center gap-4\">\n              <div className=\"w-32 h-32 border-2 border-dashed border-muted-foreground/25 rounded-lg flex items-center justify-center bg-muted/10\">\n                <Upload className=\"w-8 h-8 text-muted-foreground/50\" />\n              </div>\n              <div className=\"space-y-2\">\n                <Button variant=\"outline\" data-testid=\"button-upload-logo\">\n                  <Upload className=\"w-4 h-4 me-2\" />\n                  رفع الشعار\n                </Button>\n                <p className=\"text-sm text-muted-foreground\">\n                  يفضل صورة بصيغة PNG أو JPG بحجم 500x500 بكسل\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"pt-4 flex gap-3\">\n            <Button data-testid=\"button-save-settings\">\n              حفظ الإعدادات\n            </Button>\n            <Button variant=\"outline\" data-testid=\"button-cancel\">\n              إلغاء\n            </Button>\n          </div>\n        </div>\n      </Card>\n\n      <p className=\"text-sm text-muted-foreground\">\n        * الحقول المطلوبة | ستظهر هذه البيانات في الفواتير والتقارير والمستندات الرسمية\n      </p>\n    </div>\n  );\n}\n","size_bytes":4394},"client/src/pages/reports/CostCentersReports.tsx":{"content":"import { Target } from \"lucide-react\";\n\nexport default function CostCentersReports() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Target className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          تقارير مراكز التكلفة\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: عرض تقارير مراكز التكلفة التفصيلية\n      </p>\n    </div>\n  );\n}\n","size_bytes":540},"client/src/pages/fixed-assets/AssetTransfer.tsx":{"content":"import { ArrowLeftRight } from \"lucide-react\";\n\nexport default function AssetTransfer() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <ArrowLeftRight className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          نقل الأصول\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: نقل الأصول بين الأقسام\n      </p>\n    </div>\n  );\n}\n","size_bytes":509},"client/src/pages/inventory/StockMovements.tsx":{"content":"import { ArrowLeftRight } from \"lucide-react\";\n\nexport default function Movements() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <ArrowLeftRight className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          حركات المخزون\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تتبع حركات المخزون والتحويلات\n      </p>\n    </div>\n  );\n}\n","size_bytes":525},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/pages/contracts/Renewals.tsx":{"content":"import { RotateCcw } from \"lucide-react\";\n\nexport default function Renewals() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <RotateCcw className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          تجديدات العقود\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة تجديدات العقود\n      </p>\n    </div>\n  );\n}\n","size_bytes":499},"client/src/pages/production/ProductionLines.tsx":{"content":"import { Factory } from \"lucide-react\";\n\nexport default function ProductionLines() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Factory className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          خطوط الإنتاج\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة خطوط الإنتاج والمراحل\n      </p>\n    </div>\n  );\n}\n","size_bytes":511},"client/src/pages/ecommerce/OnlineOrders.tsx":{"content":"import { ShoppingBag } from \"lucide-react\";\n\nexport default function OnlineOrders() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <ShoppingBag className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          الطلبات الإلكترونية\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة طلبات المتجر الإلكتروني\n      </p>\n    </div>\n  );\n}\n","size_bytes":534},"client/src/pages/risk-management/Monitoring.tsx":{"content":"import { Eye } from \"lucide-react\";\n\nexport default function RiskMonitoring() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Eye className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          المتابعة والرصد\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: متابعة ورصد المخاطر وخطط المعالجة\n      </p>\n    </div>\n  );\n}\n","size_bytes":519},"client/src/pages/sales/Invoices.tsx":{"content":"export { default } from './SalesInvoices';\n","size_bytes":43},"client/src/pages/sales/reports/CustomerBalances.tsx":{"content":"export { default } from './SalesCustomerBalances';\n","size_bytes":51},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/pages/cash-bank/ReceiptVouchers.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Button } from \"@/components/ui/button\";\nimport { Plus, Trash2, Eye, CheckCircle } from \"lucide-react\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\n\ninterface FullReceiptVoucher {\n  id: string;\n  voucherNumber: string;\n  voucherDate: string;\n  customerId: string;\n  amount: string;\n  paymentMethod: \"نقداً\" | \"تحويل بنكي\" | \"شيك\";\n  targetAccountId: string;\n  checkNumber?: string | null;\n  checkDate?: string | null;\n  checkBank?: string | null;\n  status: \"مسودة\" | \"منشور\";\n  entryId?: string | null;\n  postedAt?: string | null;\n  notes?: string | null;\n  customerName?: string;\n  targetAccountName?: string;\n}\n\ninterface Customer {\n  id: string;\n  code: string;\n  name: string;\n}\n\ninterface Account {\n  id: string;\n  code: string;\n  name: string;\n  category: string;\n}\n\nconst voucherFormSchema = z.object({\n  voucherNumber: z.string().min(1, \"رقم السند مطلوب\"),\n  voucherDate: z.string().min(1, \"تاريخ السند مطلوب\"),\n  customerId: z.string().min(1, \"العميل مطلوب\"),\n  amount: z.string().min(1, \"المبلغ مطلوب\").refine((val) => parseFloat(val) > 0, \"المبلغ يجب أن يكون أكبر من صفر\"),\n  paymentMethod: z.enum([\"نقداً\", \"تحويل بنكي\", \"شيك\"]),\n  targetAccountId: z.string().min(1, \"حساب الاستلام مطلوب\"),\n  checkNumber: z.string().optional(),\n  checkDate: z.string().optional(),\n  checkBank: z.string().optional(),\n  notes: z.string().optional(),\n});\n\ntype VoucherFormValues = z.infer<typeof voucherFormSchema>;\n\nexport default function ReceiptVouchers() {\n  const { toast } = useToast();\n  const [formDialog, setFormDialog] = useState<{ open: boolean; editId?: string }>({ open: false });\n  const [deleteDialog, setDeleteDialog] = useState<{ open: boolean; id: string | null }>({\n    open: false,\n    id: null,\n  });\n\n  const form = useForm<VoucherFormValues>({\n    resolver: zodResolver(voucherFormSchema),\n    defaultValues: {\n      voucherNumber: \"\",\n      voucherDate: new Date().toISOString().split(\"T\")[0],\n      customerId: \"\",\n      amount: \"\",\n      paymentMethod: \"نقداً\",\n      targetAccountId: \"\",\n      checkNumber: \"\",\n      checkDate: \"\",\n      checkBank: \"\",\n      notes: \"\",\n    },\n  });\n\n  const { data: vouchers, isLoading, error, refetch } = useQuery<FullReceiptVoucher[]>({\n    queryKey: [\"/api/receipt-vouchers\"],\n  });\n\n  const { data: customers } = useQuery<Customer[]>({\n    queryKey: [\"/api/customers\"],\n  });\n\n  const { data: accounts } = useQuery<Account[]>({\n    queryKey: [\"/api/accounts\"],\n  });\n\n  // Filter accounts for payment methods\n  const cashAccounts = accounts?.filter((acc) => acc.category === \"نقدية\") || [];\n  const bankAccounts = accounts?.filter((acc) => acc.category === \"البنك\") || [];\n\n  const createMutation = useMutation({\n    mutationFn: async (data: VoucherFormValues) => {\n      const payload = {\n        ...data,\n        allocations: [],\n      };\n      return apiRequest(\"POST\", \"/api/receipt-vouchers\", payload);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/receipt-vouchers\"] });\n      toast({\n        title: \"تم الحفظ\",\n        description: \"تم إنشاء السند بنجاح\",\n      });\n      setFormDialog({ open: false });\n      form.reset();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"فشل الحفظ\",\n        description: error.message || \"حدث خطأ أثناء إنشاء السند\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return apiRequest(\"DELETE\", `/api/receipt-vouchers/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/receipt-vouchers\"] });\n      toast({\n        title: \"تم الحذف\",\n        description: \"تم حذف السند بنجاح\",\n      });\n      setDeleteDialog({ open: false, id: null });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"فشل الحذف\",\n        description: error.message || \"حدث خطأ أثناء حذف السند\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const postMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return apiRequest(\"POST\", `/api/receipt-vouchers/${id}/post`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/receipt-vouchers\"] });\n      toast({\n        title: \"تم النشر\",\n        description: \"تم نشر السند بنجاح\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"فشل النشر\",\n        description: error.message || \"حدث خطأ أثناء نشر السند\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleDelete = (id: string) => {\n    setDeleteDialog({ open: true, id });\n  };\n\n  const confirmDelete = () => {\n    if (deleteDialog.id) {\n      deleteMutation.mutate(deleteDialog.id);\n    }\n  };\n\n  const handlePost = (id: string) => {\n    postMutation.mutate(id);\n  };\n\n  const openCreateDialog = () => {\n    form.reset({\n      voucherNumber: `RCV-${Date.now()}`,\n      voucherDate: new Date().toISOString().split(\"T\")[0],\n      customerId: \"\",\n      amount: \"\",\n      paymentMethod: \"نقداً\",\n      targetAccountId: \"\",\n      checkNumber: \"\",\n      checkDate: \"\",\n      checkBank: \"\",\n      notes: \"\",\n    });\n    setFormDialog({ open: true });\n  };\n\n  const onSubmit = (data: VoucherFormValues) => {\n    createMutation.mutate(data);\n  };\n\n  const paymentMethod = form.watch(\"paymentMethod\");\n  const availableAccounts =\n    paymentMethod === \"نقداً\"\n      ? cashAccounts\n      : paymentMethod === \"تحويل بنكي\" || paymentMethod === \"شيك\"\n        ? bankAccounts\n        : [];\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\" data-testid=\"loading-state\">\n        <div className=\"text-center\">\n          <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n          <p className=\"mt-2 text-sm text-muted-foreground\">جاري التحميل...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"flex flex-col items-center justify-center h-64\" data-testid=\"error-state\">\n        <p className=\"text-destructive mb-4\">حدث خطأ أثناء جلب السندات</p>\n        <Button onClick={() => refetch()} data-testid=\"button-retry\">\n          إعادة المحاولة\n        </Button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">سندات القبض</h1>\n          <p className=\"text-muted-foreground mt-1\">إدارة سندات قبض المبالغ من العملاء</p>\n        </div>\n        <Button onClick={openCreateDialog} data-testid=\"button-create\">\n          <Plus className=\"ml-2 h-4 w-4\" />\n          سند جديد\n        </Button>\n      </div>\n\n      {vouchers && vouchers.length === 0 ? (\n        <div className=\"text-center py-12 border rounded-lg\" data-testid=\"empty-state\">\n          <p className=\"text-muted-foreground\">لا توجد سندات قبض حتى الآن</p>\n          <Button className=\"mt-4\" onClick={openCreateDialog} data-testid=\"button-create-first\">\n            <Plus className=\"ml-2 h-4 w-4\" />\n            إنشاء أول سند\n          </Button>\n        </div>\n      ) : (\n        <div className=\"border rounded-lg\" data-testid=\"table-vouchers\">\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead className=\"text-right\">رقم السند</TableHead>\n                <TableHead className=\"text-right\">التاريخ</TableHead>\n                <TableHead className=\"text-right\">العميل</TableHead>\n                <TableHead className=\"text-right\">المبلغ</TableHead>\n                <TableHead className=\"text-right\">طريقة الدفع</TableHead>\n                <TableHead className=\"text-right\">الحالة</TableHead>\n                <TableHead className=\"text-right\">إجراءات</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {vouchers?.map((voucher) => (\n                <TableRow key={voucher.id} data-testid={`row-voucher-${voucher.id}`}>\n                  <TableCell className=\"font-medium\" data-testid={`text-number-${voucher.id}`}>\n                    {voucher.voucherNumber}\n                  </TableCell>\n                  <TableCell data-testid={`text-date-${voucher.id}`}>\n                    {new Date(voucher.voucherDate).toLocaleDateString(\"ar-SA\")}\n                  </TableCell>\n                  <TableCell data-testid={`text-customer-${voucher.id}`}>\n                    {voucher.customerName}\n                  </TableCell>\n                  <TableCell data-testid={`text-amount-${voucher.id}`}>\n                    {parseFloat(voucher.amount).toLocaleString(\"ar-SA\", {\n                      minimumFractionDigits: 2,\n                      maximumFractionDigits: 2,\n                    })}{\" \"}\n                    ريال\n                  </TableCell>\n                  <TableCell data-testid={`text-method-${voucher.id}`}>\n                    {voucher.paymentMethod}\n                  </TableCell>\n                  <TableCell>\n                    <Badge\n                      variant={voucher.status === \"منشور\" ? \"default\" : \"secondary\"}\n                      data-testid={`badge-status-${voucher.id}`}\n                    >\n                      {voucher.status}\n                    </Badge>\n                  </TableCell>\n                  <TableCell>\n                    <div className=\"flex gap-2\">\n                      {voucher.status === \"مسودة\" && (\n                        <>\n                          <Button\n                            size=\"sm\"\n                            variant=\"default\"\n                            onClick={() => handlePost(voucher.id)}\n                            disabled={postMutation.isPending}\n                            data-testid={`button-post-${voucher.id}`}\n                          >\n                            <CheckCircle className=\"ml-2 h-4 w-4\" />\n                            نشر\n                          </Button>\n                          <Button\n                            size=\"sm\"\n                            variant=\"destructive\"\n                            onClick={() => handleDelete(voucher.id)}\n                            disabled={deleteMutation.isPending}\n                            data-testid={`button-delete-${voucher.id}`}\n                          >\n                            <Trash2 className=\"h-4 w-4\" />\n                          </Button>\n                        </>\n                      )}\n                      {voucher.status === \"منشور\" && (\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          data-testid={`button-view-${voucher.id}`}\n                        >\n                          <Eye className=\"ml-2 h-4 w-4\" />\n                          عرض\n                        </Button>\n                      )}\n                    </div>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </div>\n      )}\n\n      <Dialog open={formDialog.open} onOpenChange={(open) => setFormDialog({ open })}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>سند قبض جديد</DialogTitle>\n            <DialogDescription>\n              أدخل بيانات السند. يمكنك تعديله لاحقاً قبل النشر.\n            </DialogDescription>\n          </DialogHeader>\n\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"voucherNumber\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>رقم السند</FormLabel>\n                      <FormControl>\n                        <Input {...field} data-testid=\"input-voucher-number\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"voucherDate\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>التاريخ</FormLabel>\n                      <FormControl>\n                        <Input type=\"date\" {...field} data-testid=\"input-date\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <FormField\n                control={form.control}\n                name=\"customerId\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>العميل</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-customer\">\n                          <SelectValue placeholder=\"اختر العميل\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        {customers?.map((customer) => (\n                          <SelectItem\n                            key={customer.id}\n                            value={customer.id}\n                            data-testid={`option-customer-${customer.id}`}\n                          >\n                            {customer.code} - {customer.name}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"amount\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>المبلغ</FormLabel>\n                      <FormControl>\n                        <Input\n                          type=\"number\"\n                          step=\"0.01\"\n                          {...field}\n                          data-testid=\"input-amount\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"paymentMethod\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>طريقة الدفع</FormLabel>\n                      <Select onValueChange={field.onChange} value={field.value}>\n                        <FormControl>\n                          <SelectTrigger data-testid=\"select-payment-method\">\n                            <SelectValue />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          <SelectItem value=\"نقداً\" data-testid=\"option-payment-cash\">نقداً</SelectItem>\n                          <SelectItem value=\"تحويل بنكي\" data-testid=\"option-payment-transfer\">تحويل بنكي</SelectItem>\n                          <SelectItem value=\"شيك\" data-testid=\"option-payment-check\">شيك</SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <FormField\n                control={form.control}\n                name=\"targetAccountId\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>حساب الاستلام</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-target-account\">\n                          <SelectValue placeholder=\"اختر الحساب\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        {availableAccounts.map((account) => (\n                          <SelectItem\n                            key={account.id}\n                            value={account.id}\n                            data-testid={`option-account-${account.id}`}\n                          >\n                            {account.code} - {account.name}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              {paymentMethod === \"شيك\" && (\n                <div className=\"grid grid-cols-3 gap-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"checkNumber\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>رقم الشيك</FormLabel>\n                        <FormControl>\n                          <Input {...field} data-testid=\"input-check-number\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"checkDate\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>تاريخ الشيك</FormLabel>\n                        <FormControl>\n                          <Input type=\"date\" {...field} data-testid=\"input-check-date\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"checkBank\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>البنك</FormLabel>\n                        <FormControl>\n                          <Input {...field} data-testid=\"input-check-bank\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n              )}\n\n              <FormField\n                control={form.control}\n                name=\"notes\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>ملاحظات</FormLabel>\n                    <FormControl>\n                      <Textarea {...field} data-testid=\"input-notes\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <div className=\"flex justify-end gap-2 pt-4\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={() => setFormDialog({ open: false })}\n                  data-testid=\"button-cancel\"\n                >\n                  إلغاء\n                </Button>\n                <Button\n                  type=\"submit\"\n                  disabled={createMutation.isPending}\n                  data-testid=\"button-submit\"\n                >\n                  {createMutation.isPending ? \"جاري الحفظ...\" : \"حفظ السند\"}\n                </Button>\n              </div>\n            </form>\n          </Form>\n        </DialogContent>\n      </Dialog>\n\n      <AlertDialog open={deleteDialog.open} onOpenChange={(open) => setDeleteDialog({ open, id: null })}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>تأكيد الحذف</AlertDialogTitle>\n            <AlertDialogDescription>\n              هل أنت متأكد من حذف هذا السند؟ لا يمكن التراجع عن هذا الإجراء.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel data-testid=\"button-cancel-delete\">إلغاء</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={confirmDelete}\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n              data-testid=\"button-confirm-delete\"\n            >\n              حذف\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}\n","size_bytes":22424},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/pages/sales/SalesCustomers.tsx":{"content":"import { UserPlus } from \"lucide-react\";\n\nexport default function SalesCustomers() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <UserPlus className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          بيانات العملاء\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة بيانات العملاء وسجلات المبيعات\n      </p>\n    </div>\n  );\n}\n","size_bytes":533},"client/src/pages/pos/POSReports.tsx":{"content":"import { FileBarChart } from \"lucide-react\";\n\nexport default function POSReports() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <FileBarChart className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          تقارير نقاط البيع\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تقارير مبيعات نقاط البيع التفصيلية\n      </p>\n    </div>\n  );\n}\n","size_bytes":538},"design_guidelines.md":{"content":"# تطبيق المحاسبة - دليل التصميم الشامل\n\n## منهجية التصميم\n\n**النهج المختار**: Material Design System via MUI\n**المبرر**: تطبيق محاسبة يركز على كثافة البيانات، الإنتاجية، والاستقرار. Material Design يوفر مكونات جاهزة، أنماط واضحة، ودعم ممتاز للغة العربية وRTL.\n\n## المبادئ الأساسية\n\n1. **الوضوح والقابلية للقراءة**: أولوية قصوى للبيانات المالية\n2. **الكفاءة**: تقليل النقرات والخطوات للعمليات المتكررة\n3. **الموثوقية**: تصميم مستقر وواضح يبني الثقة\n4. **دعم RTL كامل**: جميع العناصر مُحسّنة للعربية\n\n## Typography - الطباعة\n\n**خطوط من Google Fonts**:\n- Primary: 'Cairo' - خط عربي حديث واضح للواجهة\n- Secondary: 'Tajawal' - للعناوين والنصوص الكبيرة\n\n**التسلسل الهرمي**:\n- العناوين الرئيسية: font-size 32-40px, font-weight 700\n- عناوين الأقسام: font-size 24-28px, font-weight 600\n- عناوين البطاقات: font-size 18-20px, font-weight 600\n- النصوص الأساسية: font-size 16px, font-weight 400\n- النصوص الثانوية: font-size 14px, font-weight 400\n- الأرقام المالية: font-weight 600 للتمييز\n\n## Layout System - نظام التخطيط\n\n**Spacing Units** (Tailwind): استخدام 2, 4, 6, 8, 12, 16 كوحدات أساسية\n- المسافات الصغيرة (داخل المكونات): p-2, p-4\n- المسافات المتوسطة (بين العناصر): m-4, m-6, p-6\n- المسافات الكبيرة (بين الأقسام): p-8, p-12, m-8\n\n**Grid Structure**:\n- Sidebar Navigation: 240px عرض ثابت\n- Main Content Area: مرن، max-width 1400px\n- Two-column layouts: 60-40 أو 50-50 حسب المحتوى\n\n## Component Library - مكتبة المكونات\n\n### Navigation\n\n**Top AppBar**:\n- ارتفاع 64px\n- يحتوي: شعار التطبيق، عنوان الصفحة الحالية، أيقونة إشعارات، قائمة المستخدم\n- Elevation: 1\n\n**Sidebar Navigation**:\n- عرض 240px، يمكن طيه إلى 64px (أيقونات فقط)\n- أقسام رئيسية: لوحة التحكم، الحسابات، القيود اليومية، التقارير، الإعدادات\n- استخدام MUI List و ListItem مع أيقونات Material Icons\n- مؤشر بصري للصفحة النشطة\n\n### Data Display Components\n\n**Data Tables** (MUI Table):\n- رؤوس أعمدة ثابتة عند التمرير\n- تبادل ألوان الصفوف (zebra striping)\n- إجراءات سريعة في كل صف (تعديل، حذف، عرض)\n- pagination في الأسفل\n- عرض 50-100 صف لكل صفحة\n\n**Cards** (MUI Card):\n- استخدام للإحصائيات في لوحة التحكم\n- Elevation: 2\n- padding: p-6\n- تحتوي: أيقونة، عنوان، قيمة رقمية كبيرة، نسبة التغيير\n\n**Forms**:\n- استخدام MUI TextField مع variant=\"outlined\"\n- تسميات واضحة فوق الحقول\n- رسائل خطأ تحت الحقل مباشرة\n- تجميع الحقول ذات الصلة في أقسام\n- spacing بين الحقول: gap-4 أو gap-6\n\n### Specialized Components\n\n**القيد المحاسبي**:\n- جدول بصفين: مدين/دائن\n- أزرار إضافة/حذف صف\n- حساب تلقائي للمجاموع\n- تنبيه بصري عند عدم توازن القيد\n\n**ميزان المراجعة**:\n- جدول بأعمدة: رقم الحساب، اسم الحساب، مدين، دائن، الرصيد\n- صف إجمالي في الأسفل\n- إمكانية التصفية والبحث\n\n**Dashboard Cards**:\n- 4 بطاقات إحصائية في صف: الإيرادات، المصروفات، الأرباح، الرصيد\n- استخدام grid: grid-cols-1 md:grid-cols-2 lg:grid-cols-4\n- gap-6 بين البطاقات\n\n### Interactive Elements\n\n**Buttons** (MUI Button):\n- Primary: variant=\"contained\" للإجراءات الرئيسية\n- Secondary: variant=\"outlined\" للإجراءات الثانوية\n- Text buttons: للإجراءات الأقل أهمية\n- أحجام: small, medium, large حسب السياق\n- استخدام startIcon و endIcon حسب الحاجة\n\n**Dialogs/Modals**:\n- MUI Dialog للنماذج والتأكيدات\n- max-width: sm للتأكيدات، md للنماذج المتوسطة، lg للنماذج المعقدة\n- Actions في أسفل يمين (يسار في RTL)\n\n**Snackbars**: \n- للإشعارات والتأكيدات\n- موضع: bottom-left (bottom-right في RTL)\n- مدة: 4-6 ثوانٍ\n\n## Page-Specific Layouts\n\n### لوحة التحكم\n- 4 بطاقات إحصائية في الأعلى\n- رسوم بيانية (2 columns): الإيرادات vs المصروفات الشهرية، توزيع المصروفات\n- جدول آخر المعاملات (10 صفوف)\n\n### صفحة القيود\n- فلاتر في الأعلى (تاريخ، نوع القيد، الحالة)\n- زر \"قيد جديد\" بارز\n- جدول القيود مع pagination\n- Dialog للإضافة/التعديل\n\n### صفحة التقارير\n- قائمة جانبية للتقارير المتاحة\n- منطقة عرض التقرير مع خيارات طباعة/تصدير\n- فلاتر للفترة الزمنية\n\n## Accessibility & RTL\n\n- جميع النصوص والعناصر محاذاة RTL\n- استخدام dir=\"rtl\" على المستوى العلوي\n- أيقونات الأسهم معكوسة حسب الاتجاه\n- دعم keyboard navigation كامل\n- ARIA labels بالعربية\n\n## Animation Guidelines\n\n**تقليل الحركة**: استخدام transitions خفيفة فقط\n- Page transitions: fade-in بسيط 200ms\n- Dialog open/close: MUI defaults\n- Button hover: تغيير subtle في opacity\n- لا animations معقدة للبيانات المالية","size_bytes":6085},"server/errors.ts":{"content":"// Custom error hierarchy for structured error handling\n\nexport class AppError extends Error {\n  constructor(\n    message: string,\n    public status: number,\n    public code?: string\n  ) {\n    super(message);\n    this.name = \"AppError\";\n  }\n}\n\nexport class ValidationError extends AppError {\n  constructor(message: string, code?: string) {\n    super(message, 400, code);\n    this.name = \"ValidationError\";\n  }\n}\n\nexport class NotFoundError extends AppError {\n  constructor(message: string, code?: string) {\n    super(message, 404, code);\n    this.name = \"NotFoundError\";\n  }\n}\n\nexport class ConflictError extends AppError {\n  constructor(message: string, code?: string) {\n    super(message, 409, code);\n    this.name = \"ConflictError\";\n  }\n}\n\nexport class InvalidStateError extends AppError {\n  constructor(message: string, code?: string) {\n    super(message, 400, code);\n    this.name = \"InvalidStateError\";\n  }\n}\n","size_bytes":915},"client/src/pages/distributors/Commissions.tsx":{"content":"import { DollarSign } from \"lucide-react\";\n\nexport default function Commissions() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <DollarSign className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          العمولات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: حساب وإدارة عمولات الوكلاء\n      </p>\n    </div>\n  );\n}\n","size_bytes":504},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2359},"client/src/pages/cash-bank/reports/CashFlow.tsx":{"content":"import { Banknote } from \"lucide-react\";\n\nexport default function CashFlow() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Banknote className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          حركة النقدية\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تقرير حركة النقدية التفصيلي\n      </p>\n    </div>\n  );\n}\n","size_bytes":506},"client/src/pages/contracts/ContractsList.tsx":{"content":"import { FileSignature } from \"lucide-react\";\n\nexport default function ContractsList() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <FileSignature className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          إدارة العقود\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: عرض وإدارة جميع العقود\n      </p>\n    </div>\n  );\n}\n","size_bytes":511},"client/src/pages/crm/Campaigns.tsx":{"content":"import { Megaphone } from \"lucide-react\";\n\nexport default function Campaigns() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Megaphone className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          الحملات التسويقية\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة وتتبع الحملات التسويقية\n      </p>\n    </div>\n  );\n}\n","size_bytes":523},"client/src/pages/fixed-assets/Maintenance.tsx":{"content":"export { default } from './AssetMaintenance';\n","size_bytes":46},"client/src/pages/reports/GeneralLedgerTrialBalance.tsx":{"content":"import { Calculator } from \"lucide-react\";\n\nexport default function GeneralLedgerTrialBalance() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Calculator className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          ميزان المراجعة\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: عرض ميزان المراجعة التفصيلي\n      </p>\n    </div>\n  );\n}\n","size_bytes":531},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n  --opaque-button-border-intensity: -8;\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n  --background: 210 5% 98%;\n  --foreground: 210 6% 12%;\n  --border: 210 5% 90%;\n  --card: 210 5% 96%;\n  --card-foreground: 210 6% 12%;\n  --card-border: 210 5% 92%;\n  --sidebar: 210 5% 94%;\n  --sidebar-foreground: 210 6% 12%;\n  --sidebar-border: 210 5% 88%;\n  --sidebar-primary: 210 85% 42%;\n  --sidebar-primary-foreground: 210 85% 98%;\n  --sidebar-accent: 210 8% 88%;\n  --sidebar-accent-foreground: 210 6% 12%;\n  --sidebar-ring: 210 85% 42%;\n  --popover: 210 5% 92%;\n  --popover-foreground: 210 6% 12%;\n  --popover-border: 210 5% 86%;\n  --primary: 210 85% 42%;\n  --primary-foreground: 210 85% 98%;\n  --secondary: 210 8% 88%;\n  --secondary-foreground: 210 6% 12%;\n  --muted: 210 8% 90%;\n  --muted-foreground: 210 6% 35%;\n  --accent: 210 10% 92%;\n  --accent-foreground: 210 6% 12%;\n  --destructive: 0 75% 45%;\n  --destructive-foreground: 0 75% 98%;\n  --input: 210 5% 75%;\n  --ring: 210 85% 42%;\n  --chart-1: 210 85% 42%;\n  --chart-2: 180 75% 38%;\n  --chart-3: 30 85% 45%;\n  --chart-4: 270 70% 48%;\n  --chart-5: 150 65% 40%;\n  --font-sans: Open Sans, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: .5rem;\n  --shadow-2xs: 0px 2px 0px 0px hsl(210 5% 12% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(210 5% 12% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(210 5% 12% / 0.00), 0px 1px 2px -1px hsl(210 5% 12% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(210 5% 12% / 0.00), 0px 1px 2px -1px hsl(210 5% 12% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(210 5% 12% / 0.00), 0px 2px 4px -1px hsl(210 5% 12% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(210 5% 12% / 0.00), 0px 4px 6px -1px hsl(210 5% 12% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(210 5% 12% / 0.00), 0px 8px 10px -1px hsl(210 5% 12% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(210 5% 12% / 0.00);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n  --opaque-button-border-intensity: 9;\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n  --background: 210 5% 8%;\n  --foreground: 210 5% 95%;\n  --border: 210 5% 18%;\n  --card: 210 5% 10%;\n  --card-foreground: 210 5% 95%;\n  --card-border: 210 5% 14%;\n  --sidebar: 210 5% 12%;\n  --sidebar-foreground: 210 5% 95%;\n  --sidebar-border: 210 5% 16%;\n  --sidebar-primary: 210 85% 55%;\n  --sidebar-primary-foreground: 210 85% 98%;\n  --sidebar-accent: 210 8% 18%;\n  --sidebar-accent-foreground: 210 5% 95%;\n  --sidebar-ring: 210 85% 55%;\n  --popover: 210 5% 14%;\n  --popover-foreground: 210 5% 95%;\n  --popover-border: 210 5% 20%;\n  --primary: 210 85% 45%;\n  --primary-foreground: 210 85% 98%;\n  --secondary: 210 8% 20%;\n  --secondary-foreground: 210 5% 95%;\n  --muted: 210 8% 18%;\n  --muted-foreground: 210 5% 70%;\n  --accent: 210 10% 16%;\n  --accent-foreground: 210 5% 95%;\n  --destructive: 0 75% 42%;\n  --destructive-foreground: 0 75% 98%;\n  --input: 210 5% 35%;\n  --ring: 210 85% 55%;\n  --chart-1: 210 85% 65%;\n  --chart-2: 180 75% 68%;\n  --chart-3: 30 85% 72%;\n  --chart-4: 270 70% 75%;\n  --chart-5: 150 65% 70%;\n  --shadow-2xs: 0px 2px 0px 0px hsl(210 5% 95% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(210 5% 95% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(210 5% 95% / 0.00), 0px 1px 2px -1px hsl(210 5% 95% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(210 5% 95% / 0.00), 0px 1px 2px -1px hsl(210 5% 95% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(210 5% 95% / 0.00), 0px 2px 4px -1px hsl(210 5% 95% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(210 5% 95% / 0.00), 0px 4px 6px -1px hsl(210 5% 95% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(210 5% 95% / 0.00), 0px 8px 10px -1px hsl(210 5% 95% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(210 5% 95% / 0.00);\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}\n","size_bytes":10710},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/pages/loyalty/Programs.tsx":{"content":"import { Gift } from \"lucide-react\";\n\nexport default function LoyaltyPrograms() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Gift className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          برامج الولاء\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة برامج الولاء والمكافآت\n      </p>\n    </div>\n  );\n}\n","size_bytes":507},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/pages/distributors/DistributorReports.tsx":{"content":"import { FileText } from \"lucide-react\";\n\nexport default function DistributorReports() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <FileText className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          تقارير الوكلاء\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تقارير شاملة عن أداء الوكلاء\n      </p>\n    </div>\n  );\n}\n","size_bytes":521},"client/src/pages/purchasing/Returns.tsx":{"content":"export { default } from './PurchaseReturns';\n","size_bytes":45},"client/src/pages/transactions/Payments.tsx":{"content":"import { DollarSign } from \"lucide-react\";\n\nexport default function Payments() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <DollarSign className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          سندات الصرف\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة سندات الصرف والمدفوعات النقدية\n      </p>\n    </div>\n  );\n}\n","size_bytes":525},"client/src/pages/purchasing/reports/SupplierBalances.tsx":{"content":"import { Truck } from \"lucide-react\";\n\nexport default function SupplierBalances() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Truck className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          أرصدة الموردين\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: عرض أرصدة جميع الموردين\n      </p>\n    </div>\n  );\n}\n","size_bytes":504},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"replit.md":{"content":"# RinaPro Business - نظام المحاسبة الشامل المتكامل\n\n## Overview\nRinaPro Business is an integrated ERP system designed for comprehensive business management. It features a full Arabic interface with RTL support, built using React and Shadcn UI for a modern and professional user experience. The system encompasses 23+ integrated modules covering financial accounting, inventory, sales, purchasing, POS, HR, fixed assets, projects, production, contracts, e-commerce, shipping, CRM, budgeting, quality management, maintenance, document management, loyalty programs, business intelligence, distributors, meetings, and risk management. Its primary purpose is to streamline business operations, provide financial insights, and manage various aspects of a company's workflow efficiently. The project aims to be a complete, integrated solution for businesses seeking an Arabic-first ERP system.\n\n## User Preferences\nThe user prefers clear and concise communication. They appreciate an iterative development approach, where features are built out module by module. The user expects the agent to prioritize architectural decisions and high-level feature implementation before diving into granular details. They prefer to be consulted before any major architectural changes or significant deviations from the established design patterns. The user wants the agent to focus on implementing the core functionalities and ensuring seamless integration between modules, especially with the Financial Accounting module.\n\n## System Architecture\nThe system is built as a monolithic ERP application with a modular design, featuring 23+ core modules plus company settings.\n\n**Recent Development Progress (November 2025):**\n- ✅ **Products Management (بطاقة الصنف)**: Complete CRUD system for inventory items with unit selection (حبة, كرتون, كيلو), sale price, and cost price tracking.\n  - Full form validation using Zod schemas\n  - Data table with loading/error states\n  - Toast notifications for all operations\n  - Real-time data updates with TanStack Query\n  \n- ✅ **Customer Management (إدارة بيانات العملاء)**: Fully integrated customer management with automatic chart of accounts linkage, balance tracking, and Zakat/Tax compliance (tax number field).\n  - Automatic account creation in chart of accounts (code: 1120-{customer_code})\n  - Opening balance support with automatic ledger integration\n  - Transaction-safe operations using PostgreSQL transactions ensuring data integrity\n  - Cannot delete customers with non-zero account balances (throws descriptive Arabic error)\n  - Real-time balance tracking with color-coded display (green for debit, red for credit)\n  - Comprehensive error handling with loading/error states and retry functionality\n\n- ✅ **Supplier Management (إدارة بيانات الموردين)** - FULLY COMPLETED:\n  - **Database Schema**: `suppliers` table with full integration to chart of accounts\n  - **Automatic Account Creation**: Creates liability account in chart of accounts (code: 2120-{supplier_code}, type: \"خصوم\")\n  - **Opening Balance Support**: Credit balance tracking (المبالغ المستحقة للمورد)\n  - **Transaction-Safe Operations**: PostgreSQL transactions ensure atomicity for supplier + account creation/deletion\n  - **Deletion Protection**: Cannot delete suppliers with non-zero account balances (validation with Arabic error message)\n  - **Real-Time Balance Tracking**: Color-coded display (green for credit, red for debit)\n  - **Full CRUD Operations**: Create, read, update, delete with Zod validation\n  - **UI/UX Features**:\n    - React Hook Form with zodResolver integration\n    - Data table with loading/error/empty states\n    - Toast notifications for all operations\n    - Proper RTL labels and placeholders (\"مورد\" not \"عميل\", placeholder \"S001\")\n    - Comprehensive data-testid attributes for E2E testing\n  - **E2E Tested**: Full workflow verified (create → update → delete with zero balance → deletion protection for non-zero balance)\n\n- ✅ **Sales Invoices (فواتير المبيعات)** - COMPLETED FIRST CORE MODULE:\n  - **Database Schema**: `salesInvoices`, `salesInvoiceItems`, `stockMovements` tables\n  - **Draft/Posted Workflow**: Invoices start as drafts, can be edited/deleted, then posted permanently\n  - **Stock Integration**: Automatic inventory deduction with full audit trail via `stockMovements` table\n  - **Accounting Integration**: \n    - Revenue entry (Debit: Customer, Credit: Revenue + VAT)\n    - Cost entry (Debit: COGS, Credit: Inventory)\n    - Both entries created atomically in single PostgreSQL transaction\n  - **Customer Balance**: Automatic update of customer account balance\n  - **Saudi VAT Compliance**: 15% tax rate with separate tracking\n  - **Full UI**: Complete interface with multi-item invoices, automatic totals calculation, draft/post controls\n  - **Transaction Safety**: All posting operations wrapped in atomic PostgreSQL transactions\n\n- ✅ **Receipt Vouchers (سندات القبض)** - FULLY COMPLETED:\n  - **Database Schema**: `receiptVouchers`, `receiptVoucherAllocations` tables\n  - **Draft/Posted Workflow**: Vouchers start as drafts, can be edited/deleted, then posted permanently\n  - **Payment Methods**: Support for Cash (نقداً), Bank Transfer (تحويل بنكي), and Check (شيك) with check details\n  - **Invoice Allocations**: Optional allocation to specific sales invoices for better tracking\n  - **Accounting Integration**: \n    - Debit: Bank/Cash account (based on payment method)\n    - Credit: Customer account\n    - Automatic customer balance reduction\n    - All entries created atomically in single PostgreSQL transaction\n  - **Comprehensive Validations**:\n    - Amounts must be positive (> 0)\n    - Allocations cannot exceed voucher amount (partial allocations allowed)\n    - Allocated invoices must be posted and belong to same customer\n    - Re-validation at posting time for data integrity\n  - **Transaction Safety**: All posting operations wrapped in atomic PostgreSQL transactions\n  - **Full UI**: Complete interface with form dialog, data table, post/delete actions\n    - React Hook Form with Zod validation\n    - Dynamic account selection based on payment method\n    - Check details fields for \"شيك\" payment\n    - Loading/Error/Empty states with retry functionality\n    - Toast notifications for all operations\n    - 37+ data-testid attributes for E2E testing automation\n  - **E2E Tested**: Full workflow verified (draft creation → posting → accounting → balance updates)\n  \n- ✅ **Sidebar Navigation**: Organized navigation with clear module hierarchy\n  - **البيانات الأساسية** (Master Data) section for shared data:\n    - Customers management → `/master/customers`\n    - Suppliers management → `/master/suppliers`\n    - Branches → `/master/branches`\n    - Currencies → `/master/currencies`\n  - **النقدية والبنوك** (Cash & Bank) section includes Receipt Vouchers:\n    - Receipt Vouchers (سندات القبض) → `/cash-bank/receipt-vouchers`\n    - Bank Accounts → `/cash-bank/bank-accounts`\n    - Cash Boxes → `/cash-bank/cash-boxes`\n  \n- ✅ **UI/UX Improvements**:\n  - Fixed sidebar layout using Shadcn's `SidebarInset` component to prevent content overlay\n  - Proper RTL layout with sidebar on the right side\n  - TypeScript errors resolved in sidebar navigation\n  - All 23+ modules properly routed in App.tsx\n\n**UI/UX Decisions:**\n- **Language & Layout:** Full Arabic interface with comprehensive RTL (Right-to-Left) support.\n- **Components:** Utilizes Shadcn UI for a professional, modern aesthetic, including an advanced 3-level tree-view sidebar.\n- **Theming:** Supports both dark and light modes.\n- **Responsiveness:** Designed to be fully responsive across all devices.\n- **Typography:** Employs Cairo and Tajawal Arabic fonts.\n- **Dashboard:** Interactive dashboard with financial statistics.\n\n**Technical Implementations:**\n- **Frontend:**\n    - React 18 with TypeScript.\n    - Wouter for routing.\n    - TanStack Query for data management.\n    - Tailwind CSS for styling.\n    - Recharts for data visualization.\n- **Backend:**\n    - Express.js for the API server.\n    - TypeScript for type safety.\n    - Zod for data validation.\n- **Database:**\n    - PostgreSQL as the primary database.\n    - Drizzle ORM for schema management and interactions.\n    - Database migrations managed via `npm run db:push`.\n\n**Feature Specifications:**\n- **Financial Accounting:** Core module, acting as the central hub for all financial transactions, supporting double-entry bookkeeping.\n- **Modular Integration:** All other modules (Inventory, Sales, Purchasing, HR, etc.) are designed to integrate with Financial Accounting by generating automatic journal entries.\n- **Sidebar Structure:** A multi-level (3-tier) hierarchical sidebar built with Shadcn UI's Sidebar and Collapsible components, organizing 140+ pages across 23+ modules.\n- **API Design:** RESTful API endpoints for each module, ensuring clear separation of concerns.\n- **Database Transactions:** Critical operations (like customer creation with account linkage) use PostgreSQL transactions to ensure atomicity.\n- **Automatic Integration:** Customer and supplier records automatically create linked chart of accounts entries for seamless financial tracking.\n\n**System Design Choices:**\n- **Monolithic Architecture:** A single codebase for both frontend and backend for simplified deployment and management, while maintaining modularity within the application structure.\n- **Data Validation:** Strict data validation using Zod on the backend to ensure data integrity.\n- **Structured Error Handling:** Custom error hierarchy (AppError base class) with typed errors:\n  - ValidationError (400): Business logic violations\n  - NotFoundError (404): Missing entities\n  - ConflictError (409): Duplicate entries\n  - InvalidStateError (400): State violations\n  - Centralized Express middleware for consistent HTTP status codes\n  - Clear separation between user-fixable errors (4xx) and server faults (5xx)\n- **Transaction Safety:** All critical database operations that span multiple tables use PostgreSQL transactions to prevent partial writes and maintain data consistency.\n- **Responsive UI States:** Loading spinners, error messages with retry buttons, and empty states provide clear feedback to users.\n\n## External Dependencies\n- **Database:**\n    - PostgreSQL (with Neon for cloud-hosted PostgreSQL capabilities).\n- **Frontend Libraries:**\n    - React 18\n    - Wouter\n    - TanStack Query\n    - Shadcn UI\n    - Tailwind CSS\n    - Recharts\n- **Backend Libraries:**\n    - Express.js\n    - Drizzle ORM\n    - Zod\n- **Fonts:**\n    - Cairo\n    - Tajawal","size_bytes":10771},"client/src/pages/production/QualityControl.tsx":{"content":"import { Award } from \"lucide-react\";\n\nexport default function QualityControl() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Award className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          مراقبة الجودة\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: مراقبة جودة الإنتاج\n      </p>\n    </div>\n  );\n}\n","size_bytes":493},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"client/src/pages/cash-bank/Reconciliation.tsx":{"content":"export { default } from './BankReconciliation';\n","size_bytes":48},"client/src/pages/loyalty/Points.tsx":{"content":"import { Star } from \"lucide-react\";\n\nexport default function LoyaltyPoints() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Star className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          النقاط والمكافآت\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة نقاط العملاء والمكافآت\n      </p>\n    </div>\n  );\n}\n","size_bytes":513},"client/src/pages/purchasing/reports/PurchaseReport.tsx":{"content":"import { TrendingDown } from \"lucide-react\";\n\nexport default function PurchaseReport() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <TrendingDown className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          تقرير المشتريات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تقرير المشتريات التفصيلي\n      </p>\n    </div>\n  );\n}\n","size_bytes":521},"client/src/pages/crm/Tasks.tsx":{"content":"import { CheckSquare } from \"lucide-react\";\n\nexport default function CRMTasks() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <CheckSquare className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          المهام والمتابعة\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة المهام والتذكيرات المرتبطة بالعملاء\n      </p>\n    </div>\n  );\n}\n","size_bytes":547},"client/src/pages/distributors/DistributorList.tsx":{"content":"import { Users } from \"lucide-react\";\n\nexport default function DistributorList() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Users className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          الوكلاء والموزعون\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة شبكة الوكلاء والموزعين\n      </p>\n    </div>\n  );\n}\n","size_bytes":519},"client/src/pages/hr/Employees.tsx":{"content":"import { UserCircle } from \"lucide-react\";\n\nexport default function Employees() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <UserCircle className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          بيانات الموظفين\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة بيانات الموظفين\n      </p>\n    </div>\n  );\n}\n","size_bytes":506},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, decimal, timestamp, integer } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// أنواع الحسابات المحاسبية\nexport type AccountType = \"أصول\" | \"خصوم\" | \"إيرادات\" | \"مصروفات\" | \"حقوق ملكية\";\n\n// تصنيفات الحسابات (للنقدية والبنوك وغيرها)\nexport type AccountCategory = \"نقدية\" | \"البنك\" | \"أخرى\";\n\n// جدول الحسابات المالية\nexport const accounts = pgTable(\"accounts\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  code: varchar(\"code\", { length: 20 }).notNull().unique(),\n  name: text(\"name\").notNull(),\n  type: text(\"type\").notNull().$type<AccountType>(),\n  category: text(\"category\").$type<AccountCategory>().default(\"أخرى\"),\n  parentId: varchar(\"parent_id\"),\n  balance: decimal(\"balance\", { precision: 15, scale: 2 }).notNull().default(\"0\"),\n  isActive: integer(\"is_active\").notNull().default(1),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// جدول القيود المحاسبية\nexport const entries = pgTable(\"entries\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  entryNumber: varchar(\"entry_number\", { length: 50 }).notNull().unique(),\n  date: timestamp(\"date\").notNull(),\n  description: text(\"description\").notNull(),\n  totalDebit: decimal(\"total_debit\", { precision: 15, scale: 2 }).notNull(),\n  totalCredit: decimal(\"total_credit\", { precision: 15, scale: 2 }).notNull(),\n  isBalanced: integer(\"is_balanced\").notNull(),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// جدول تفاصيل القيود (سطور القيد)\nexport const entryLines = pgTable(\"entry_lines\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  entryId: varchar(\"entry_id\").notNull(),\n  accountId: varchar(\"account_id\").notNull(),\n  debit: decimal(\"debit\", { precision: 15, scale: 2 }).notNull().default(\"0\"),\n  credit: decimal(\"credit\", { precision: 15, scale: 2 }).notNull().default(\"0\"),\n  description: text(\"description\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// Schemas للإدراج\nexport const insertAccountSchema = createInsertSchema(accounts).omit({\n  id: true,\n  createdAt: true,\n  balance: true,\n}).extend({\n  code: z.string().min(1, \"رمز الحساب مطلوب\"),\n  name: z.string().min(1, \"اسم الحساب مطلوب\"),\n  type: z.enum([\"أصول\", \"خصوم\", \"إيرادات\", \"مصروفات\", \"حقوق ملكية\"], {\n    errorMap: () => ({ message: \"نوع الحساب غير صحيح\" }),\n  }),\n  category: z.enum([\"نقدية\", \"البنك\", \"أخرى\"]).default(\"أخرى\"),\n  parentId: z.string().optional(),\n  isActive: z.number().default(1),\n});\n\nexport const insertEntrySchema = createInsertSchema(entries).omit({\n  id: true,\n  createdAt: true,\n  totalDebit: true,\n  totalCredit: true,\n  isBalanced: true,\n}).extend({\n  entryNumber: z.string().min(1, \"رقم القيد مطلوب\"),\n  date: z.string().or(z.date()),\n  description: z.string().min(1, \"وصف القيد مطلوب\"),\n});\n\nexport const insertEntryLineSchema = createInsertSchema(entryLines).omit({\n  id: true,\n  createdAt: true,\n}).extend({\n  entryId: z.string().min(1),\n  accountId: z.string().min(1, \"الحساب مطلوب\"),\n  debit: z.string().or(z.number()).default(\"0\"),\n  credit: z.string().or(z.number()).default(\"0\"),\n  description: z.string().optional(),\n});\n\n// نموذج القيد الكامل مع السطور\nexport const insertFullEntrySchema = z.object({\n  entryNumber: z.string().min(1, \"رقم القيد مطلوب\"),\n  date: z.string().or(z.date()),\n  description: z.string().min(1, \"وصف القيد مطلوب\"),\n  lines: z.array(\n    z.object({\n      accountId: z.string().min(1, \"الحساب مطلوب\"),\n      debit: z.string().or(z.number()).default(\"0\"),\n      credit: z.string().or(z.number()).default(\"0\"),\n      description: z.string().optional(),\n    })\n  ).min(2, \"يجب أن يحتوي القيد على سطرين على الأقل\"),\n});\n\n// أنواع TypeScript\nexport type InsertAccount = z.infer<typeof insertAccountSchema>;\nexport type Account = typeof accounts.$inferSelect;\nexport type InsertEntry = z.infer<typeof insertEntrySchema>;\nexport type Entry = typeof entries.$inferSelect;\nexport type InsertEntryLine = z.infer<typeof insertEntryLineSchema>;\nexport type EntryLine = typeof entryLines.$inferSelect;\nexport type InsertFullEntry = z.infer<typeof insertFullEntrySchema>;\n\n// نوع للقيد مع سطوره\nexport type FullEntry = Entry & {\n  lines: (EntryLine & { accountName?: string })[];\n};\n\n// نوع لميزان المراجعة\nexport type TrialBalanceRow = {\n  accountId: string;\n  accountCode: string;\n  accountName: string;\n  accountType: AccountType;\n  debit: string;\n  credit: string;\n  balance: string;\n};\n\n// نوع لقائمة الدخل\nexport type IncomeStatementData = {\n  revenues: Array<{ accountName: string; amount: string }>;\n  expenses: Array<{ accountName: string; amount: string }>;\n  totalRevenues: string;\n  totalExpenses: string;\n  netIncome: string;\n  period: { from: string; to: string };\n};\n\n// نوع للميزانية العمومية\nexport type BalanceSheetData = {\n  assets: Array<{ accountName: string; amount: string }>;\n  liabilities: Array<{ accountName: string; amount: string }>;\n  equity: Array<{ accountName: string; amount: string }>;\n  totalAssets: string;\n  totalLiabilities: string;\n  totalEquity: string;\n  date: string;\n};\n\n// نوع لإحصائيات لوحة التحكم\nexport type DashboardStats = {\n  totalRevenues: string;\n  totalExpenses: string;\n  netIncome: string;\n  totalBalance: string;\n  recentEntries: FullEntry[];\n  monthlyData: Array<{\n    month: string;\n    revenues: number;\n    expenses: number;\n  }>;\n};\n\n// جدول الأصناف (المنتجات)\nexport const products = pgTable(\"products\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  itemCode: varchar(\"item_code\", { length: 50 }).notNull().unique(),\n  itemName: text(\"item_name\").notNull(),\n  unit: varchar(\"unit\", { length: 20 }).notNull(),\n  salePrice: decimal(\"sale_price\", { precision: 15, scale: 2 }).notNull(),\n  costPrice: decimal(\"cost_price\", { precision: 15, scale: 2 }).notNull(),\n  quantityOnHand: decimal(\"quantity_on_hand\", { precision: 15, scale: 3 }).notNull().default(\"0\"), // الكمية المتوفرة في المخزون\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// Schema للإدراج - المنتجات\nexport const insertProductSchema = createInsertSchema(products).omit({\n  id: true,\n  createdAt: true,\n  quantityOnHand: true, // يتم تحديثه تلقائياً من خلال حركات المخزون\n}).extend({\n  itemCode: z.string().min(1, \"كود الصنف مطلوب\"),\n  itemName: z.string().min(1, \"اسم الصنف مطلوب\"),\n  unit: z.enum([\"حبة\", \"كرتون\", \"كيلو\"], {\n    errorMap: () => ({ message: \"الوحدة غير صحيحة\" }),\n  }),\n  salePrice: z.string().or(z.number()).refine(val => parseFloat(val.toString()) >= 0, \"سعر البيع يجب أن يكون رقم موجب\"),\n  costPrice: z.string().or(z.number()).refine(val => parseFloat(val.toString()) >= 0, \"سعر التكلفة يجب أن يكون رقم موجب\"),\n});\n\n// أنواع TypeScript - المنتجات\nexport type InsertProduct = z.infer<typeof insertProductSchema>;\nexport type Product = typeof products.$inferSelect;\n\n// جدول العملاء\nexport const customers = pgTable(\"customers\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  code: varchar(\"code\", { length: 50 }).notNull().unique(),\n  name: text(\"name\").notNull(),\n  phone: varchar(\"phone\", { length: 20 }),\n  email: varchar(\"email\", { length: 100 }),\n  address: text(\"address\"),\n  taxNumber: varchar(\"tax_number\", { length: 50 }),\n  openingBalance: decimal(\"opening_balance\", { precision: 15, scale: 2 }).notNull().default(\"0\"),\n  currentBalance: decimal(\"current_balance\", { precision: 15, scale: 2 }).notNull().default(\"0\"),\n  accountId: varchar(\"account_id\"), // الحساب المحاسبي المرتبط\n  isActive: integer(\"is_active\").notNull().default(1),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// Schema للإدراج - العملاء\nexport const insertCustomerSchema = createInsertSchema(customers).omit({\n  id: true,\n  createdAt: true,\n  currentBalance: true,\n}).extend({\n  code: z.string().min(1, \"كود العميل مطلوب\"),\n  name: z.string().min(1, \"اسم العميل مطلوب\"),\n  phone: z.string().optional(),\n  email: z.string().email(\"البريد الإلكتروني غير صحيح\").optional().or(z.literal(\"\")),\n  address: z.string().optional(),\n  taxNumber: z.string().optional(),\n  openingBalance: z.string().or(z.number()).default(\"0\"),\n  accountId: z.string().optional(),\n  isActive: z.number().default(1),\n});\n\n// أنواع TypeScript - العملاء\nexport type InsertCustomer = z.infer<typeof insertCustomerSchema>;\nexport type Customer = typeof customers.$inferSelect;\n\n// جدول الموردين\nexport const suppliers = pgTable(\"suppliers\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  code: varchar(\"code\", { length: 50 }).notNull().unique(),\n  name: text(\"name\").notNull(),\n  phone: varchar(\"phone\", { length: 20 }),\n  email: varchar(\"email\", { length: 100 }),\n  address: text(\"address\"),\n  taxNumber: varchar(\"tax_number\", { length: 50 }),\n  openingBalance: decimal(\"opening_balance\", { precision: 15, scale: 2 }).notNull().default(\"0\"),\n  currentBalance: decimal(\"current_balance\", { precision: 15, scale: 2 }).notNull().default(\"0\"),\n  accountId: varchar(\"account_id\"), // الحساب المحاسبي المرتبط\n  isActive: integer(\"is_active\").notNull().default(1),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// Schema للإدراج - الموردين\nexport const insertSupplierSchema = createInsertSchema(suppliers).omit({\n  id: true,\n  createdAt: true,\n  currentBalance: true,\n}).extend({\n  code: z.string().min(1, \"كود المورد مطلوب\"),\n  name: z.string().min(1, \"اسم المورد مطلوب\"),\n  phone: z.string().optional(),\n  email: z.string().email(\"البريد الإلكتروني غير صحيح\").optional().or(z.literal(\"\")),\n  address: z.string().optional(),\n  taxNumber: z.string().optional(),\n  openingBalance: z.string().or(z.number()).default(\"0\"),\n  accountId: z.string().optional(),\n  isActive: z.number().default(1),\n});\n\n// أنواع TypeScript - الموردين\nexport type InsertSupplier = z.infer<typeof insertSupplierSchema>;\nexport type Supplier = typeof suppliers.$inferSelect;\n\n// حالة الفاتورة\nexport type InvoiceStatus = \"مسودة\" | \"منشورة\";\n\n// جدول فواتير المبيعات\nexport const salesInvoices = pgTable(\"sales_invoices\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  invoiceNumber: varchar(\"invoice_number\", { length: 50 }).notNull().unique(),\n  invoiceDate: timestamp(\"invoice_date\").notNull(),\n  customerId: varchar(\"customer_id\").notNull(), // foreign key → customers.id\n  totalBeforeTax: decimal(\"total_before_tax\", { precision: 15, scale: 2 }).notNull(),\n  taxRate: decimal(\"tax_rate\", { precision: 5, scale: 4 }).notNull().default(\"0.15\"), // معدل الضريبة (15%)\n  taxAmount: decimal(\"tax_amount\", { precision: 15, scale: 2 }).notNull(),\n  totalAfterTax: decimal(\"total_after_tax\", { precision: 15, scale: 2 }).notNull(),\n  totalCost: decimal(\"total_cost\", { precision: 15, scale: 2 }).notNull().default(\"0\"), // إجمالي التكلفة\n  status: varchar(\"status\", { length: 20 }).notNull().default(\"مسودة\").$type<InvoiceStatus>(), // حالة الفاتورة\n  notes: text(\"notes\"),\n  entryId: varchar(\"entry_id\"), // القيد المحاسبي المرتبط (قيد الإيرادات) - يُنشأ عند النشر\n  costEntryId: varchar(\"cost_entry_id\"), // قيد التكلفة - يُنشأ عند النشر\n  postedAt: timestamp(\"posted_at\"), // تاريخ النشر\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// جدول تفاصيل فواتير المبيعات (الأصناف)\nexport const salesInvoiceItems = pgTable(\"sales_invoice_items\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  invoiceId: varchar(\"invoice_id\").notNull(), // foreign key → sales_invoices.id\n  productId: varchar(\"product_id\").notNull(), // foreign key → products.id\n  quantity: decimal(\"quantity\", { precision: 15, scale: 3 }).notNull(),\n  unitPrice: decimal(\"unit_price\", { precision: 15, scale: 2 }).notNull(),\n  total: decimal(\"total\", { precision: 15, scale: 2 }).notNull(), // = quantity * unitPrice\n  costPrice: decimal(\"cost_price\", { precision: 15, scale: 2 }).notNull(), // سعر التكلفة لحظة البيع\n  totalCost: decimal(\"total_cost\", { precision: 15, scale: 2 }).notNull(), // = quantity * costPrice\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// جدول حركات المخزون (Stock Movements)\nexport const stockMovements = pgTable(\"stock_movements\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  productId: varchar(\"product_id\").notNull(), // foreign key → products.id\n  movementType: varchar(\"movement_type\", { length: 50 }).notNull(), // نوع الحركة: \"فاتورة مبيعات\", \"فاتورة مشتريات\", \"جرد\", etc.\n  referenceId: varchar(\"reference_id\").notNull(), // معرف المستند المصدر (invoice_id, etc.)\n  referenceNumber: varchar(\"reference_number\", { length: 50 }).notNull(), // رقم المستند المصدر\n  quantity: decimal(\"quantity\", { precision: 15, scale: 3 }).notNull(), // كمية موجبة للدخول، سالبة للخروج\n  quantityBefore: decimal(\"quantity_before\", { precision: 15, scale: 3 }).notNull(), // الكمية قبل الحركة\n  quantityAfter: decimal(\"quantity_after\", { precision: 15, scale: 3 }).notNull(), // الكمية بعد الحركة\n  movementDate: timestamp(\"movement_date\").notNull(),\n  notes: text(\"notes\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// Schema للإدراج - فواتير المبيعات\nexport const insertSalesInvoiceSchema = createInsertSchema(salesInvoices).omit({\n  id: true,\n  createdAt: true,\n  entryId: true,\n  costEntryId: true,\n  postedAt: true,\n  totalBeforeTax: true, // يتم حسابه تلقائياً\n  taxAmount: true, // يتم حسابه تلقائياً\n  totalAfterTax: true, // يتم حسابه تلقائياً\n  totalCost: true, // يتم حسابه تلقائياً\n}).extend({\n  invoiceNumber: z.string().min(1, \"رقم الفاتورة مطلوب\"),\n  invoiceDate: z.string().or(z.date()),\n  customerId: z.string().min(1, \"العميل مطلوب\"),\n  taxRate: z.string().or(z.number()).default(\"0.15\"),\n  status: z.enum([\"مسودة\", \"منشورة\"]).default(\"مسودة\"),\n  notes: z.string().optional(),\n});\n\n// Schema للإدراج - تفاصيل فواتير المبيعات\nexport const insertSalesInvoiceItemSchema = createInsertSchema(salesInvoiceItems).omit({\n  id: true,\n  createdAt: true,\n  total: true, // يتم حسابه تلقائياً: quantity * unitPrice\n  totalCost: true, // يتم حسابه تلقائياً: quantity * costPrice\n}).extend({\n  invoiceId: z.string().min(1),\n  productId: z.string().min(1, \"الصنف مطلوب\"),\n  quantity: z.string().or(z.number()).refine(val => parseFloat(val.toString()) > 0, \"الكمية يجب أن تكون أكبر من صفر\"),\n  unitPrice: z.string().or(z.number()),\n  costPrice: z.string().or(z.number()),\n});\n\n// Schema للفاتورة الكاملة مع الأصناف\nexport const insertFullSalesInvoiceSchema = z.object({\n  invoiceNumber: z.string().min(1, \"رقم الفاتورة مطلوب\"),\n  invoiceDate: z.string().or(z.date()),\n  customerId: z.string().min(1, \"العميل مطلوب\"),\n  taxRate: z.string().or(z.number()).default(\"0.15\"),\n  notes: z.string().optional(),\n  items: z.array(\n    z.object({\n      productId: z.string().min(1, \"الصنف مطلوب\"),\n      quantity: z.string().or(z.number()).refine(val => parseFloat(val.toString()) > 0, \"الكمية يجب أن تكون أكبر من صفر\"),\n      unitPrice: z.string().or(z.number()),\n    })\n  ).min(1, \"يجب إضافة صنف واحد على الأقل\"),\n});\n\n// Schema للإدراج - حركات المخزون\nexport const insertStockMovementSchema = createInsertSchema(stockMovements).omit({\n  id: true,\n  createdAt: true,\n}).extend({\n  productId: z.string().min(1),\n  movementType: z.string().min(1),\n  referenceId: z.string().min(1),\n  referenceNumber: z.string().min(1),\n  quantity: z.string().or(z.number()),\n  quantityBefore: z.string().or(z.number()),\n  quantityAfter: z.string().or(z.number()),\n  movementDate: z.string().or(z.date()),\n  notes: z.string().optional(),\n});\n\n// أنواع TypeScript - فواتير المبيعات\nexport type InsertSalesInvoice = z.infer<typeof insertSalesInvoiceSchema>;\nexport type SalesInvoice = typeof salesInvoices.$inferSelect;\nexport type InsertSalesInvoiceItem = z.infer<typeof insertSalesInvoiceItemSchema>;\nexport type SalesInvoiceItem = typeof salesInvoiceItems.$inferSelect;\nexport type InsertFullSalesInvoice = z.infer<typeof insertFullSalesInvoiceSchema>;\nexport type InsertStockMovement = z.infer<typeof insertStockMovementSchema>;\nexport type StockMovement = typeof stockMovements.$inferSelect;\n\n// نوع للفاتورة الكاملة مع التفاصيل\nexport type FullSalesInvoice = SalesInvoice & {\n  items: (SalesInvoiceItem & { productName?: string; unit?: string })[];\n  customerName?: string;\n};\n\n// ===============================\n// سند القبض (Receipt Voucher)\n// ===============================\n\n// أنواع طرق الدفع\nexport type PaymentMethod = \"نقدي\" | \"بنك\" | \"شيك\";\n\n// جدول سندات القبض\nexport const receiptVouchers = pgTable(\"receipt_vouchers\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  voucherNumber: varchar(\"voucher_number\", { length: 50 }).notNull().unique(),\n  voucherDate: timestamp(\"voucher_date\").notNull(),\n  customerId: varchar(\"customer_id\").notNull(),\n  amount: decimal(\"amount\", { precision: 15, scale: 2 }).notNull(),\n  paymentMethod: text(\"payment_method\").notNull().$type<PaymentMethod>(),\n  targetAccountId: varchar(\"target_account_id\").notNull(), // حساب البنك أو الصندوق\n  checkNumber: varchar(\"check_number\", { length: 50 }),\n  checkDate: timestamp(\"check_date\"),\n  checkBank: varchar(\"check_bank\", { length: 100 }),\n  status: text(\"status\").notNull().default(\"مسودة\"), // \"مسودة\" أو \"منشور\"\n  notes: text(\"notes\"),\n  entryId: varchar(\"entry_id\"), // القيد المحاسبي المرتبط (بعد النشر)\n  postedAt: timestamp(\"posted_at\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// جدول تخصيصات سند القبض (ربط السند بفواتير معينة)\nexport const receiptVoucherAllocations = pgTable(\"receipt_voucher_allocations\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  voucherId: varchar(\"voucher_id\").notNull(),\n  invoiceId: varchar(\"invoice_id\").notNull(),\n  amount: decimal(\"amount\", { precision: 15, scale: 2 }).notNull(),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// Schema للإدراج - سندات القبض\nexport const insertReceiptVoucherSchema = createInsertSchema(receiptVouchers).omit({\n  id: true,\n  createdAt: true,\n  entryId: true,\n  postedAt: true,\n}).extend({\n  voucherNumber: z.string().min(1, \"رقم السند مطلوب\"),\n  voucherDate: z.string().or(z.date()),\n  customerId: z.string().min(1, \"العميل مطلوب\"),\n  amount: z.string().or(z.number()).refine(\n    val => parseFloat(val.toString()) > 0, \n    \"المبلغ يجب أن يكون أكبر من صفر\"\n  ),\n  paymentMethod: z.enum([\"نقدي\", \"بنك\", \"شيك\"], {\n    errorMap: () => ({ message: \"طريقة الدفع غير صحيحة\" }),\n  }),\n  targetAccountId: z.string().min(1, \"حساب القبض مطلوب\"),\n  checkNumber: z.string().optional(),\n  checkDate: z.string().or(z.date()).optional(),\n  checkBank: z.string().optional(),\n  status: z.enum([\"مسودة\", \"منشور\"]).default(\"مسودة\"),\n  notes: z.string().optional(),\n});\n\n// Schema للإدراج - تخصيصات سند القبض\nexport const insertReceiptVoucherAllocationSchema = createInsertSchema(receiptVoucherAllocations).omit({\n  id: true,\n  createdAt: true,\n}).extend({\n  voucherId: z.string().min(1),\n  invoiceId: z.string().min(1, \"الفاتورة مطلوبة\"),\n  amount: z.string().or(z.number()).refine(\n    val => parseFloat(val.toString()) > 0, \n    \"المبلغ يجب أن يكون أكبر من صفر\"\n  ),\n});\n\n// Schema لسند القبض الكامل مع التخصيصات\nexport const insertFullReceiptVoucherSchema = z.object({\n  voucherNumber: z.string().min(1, \"رقم السند مطلوب\"),\n  voucherDate: z.string().or(z.date()),\n  customerId: z.string().min(1, \"العميل مطلوب\"),\n  amount: z.string().or(z.number()).refine(\n    val => parseFloat(val.toString()) > 0, \n    \"المبلغ يجب أن يكون أكبر من صفر\"\n  ),\n  paymentMethod: z.enum([\"نقدي\", \"بنك\", \"شيك\"], {\n    errorMap: () => ({ message: \"طريقة الدفع غير صحيحة\" }),\n  }),\n  targetAccountId: z.string().min(1, \"حساب القبض مطلوب\"),\n  checkNumber: z.string().optional(),\n  checkDate: z.string().or(z.date()).optional(),\n  checkBank: z.string().optional(),\n  notes: z.string().optional(),\n  allocations: z.array(\n    z.object({\n      invoiceId: z.string().min(1, \"الفاتورة مطلوبة\"),\n      amount: z.string().or(z.number()).refine(\n        val => parseFloat(val.toString()) > 0, \n        \"المبلغ يجب أن يكون أكبر من صفر\"\n      ),\n    })\n  ).optional().default([]),\n}).refine(\n  (data) => {\n    // If allocations exist, their sum must equal the voucher amount\n    if (data.allocations && data.allocations.length > 0) {\n      const totalAllocations = data.allocations.reduce(\n        (sum, allocation) => sum + parseFloat(allocation.amount.toString()),\n        0\n      );\n      const voucherAmount = parseFloat(data.amount.toString());\n      return Math.abs(totalAllocations - voucherAmount) < 0.01; // Allow 0.01 tolerance for floating point\n    }\n    return true;\n  },\n  {\n    message: \"مجموع التخصيصات يجب أن يساوي مبلغ السند بالضبط\",\n    path: [\"allocations\"],\n  }\n);\n\n// أنواع TypeScript - سندات القبض\nexport type InsertReceiptVoucher = z.infer<typeof insertReceiptVoucherSchema>;\nexport type ReceiptVoucher = typeof receiptVouchers.$inferSelect;\nexport type InsertReceiptVoucherAllocation = z.infer<typeof insertReceiptVoucherAllocationSchema>;\nexport type ReceiptVoucherAllocation = typeof receiptVoucherAllocations.$inferSelect;\nexport type InsertFullReceiptVoucher = z.infer<typeof insertFullReceiptVoucherSchema>;\n\n// نوع لسند القبض الكامل مع التفاصيل\nexport type FullReceiptVoucher = ReceiptVoucher & {\n  allocations: (ReceiptVoucherAllocation & { invoiceNumber?: string })[];\n  customerName?: string;\n  targetAccountName?: string;\n};\n\n// ==========================================\n// Payment Vouchers (سندات الدفع)\n// ==========================================\n\n// جدول سندات الدفع (للموردين)\nexport const paymentVouchers = pgTable(\"payment_vouchers\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  voucherNumber: varchar(\"voucher_number\", { length: 50 }).notNull().unique(),\n  voucherDate: timestamp(\"voucher_date\").notNull(),\n  supplierId: varchar(\"supplier_id\").notNull(),\n  amount: decimal(\"amount\", { precision: 15, scale: 2 }).notNull(),\n  paymentMethod: text(\"payment_method\").notNull().$type<PaymentMethod>(),\n  sourceAccountId: varchar(\"source_account_id\").notNull(), // حساب البنك أو الصندوق\n  checkNumber: varchar(\"check_number\", { length: 50 }),\n  checkDate: timestamp(\"check_date\"),\n  checkBank: varchar(\"check_bank\", { length: 100 }),\n  status: text(\"status\").notNull().default(\"مسودة\"), // \"مسودة\" أو \"منشور\"\n  notes: text(\"notes\"),\n  entryId: varchar(\"entry_id\"), // القيد المحاسبي المرتبط (بعد النشر)\n  postedAt: timestamp(\"posted_at\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// جدول تخصيصات سند الدفع (ربط السند بفواتير شراء معينة)\nexport const paymentVoucherAllocations = pgTable(\"payment_voucher_allocations\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  voucherId: varchar(\"voucher_id\").notNull(),\n  purchaseInvoiceId: varchar(\"purchase_invoice_id\").notNull(),\n  amount: decimal(\"amount\", { precision: 15, scale: 2 }).notNull(),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// Schema للإدراج - سندات الدفع\nexport const insertPaymentVoucherSchema = createInsertSchema(paymentVouchers).omit({\n  id: true,\n  createdAt: true,\n  entryId: true,\n  postedAt: true,\n}).extend({\n  voucherNumber: z.string().min(1, \"رقم السند مطلوب\"),\n  voucherDate: z.string().or(z.date()),\n  supplierId: z.string().min(1, \"المورد مطلوب\"),\n  amount: z.string().or(z.number()).refine(\n    val => parseFloat(val.toString()) > 0, \n    \"المبلغ يجب أن يكون أكبر من صفر\"\n  ),\n  paymentMethod: z.enum([\"نقدي\", \"بنك\", \"شيك\"], {\n    errorMap: () => ({ message: \"طريقة الدفع غير صحيحة\" }),\n  }),\n  sourceAccountId: z.string().min(1, \"حساب الدفع مطلوب\"),\n  checkNumber: z.string().optional(),\n  checkDate: z.string().or(z.date()).optional(),\n  checkBank: z.string().optional(),\n  status: z.enum([\"مسودة\", \"منشور\"]).default(\"مسودة\"),\n  notes: z.string().optional(),\n});\n\n// Schema للإدراج - تخصيصات سند الدفع\nexport const insertPaymentVoucherAllocationSchema = createInsertSchema(paymentVoucherAllocations).omit({\n  id: true,\n  createdAt: true,\n}).extend({\n  voucherId: z.string().min(1),\n  purchaseInvoiceId: z.string().min(1, \"فاتورة الشراء مطلوبة\"),\n  amount: z.string().or(z.number()).refine(\n    val => parseFloat(val.toString()) > 0, \n    \"المبلغ يجب أن يكون أكبر من صفر\"\n  ),\n});\n\n// Schema لسند الدفع الكامل مع التخصيصات\nexport const insertFullPaymentVoucherSchema = z.object({\n  voucherNumber: z.string().min(1, \"رقم السند مطلوب\"),\n  voucherDate: z.string().or(z.date()),\n  supplierId: z.string().min(1, \"المورد مطلوب\"),\n  amount: z.string().or(z.number()).refine(\n    val => parseFloat(val.toString()) > 0, \n    \"المبلغ يجب أن يكون أكبر من صفر\"\n  ),\n  paymentMethod: z.enum([\"نقدي\", \"بنك\", \"شيك\"], {\n    errorMap: () => ({ message: \"طريقة الدفع غير صحيحة\" }),\n  }),\n  sourceAccountId: z.string().min(1, \"حساب الدفع مطلوب\"),\n  checkNumber: z.string().optional(),\n  checkDate: z.string().or(z.date()).optional(),\n  checkBank: z.string().optional(),\n  notes: z.string().optional(),\n  allocations: z.array(\n    z.object({\n      purchaseInvoiceId: z.string().min(1, \"فاتورة الشراء مطلوبة\"),\n      amount: z.string().or(z.number()).refine(\n        val => parseFloat(val.toString()) > 0, \n        \"المبلغ يجب أن يكون أكبر من صفر\"\n      ),\n    })\n  ).optional().default([]),\n}).refine(\n  (data) => {\n    // If allocations exist, their sum must not exceed the voucher amount\n    if (data.allocations && data.allocations.length > 0) {\n      const totalAllocations = data.allocations.reduce(\n        (sum, allocation) => sum + parseFloat(allocation.amount.toString()),\n        0\n      );\n      const voucherAmount = parseFloat(data.amount.toString());\n      return totalAllocations <= voucherAmount + 0.01; // Allow small tolerance\n    }\n    return true;\n  },\n  {\n    message: \"مجموع التخصيصات لا يمكن أن يتجاوز مبلغ السند\",\n    path: [\"allocations\"],\n  }\n);\n\n// أنواع TypeScript - سندات الدفع\nexport type InsertPaymentVoucher = z.infer<typeof insertPaymentVoucherSchema>;\nexport type PaymentVoucher = typeof paymentVouchers.$inferSelect;\nexport type InsertPaymentVoucherAllocation = z.infer<typeof insertPaymentVoucherAllocationSchema>;\nexport type PaymentVoucherAllocation = typeof paymentVoucherAllocations.$inferSelect;\nexport type InsertFullPaymentVoucher = z.infer<typeof insertFullPaymentVoucherSchema>;\n\n// نوع لسند الدفع الكامل مع التفاصيل\nexport type FullPaymentVoucher = PaymentVoucher & {\n  allocations: (PaymentVoucherAllocation & { invoiceNumber?: string })[];\n  supplierName?: string;\n  sourceAccountName?: string;\n};\n","size_bytes":29161},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/pages/projects/ProjectsList.tsx":{"content":"import { FolderKanban } from \"lucide-react\";\n\nexport default function ProjectsList() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <FolderKanban className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          إدارة المشاريع\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: عرض وإدارة جميع المشاريع\n      </p>\n    </div>\n  );\n}\n","size_bytes":516},"client/src/pages/fixed-assets/Depreciation.tsx":{"content":"import { TrendingDown } from \"lucide-react\";\n\nexport default function Depreciation() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <TrendingDown className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          الإهلاك\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة إهلاك الأصول الثابتة\n      </p>\n    </div>\n  );\n}\n","size_bytes":507},"client/src/pages/inventory/reports/ItemMovement.tsx":{"content":"import { RotateCcw } from \"lucide-react\";\n\nexport default function ItemMovement() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <RotateCcw className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          حركة الأصناف\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تقرير حركة الأصناف التفصيلي\n      </p>\n    </div>\n  );\n}\n","size_bytes":512},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/pages/meetings/MeetingsList.tsx":{"content":"import { Calendar } from \"lucide-react\";\n\nexport default function MeetingsList() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Calendar className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          الاجتماعات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: جدولة وإدارة الاجتماعات\n      </p>\n    </div>\n  );\n}\n","size_bytes":500},"client/src/pages/transactions/Receipts.tsx":{"content":"import { Receipt } from \"lucide-react\";\n\nexport default function Receipts() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Receipt className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          سندات القبض\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة سندات القبض والمقبوضات النقدية\n      </p>\n    </div>\n  );\n}\n","size_bytes":519},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/pages/bi/Trends.tsx":{"content":"import { TrendingUp } from \"lucide-react\";\n\nexport default function Trends() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <TrendingUp className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          الاتجاهات والتنبؤات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تحليل الاتجاهات والتنبؤ بالمستقبل\n      </p>\n    </div>\n  );\n}\n","size_bytes":534},"client/src/pages/shipping/Shipments.tsx":{"content":"import { Package } from \"lucide-react\";\n\nexport default function Shipments() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Package className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          إدارة الشحنات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة وتتبع الشحنات\n      </p>\n    </div>\n  );\n}\n","size_bytes":492},"client/src/pages/master/Suppliers.tsx":{"content":"import { useState } from \"react\";\nimport { UserPlus, Save, Trash2, Plus } from \"lucide-react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { insertSupplierSchema, type InsertSupplier, type Supplier } from \"@shared/schema\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n  FormDescription,\n} from \"@/components/ui/form\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\n\nexport default function Suppliers() {\n  const { toast } = useToast();\n  const [selectedSupplier, setSelectedSupplier] = useState<Supplier | null>(null);\n\n  const form = useForm<InsertSupplier>({\n    resolver: zodResolver(insertSupplierSchema),\n    defaultValues: {\n      code: \"\",\n      name: \"\",\n      phone: \"\",\n      email: \"\",\n      address: \"\",\n      taxNumber: \"\",\n      openingBalance: \"0\",\n      isActive: 1,\n    },\n  });\n\n  // Fetch all suppliers\n  const { data: suppliers, isLoading, isError, error } = useQuery<Supplier[]>({\n    queryKey: [\"/api/suppliers\"],\n  });\n\n  // Create supplier mutation\n  const createMutation = useMutation({\n    mutationFn: async (data: InsertSupplier) => {\n      return await apiRequest(\"POST\", \"/api/suppliers\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/suppliers\"] });\n      toast({\n        title: \"تم الحفظ بنجاح\",\n        description: \"تم إضافة المورد بنجاح وإنشاء حساب محاسبي مرتبط\",\n      });\n      handleReset();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"خطأ\",\n        description: error.message || \"فشل في إضافة المورد\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Update supplier mutation\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: InsertSupplier }) => {\n      return await apiRequest(\"PUT\", `/api/suppliers/${id}`, data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/suppliers\"] });\n      toast({\n        title: \"تم التحديث بنجاح\",\n        description: \"تم تحديث بيانات المورد بنجاح\",\n      });\n      handleReset();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"خطأ\",\n        description: error.message || \"فشل في تحديث المورد\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Delete supplier mutation\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return await apiRequest(\"DELETE\", `/api/suppliers/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/suppliers\"] });\n      toast({\n        title: \"تم الحذف بنجاح\",\n        description: \"تم حذف المورد بنجاح\",\n      });\n      handleReset();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"خطأ\",\n        description: error.message || \"فشل في حذف المورد\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: InsertSupplier) => {\n    if (selectedSupplier) {\n      updateMutation.mutate({ id: selectedSupplier.id, data });\n    } else {\n      createMutation.mutate(data);\n    }\n  };\n\n  const handleReset = () => {\n    setSelectedSupplier(null);\n    form.reset({\n      code: \"\",\n      name: \"\",\n      phone: \"\",\n      email: \"\",\n      address: \"\",\n      taxNumber: \"\",\n      openingBalance: \"0\",\n      isActive: 1,\n    });\n  };\n\n  const handleDelete = () => {\n    if (selectedSupplier) {\n      if (confirm(\"هل أنت متأكد من حذف هذا المورد؟ سيتم حذف الحساب المحاسبي المرتبط أيضاً.\")) {\n        deleteMutation.mutate(selectedSupplier.id);\n      }\n    }\n  };\n\n  const handleRowClick = (supplier: Supplier) => {\n    setSelectedSupplier(supplier);\n    form.reset({\n      code: supplier.code,\n      name: supplier.name,\n      phone: supplier.phone || \"\",\n      email: supplier.email || \"\",\n      address: supplier.address || \"\",\n      taxNumber: supplier.taxNumber || \"\",\n      openingBalance: supplier.openingBalance,\n      isActive: supplier.isActive,\n    });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <UserPlus className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          إدارة بيانات الموردين\n        </h1>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>\n            {selectedSupplier ? \"تعديل بيانات مورد\" : \"إضافة مورد جديد\"}\n          </CardTitle>\n          <CardDescription>\n            قم بإدخال بيانات المورد. سيتم إنشاء حساب محاسبي مرتبط تلقائياً\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"code\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>كود المورد *</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          placeholder=\"مثال: S001\"\n                          data-testid=\"input-supplier-code\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"name\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>اسم المورد *</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          placeholder=\"أدخل اسم المورد\"\n                          data-testid=\"input-supplier-name\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"phone\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>رقم الهاتف</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          placeholder=\"05xxxxxxxx\"\n                          data-testid=\"input-supplier-phone\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"email\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>البريد الإلكتروني</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          type=\"email\"\n                          placeholder=\"example@email.com\"\n                          data-testid=\"input-supplier-email\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"taxNumber\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>الرقم الضريبي / السجل التجاري</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          placeholder=\"رقم السجل أو الرقم الضريبي\"\n                          data-testid=\"input-supplier-tax\"\n                        />\n                      </FormControl>\n                      <FormDescription>\n                        للشركات فقط (متوافق مع الزكاة والدخل)\n                      </FormDescription>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"openingBalance\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>الرصيد الافتتاحي</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          type=\"number\"\n                          step=\"0.01\"\n                          placeholder=\"0.00\"\n                          data-testid=\"input-opening-balance\"\n                        />\n                      </FormControl>\n                      <FormDescription>\n                        الرصيد الدائن للمورد عند البداية (المبالغ المستحقة للمورد)\n                      </FormDescription>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <FormField\n                control={form.control}\n                name=\"address\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>العنوان</FormLabel>\n                    <FormControl>\n                      <Textarea\n                        {...field}\n                        placeholder=\"أدخل عنوان المورد بالتفصيل\"\n                        rows={3}\n                        data-testid=\"input-supplier-address\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <div className=\"flex gap-2 flex-wrap\">\n                <Button\n                  type=\"submit\"\n                  disabled={createMutation.isPending || updateMutation.isPending}\n                  data-testid=\"button-save\"\n                >\n                  <Save className=\"w-4 h-4 ml-2\" />\n                  {selectedSupplier ? \"تحديث\" : \"حفظ\"}\n                </Button>\n\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={handleReset}\n                  data-testid=\"button-reset\"\n                >\n                  <Plus className=\"w-4 h-4 ml-2\" />\n                  جديد\n                </Button>\n\n                {selectedSupplier && (\n                  <Button\n                    type=\"button\"\n                    variant=\"destructive\"\n                    onClick={handleDelete}\n                    disabled={deleteMutation.isPending}\n                    data-testid=\"button-delete\"\n                  >\n                    <Trash2 className=\"w-4 h-4 ml-2\" />\n                    حذف\n                  </Button>\n                )}\n              </div>\n            </form>\n          </Form>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between flex-wrap gap-2\">\n            <div>\n              <CardTitle>قائمة الموردين</CardTitle>\n              <CardDescription>\n                اضغط على أي مورد لتعديله أو حذفه\n              </CardDescription>\n            </div>\n            {suppliers && (\n              <Badge variant=\"secondary\" data-testid=\"text-supplier-count\">\n                إجمالي الموردين: {suppliers.length}\n              </Badge>\n            )}\n          </div>\n        </CardHeader>\n        <CardContent>\n          {isLoading ? (\n            <div className=\"text-center py-12\">\n              <div className=\"inline-block w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mb-2\"></div>\n              <p className=\"text-muted-foreground\">جاري تحميل بيانات الموردين...</p>\n            </div>\n          ) : isError ? (\n            <div className=\"text-center py-12\">\n              <div className=\"text-destructive mb-2\">⚠️ حدث خطأ في تحميل البيانات</div>\n              <p className=\"text-sm text-muted-foreground\">\n                {error instanceof Error ? error.message : \"فشل في جلب بيانات الموردين\"}\n              </p>\n              <Button \n                variant=\"outline\" \n                size=\"sm\" \n                className=\"mt-4\"\n                onClick={() => queryClient.invalidateQueries({ queryKey: [\"/api/suppliers\"] })}\n              >\n                إعادة المحاولة\n              </Button>\n            </div>\n          ) : suppliers && suppliers.length > 0 ? (\n            <div className=\"border rounded-md overflow-x-auto\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>الكود</TableHead>\n                    <TableHead>الاسم</TableHead>\n                    <TableHead>الهاتف</TableHead>\n                    <TableHead>البريد</TableHead>\n                    <TableHead>الرقم الضريبي</TableHead>\n                    <TableHead className=\"text-left\">الرصيد الحالي</TableHead>\n                    <TableHead>الحالة</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {suppliers.map((supplier) => (\n                    <TableRow\n                      key={supplier.id}\n                      onClick={() => handleRowClick(supplier)}\n                      className={`cursor-pointer hover-elevate ${\n                        selectedSupplier?.id === supplier.id\n                          ? \"bg-muted\"\n                          : \"\"\n                      }`}\n                      data-testid={`row-supplier-${supplier.id}`}\n                    >\n                      <TableCell className=\"font-medium\" data-testid={`text-code-${supplier.id}`}>\n                        {supplier.code}\n                      </TableCell>\n                      <TableCell data-testid={`text-name-${supplier.id}`}>\n                        {supplier.name}\n                      </TableCell>\n                      <TableCell data-testid={`text-phone-${supplier.id}`}>\n                        {supplier.phone || \"-\"}\n                      </TableCell>\n                      <TableCell data-testid={`text-email-${supplier.id}`}>\n                        {supplier.email || \"-\"}\n                      </TableCell>\n                      <TableCell data-testid={`text-tax-${supplier.id}`}>\n                        {supplier.taxNumber || \"-\"}\n                      </TableCell>\n                      <TableCell \n                        className={`text-left font-semibold ${\n                          parseFloat(supplier.currentBalance) > 0 \n                            ? \"text-green-600 dark:text-green-400\" \n                            : parseFloat(supplier.currentBalance) < 0\n                            ? \"text-red-600 dark:text-red-400\"\n                            : \"\"\n                        }`}\n                        data-testid={`text-balance-${supplier.id}`}\n                      >\n                        {parseFloat(supplier.currentBalance).toFixed(2)} ر.س\n                      </TableCell>\n                      <TableCell data-testid={`text-status-${supplier.id}`}>\n                        <Badge variant={supplier.isActive ? \"default\" : \"secondary\"}>\n                          {supplier.isActive ? \"نشط\" : \"غير نشط\"}\n                        </Badge>\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </div>\n          ) : (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              لا يوجد موردين مسجلين. قم بإضافة مورد جديد من الأعلى.\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":16987},"client/src/pages/Reports.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Download, FileText, TrendingUp, TrendingDown } from \"lucide-react\";\nimport type { IncomeStatementData, BalanceSheetData } from \"@shared/schema\";\n\nexport default function Reports() {\n  const [dateFrom, setDateFrom] = useState(\n    new Date(new Date().getFullYear(), 0, 1).toISOString().split(\"T\")[0]\n  );\n  const [dateTo, setDateTo] = useState(new Date().toISOString().split(\"T\")[0]);\n\n  const { data: incomeStatement, isLoading: isLoadingIncome } = useQuery<IncomeStatementData>({\n    queryKey: [\"/api/reports/income-statement\", dateFrom, dateTo],\n  });\n\n  const { data: balanceSheet, isLoading: isLoadingBalance } = useQuery<BalanceSheetData>({\n    queryKey: [\"/api/reports/balance-sheet\", dateTo],\n  });\n\n  return (\n    <div className=\"p-8 space-y-6\" data-testid=\"page-reports\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold mb-2\" data-testid=\"text-page-title\">\n            التقارير المالية\n          </h1>\n          <p className=\"text-muted-foreground\">\n            قائمة الدخل والميزانية العمومية\n          </p>\n        </div>\n      </div>\n\n      {/* Date Filters */}\n      <Card className=\"p-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 items-end\">\n          <div>\n            <label className=\"text-sm font-medium mb-2 block\">من تاريخ</label>\n            <Input\n              type=\"date\"\n              value={dateFrom}\n              onChange={(e) => setDateFrom(e.target.value)}\n              data-testid=\"input-date-from\"\n            />\n          </div>\n          <div>\n            <label className=\"text-sm font-medium mb-2 block\">إلى تاريخ</label>\n            <Input\n              type=\"date\"\n              value={dateTo}\n              onChange={(e) => setDateTo(e.target.value)}\n              data-testid=\"input-date-to\"\n            />\n          </div>\n          <Button variant=\"outline\" data-testid=\"button-export-report\">\n            <Download className=\"w-5 h-5 me-2\" />\n            تصدير PDF\n          </Button>\n        </div>\n      </Card>\n\n      {/* Reports Tabs */}\n      <Tabs defaultValue=\"income\" className=\"space-y-6\">\n        <TabsList className=\"grid w-full md:w-auto grid-cols-2 md:grid-cols-2\">\n          <TabsTrigger value=\"income\" data-testid=\"tab-income-statement\">\n            <TrendingUp className=\"w-4 h-4 me-2\" />\n            قائمة الدخل\n          </TabsTrigger>\n          <TabsTrigger value=\"balance\" data-testid=\"tab-balance-sheet\">\n            <FileText className=\"w-4 h-4 me-2\" />\n            الميزانية العمومية\n          </TabsTrigger>\n        </TabsList>\n\n        {/* Income Statement */}\n        <TabsContent value=\"income\">\n          {isLoadingIncome ? (\n            <div className=\"h-96 bg-muted rounded animate-pulse\"></div>\n          ) : (\n            <Card className=\"p-8\">\n              <div className=\"text-center mb-8\">\n                <h2 className=\"text-2xl font-bold mb-2\" data-testid=\"text-income-statement-title\">\n                  قائمة الدخل\n                </h2>\n                <p className=\"text-muted-foreground\">\n                  من {new Date(dateFrom).toLocaleDateString(\"ar-SA\")} إلى{\" \"}\n                  {new Date(dateTo).toLocaleDateString(\"ar-SA\")}\n                </p>\n              </div>\n\n              {/* Revenues */}\n              <div className=\"mb-8\">\n                <div className=\"bg-green-100 dark:bg-green-950/20 p-4 rounded-lg mb-4\">\n                  <h3 className=\"text-xl font-bold flex items-center gap-2\">\n                    <TrendingUp className=\"w-5 h-5 text-green-600\" />\n                    الإيرادات\n                  </h3>\n                </div>\n                <div className=\"space-y-2 mb-4\">\n                  {incomeStatement?.revenues && incomeStatement.revenues.length > 0 ? (\n                    incomeStatement.revenues.map((item, index) => (\n                      <div\n                        key={index}\n                        className=\"flex justify-between p-3 hover-elevate rounded\"\n                        data-testid={`revenue-item-${index}`}\n                      >\n                        <span>{item.accountName}</span>\n                        <span className=\"font-mono font-medium\">{item.amount} ريال</span>\n                      </div>\n                    ))\n                  ) : (\n                    <p className=\"text-muted-foreground text-center py-4\">لا توجد إيرادات</p>\n                  )}\n                </div>\n                <div className=\"flex justify-between p-4 bg-muted rounded-lg font-bold\">\n                  <span>إجمالي الإيرادات</span>\n                  <span className=\"font-mono text-green-600\" data-testid=\"text-total-revenues\">\n                    {incomeStatement?.totalRevenues || \"0\"} ريال\n                  </span>\n                </div>\n              </div>\n\n              {/* Expenses */}\n              <div className=\"mb-8\">\n                <div className=\"bg-red-100 dark:bg-red-950/20 p-4 rounded-lg mb-4\">\n                  <h3 className=\"text-xl font-bold flex items-center gap-2\">\n                    <TrendingDown className=\"w-5 h-5 text-red-600\" />\n                    المصروفات\n                  </h3>\n                </div>\n                <div className=\"space-y-2 mb-4\">\n                  {incomeStatement?.expenses && incomeStatement.expenses.length > 0 ? (\n                    incomeStatement.expenses.map((item, index) => (\n                      <div\n                        key={index}\n                        className=\"flex justify-between p-3 hover-elevate rounded\"\n                        data-testid={`expense-item-${index}`}\n                      >\n                        <span>{item.accountName}</span>\n                        <span className=\"font-mono font-medium\">{item.amount} ريال</span>\n                      </div>\n                    ))\n                  ) : (\n                    <p className=\"text-muted-foreground text-center py-4\">لا توجد مصروفات</p>\n                  )}\n                </div>\n                <div className=\"flex justify-between p-4 bg-muted rounded-lg font-bold\">\n                  <span>إجمالي المصروفات</span>\n                  <span className=\"font-mono text-red-600\" data-testid=\"text-total-expenses\">\n                    {incomeStatement?.totalExpenses || \"0\"} ريال\n                  </span>\n                </div>\n              </div>\n\n              {/* Net Income */}\n              <div\n                className={`p-6 rounded-lg text-center ${\n                  Number(incomeStatement?.netIncome || 0) >= 0\n                    ? \"bg-green-100 dark:bg-green-950/20 border-2 border-green-500\"\n                    : \"bg-red-100 dark:bg-red-950/20 border-2 border-red-500\"\n                }`}\n              >\n                <h3 className=\"text-2xl font-bold mb-2\">\n                  {Number(incomeStatement?.netIncome || 0) >= 0 ? \"صافي الربح\" : \"صافي الخسارة\"}\n                </h3>\n                <p\n                  className={`text-4xl font-bold font-mono ${\n                    Number(incomeStatement?.netIncome || 0) >= 0 ? \"text-green-600\" : \"text-red-600\"\n                  }`}\n                  data-testid=\"text-net-income\"\n                >\n                  {incomeStatement?.netIncome || \"0\"} ريال\n                </p>\n              </div>\n            </Card>\n          )}\n        </TabsContent>\n\n        {/* Balance Sheet */}\n        <TabsContent value=\"balance\">\n          {isLoadingBalance ? (\n            <div className=\"h-96 bg-muted rounded animate-pulse\"></div>\n          ) : (\n            <Card className=\"p-8\">\n              <div className=\"text-center mb-8\">\n                <h2 className=\"text-2xl font-bold mb-2\" data-testid=\"text-balance-sheet-title\">\n                  الميزانية العمومية\n                </h2>\n                <p className=\"text-muted-foreground\">\n                  كما في {new Date(dateTo).toLocaleDateString(\"ar-SA\")}\n                </p>\n              </div>\n\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n                {/* Assets */}\n                <div>\n                  <div className=\"bg-blue-100 dark:bg-blue-950/20 p-4 rounded-lg mb-4\">\n                    <h3 className=\"text-xl font-bold\">الأصول</h3>\n                  </div>\n                  <div className=\"space-y-2 mb-4\">\n                    {balanceSheet?.assets && balanceSheet.assets.length > 0 ? (\n                      balanceSheet.assets.map((item, index) => (\n                        <div\n                          key={index}\n                          className=\"flex justify-between p-3 hover-elevate rounded\"\n                          data-testid={`asset-item-${index}`}\n                        >\n                          <span>{item.accountName}</span>\n                          <span className=\"font-mono font-medium\">{item.amount} ريال</span>\n                        </div>\n                      ))\n                    ) : (\n                      <p className=\"text-muted-foreground text-center py-4\">لا توجد أصول</p>\n                    )}\n                  </div>\n                  <div className=\"flex justify-between p-4 bg-muted rounded-lg font-bold\">\n                    <span>إجمالي الأصول</span>\n                    <span className=\"font-mono\" data-testid=\"text-total-assets\">\n                      {balanceSheet?.totalAssets || \"0\"} ريال\n                    </span>\n                  </div>\n                </div>\n\n                {/* Liabilities & Equity */}\n                <div>\n                  {/* Liabilities */}\n                  <div className=\"mb-6\">\n                    <div className=\"bg-orange-100 dark:bg-orange-950/20 p-4 rounded-lg mb-4\">\n                      <h3 className=\"text-xl font-bold\">الخصوم</h3>\n                    </div>\n                    <div className=\"space-y-2 mb-4\">\n                      {balanceSheet?.liabilities && balanceSheet.liabilities.length > 0 ? (\n                        balanceSheet.liabilities.map((item, index) => (\n                          <div\n                            key={index}\n                            className=\"flex justify-between p-3 hover-elevate rounded\"\n                            data-testid={`liability-item-${index}`}\n                          >\n                            <span>{item.accountName}</span>\n                            <span className=\"font-mono font-medium\">{item.amount} ريال</span>\n                          </div>\n                        ))\n                      ) : (\n                        <p className=\"text-muted-foreground text-center py-4\">لا توجد خصوم</p>\n                      )}\n                    </div>\n                    <div className=\"flex justify-between p-4 bg-muted rounded-lg font-bold\">\n                      <span>إجمالي الخصوم</span>\n                      <span className=\"font-mono\" data-testid=\"text-total-liabilities\">\n                        {balanceSheet?.totalLiabilities || \"0\"} ريال\n                      </span>\n                    </div>\n                  </div>\n\n                  {/* Equity */}\n                  <div>\n                    <div className=\"bg-purple-100 dark:bg-purple-950/20 p-4 rounded-lg mb-4\">\n                      <h3 className=\"text-xl font-bold\">حقوق الملكية</h3>\n                    </div>\n                    <div className=\"space-y-2 mb-4\">\n                      {balanceSheet?.equity && balanceSheet.equity.length > 0 ? (\n                        balanceSheet.equity.map((item, index) => (\n                          <div\n                            key={index}\n                            className=\"flex justify-between p-3 hover-elevate rounded\"\n                            data-testid={`equity-item-${index}`}\n                          >\n                            <span>{item.accountName}</span>\n                            <span className=\"font-mono font-medium\">{item.amount} ريال</span>\n                          </div>\n                        ))\n                      ) : (\n                        <p className=\"text-muted-foreground text-center py-4\">لا توجد حقوق ملكية</p>\n                      )}\n                    </div>\n                    <div className=\"flex justify-between p-4 bg-muted rounded-lg font-bold\">\n                      <span>إجمالي حقوق الملكية</span>\n                      <span className=\"font-mono\" data-testid=\"text-total-equity\">\n                        {balanceSheet?.totalEquity || \"0\"} ريال\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </Card>\n          )}\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n","size_bytes":13263},"client/src/pages/quality/QualityReports.tsx":{"content":"import { FileText } from \"lucide-react\";\n\nexport default function QualityReports() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <FileText className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          تقارير الجودة\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تقارير شاملة عن أداء الجودة\n      </p>\n    </div>\n  );\n}\n","size_bytes":513},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/pages/sales/Returns.tsx":{"content":"export { default } from './SalesReturns';\n","size_bytes":42},"client/src/pages/crm/Leads.tsx":{"content":"import { Users } from \"lucide-react\";\n\nexport default function Leads() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Users className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          العملاء المحتملون\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة العملاء المحتملون وتتبع الفرص البيعية\n      </p>\n    </div>\n  );\n}\n","size_bytes":537},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/pages/inventory/Items.tsx":{"content":"import { useState } from \"react\";\nimport { PackageCheck, Plus, Save, Trash2, X } from \"lucide-react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { insertProductSchema, type InsertProduct, type Product } from \"@shared/schema\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\n\nexport default function Items() {\n  const { toast } = useToast();\n  const [selectedProduct, setSelectedProduct] = useState<Product | null>(null);\n\n  const form = useForm<InsertProduct>({\n    resolver: zodResolver(insertProductSchema),\n    defaultValues: {\n      itemCode: \"\",\n      itemName: \"\",\n      unit: \"حبة\",\n      salePrice: \"0\",\n      costPrice: \"0\",\n    },\n  });\n\n  // Fetch all products\n  const { data: products, isLoading } = useQuery<Product[]>({\n    queryKey: [\"/api/products\"],\n  });\n\n  // Create product mutation\n  const createMutation = useMutation({\n    mutationFn: async (data: InsertProduct) => {\n      return await apiRequest(\"POST\", \"/api/products\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/products\"] });\n      toast({\n        title: \"تم الحفظ بنجاح\",\n        description: \"تم إضافة الصنف بنجاح\",\n      });\n      handleReset();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"خطأ\",\n        description: error.message || \"فشل في إضافة الصنف\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Update product mutation\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: InsertProduct }) => {\n      return await apiRequest(\"PUT\", `/api/products/${id}`, data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/products\"] });\n      toast({\n        title: \"تم التحديث بنجاح\",\n        description: \"تم تحديث بيانات الصنف بنجاح\",\n      });\n      handleReset();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"خطأ\",\n        description: error.message || \"فشل في تحديث الصنف\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Delete product mutation\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return await apiRequest(\"DELETE\", `/api/products/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/products\"] });\n      toast({\n        title: \"تم الحذف بنجاح\",\n        description: \"تم حذف الصنف بنجاح\",\n      });\n      handleReset();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"خطأ\",\n        description: error.message || \"فشل في حذف الصنف\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: InsertProduct) => {\n    if (selectedProduct) {\n      updateMutation.mutate({ id: selectedProduct.id, data });\n    } else {\n      createMutation.mutate(data);\n    }\n  };\n\n  const handleReset = () => {\n    setSelectedProduct(null);\n    form.reset({\n      itemCode: \"\",\n      itemName: \"\",\n      unit: \"حبة\",\n      salePrice: \"0\",\n      costPrice: \"0\",\n    });\n  };\n\n  const handleDelete = () => {\n    if (selectedProduct) {\n      if (confirm(\"هل أنت متأكد من حذف هذا الصنف؟\")) {\n        deleteMutation.mutate(selectedProduct.id);\n      }\n    }\n  };\n\n  const handleRowClick = (product: Product) => {\n    setSelectedProduct(product);\n    form.reset({\n      itemCode: product.itemCode,\n      itemName: product.itemName,\n      unit: product.unit as \"حبة\" | \"كرتون\" | \"كيلو\",\n      salePrice: product.salePrice,\n      costPrice: product.costPrice,\n    });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <PackageCheck className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          إدارة بطاقات الأصناف\n        </h1>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>\n            {selectedProduct ? \"تعديل صنف\" : \"إضافة صنف جديد\"}\n          </CardTitle>\n          <CardDescription>\n            قم بإدخال بيانات الصنف في الحقول التالية\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"itemCode\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>كود الصنف</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          placeholder=\"أدخل كود الصنف\"\n                          data-testid=\"input-item-code\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"itemName\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>اسم الصنف</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          placeholder=\"أدخل اسم الصنف\"\n                          data-testid=\"input-item-name\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"unit\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>الوحدة</FormLabel>\n                      <Select\n                        onValueChange={field.onChange}\n                        value={field.value}\n                      >\n                        <FormControl>\n                          <SelectTrigger data-testid=\"select-unit\">\n                            <SelectValue placeholder=\"اختر الوحدة\" />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          <SelectItem value=\"حبة\">حبة</SelectItem>\n                          <SelectItem value=\"كرتون\">كرتون</SelectItem>\n                          <SelectItem value=\"كيلو\">كيلو</SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"salePrice\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>سعر البيع</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          type=\"number\"\n                          step=\"0.01\"\n                          placeholder=\"0.00\"\n                          data-testid=\"input-sale-price\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"costPrice\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>سعر التكلفة</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          type=\"number\"\n                          step=\"0.01\"\n                          placeholder=\"0.00\"\n                          data-testid=\"input-cost-price\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <div className=\"flex gap-2 flex-wrap\">\n                <Button\n                  type=\"submit\"\n                  disabled={createMutation.isPending || updateMutation.isPending}\n                  data-testid=\"button-save\"\n                >\n                  <Save className=\"w-4 h-4 ml-2\" />\n                  {selectedProduct ? \"تحديث\" : \"حفظ\"}\n                </Button>\n\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={handleReset}\n                  data-testid=\"button-reset\"\n                >\n                  <Plus className=\"w-4 h-4 ml-2\" />\n                  جديد\n                </Button>\n\n                {selectedProduct && (\n                  <Button\n                    type=\"button\"\n                    variant=\"destructive\"\n                    onClick={handleDelete}\n                    disabled={deleteMutation.isPending}\n                    data-testid=\"button-delete\"\n                  >\n                    <Trash2 className=\"w-4 h-4 ml-2\" />\n                    حذف\n                  </Button>\n                )}\n              </div>\n            </form>\n          </Form>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>قائمة الأصناف</CardTitle>\n          <CardDescription>\n            اضغط على أي صنف لتعديله أو حذفه\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {isLoading ? (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              جاري التحميل...\n            </div>\n          ) : products && products.length > 0 ? (\n            <div className=\"border rounded-md\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>كود الصنف</TableHead>\n                    <TableHead>اسم الصنف</TableHead>\n                    <TableHead>الوحدة</TableHead>\n                    <TableHead>سعر البيع</TableHead>\n                    <TableHead>سعر التكلفة</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {products.map((product) => (\n                    <TableRow\n                      key={product.id}\n                      onClick={() => handleRowClick(product)}\n                      className={`cursor-pointer hover-elevate ${\n                        selectedProduct?.id === product.id\n                          ? \"bg-muted\"\n                          : \"\"\n                      }`}\n                      data-testid={`row-product-${product.id}`}\n                    >\n                      <TableCell data-testid={`text-code-${product.id}`}>\n                        {product.itemCode}\n                      </TableCell>\n                      <TableCell data-testid={`text-name-${product.id}`}>\n                        {product.itemName}\n                      </TableCell>\n                      <TableCell data-testid={`text-unit-${product.id}`}>\n                        {product.unit}\n                      </TableCell>\n                      <TableCell data-testid={`text-sale-price-${product.id}`}>\n                        {parseFloat(product.salePrice).toFixed(2)}\n                      </TableCell>\n                      <TableCell data-testid={`text-cost-price-${product.id}`}>\n                        {parseFloat(product.costPrice).toFixed(2)}\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </div>\n          ) : (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              لا توجد أصناف مسجلة. قم بإضافة صنف جديد من الأعلى.\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":12945},"client/src/pages/crm/Opportunities.tsx":{"content":"import { TrendingUp } from \"lucide-react\";\n\nexport default function Opportunities() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <TrendingUp className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          الفرص البيعية\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة الفرص البيعية ومتابعة مراحل الصفقات\n      </p>\n    </div>\n  );\n}\n","size_bytes":543},"client/src/pages/risk-management/Mitigation.tsx":{"content":"import { Shield } from \"lucide-react\";\n\nexport default function RiskMitigation() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Shield className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          خطط المعالجة\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: وضع خطط معالجة المخاطر\n      </p>\n    </div>\n  );\n}\n","size_bytes":498},"client/src/pages/quality/NonConformance.tsx":{"content":"import { XCircle } from \"lucide-react\";\n\nexport default function NonConformance() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <XCircle className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          عدم المطابقة\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تسجيل ومعالجة حالات عدم المطابقة\n      </p>\n    </div>\n  );\n}\n","size_bytes":519},"client/src/pages/distributors/Targets.tsx":{"content":"import { Target } from \"lucide-react\";\n\nexport default function DistributorTargets() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Target className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          الحصص والأهداف\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تحديد أهداف المبيعات للوكلاء\n      </p>\n    </div>\n  );\n}\n","size_bytes":518},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/pages/quality/Inspections.tsx":{"content":"import { ClipboardCheck } from \"lucide-react\";\n\nexport default function Inspections() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <ClipboardCheck className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          الفحوصات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إجراء فحوصات الجودة وتسجيل النتائج\n      </p>\n    </div>\n  );\n}\n","size_bytes":527},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5741},"client/src/pages/Accounts.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { PlusCircle, Search, Edit, Trash2 } from \"lucide-react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { insertAccountSchema, type Account, type InsertAccount, type AccountType } from \"@shared/schema\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nconst accountTypes: AccountType[] = [\"أصول\", \"خصوم\", \"إيرادات\", \"مصروفات\", \"حقوق ملكية\"];\n\nexport default function Accounts() {\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const { toast } = useToast();\n\n  const { data: accounts, isLoading } = useQuery<Account[]>({\n    queryKey: [\"/api/accounts\"],\n  });\n\n  const form = useForm<InsertAccount>({\n    resolver: zodResolver(insertAccountSchema),\n    defaultValues: {\n      code: \"\",\n      name: \"\",\n      type: \"أصول\",\n      isActive: 1,\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: InsertAccount) => {\n      return apiRequest(\"POST\", \"/api/accounts\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/accounts\"] });\n      toast({\n        title: \"تم بنجاح\",\n        description: \"تم إضافة الحساب بنجاح\",\n      });\n      setIsDialogOpen(false);\n      form.reset();\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"خطأ\",\n        description: error.message || \"حدث خطأ أثناء إضافة الحساب\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const filteredAccounts = accounts?.filter(\n    (account) =>\n      account.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      account.code.includes(searchQuery)\n  );\n\n  const groupedAccounts = accountTypes.map((type) => ({\n    type,\n    accounts: filteredAccounts?.filter((acc) => acc.type === type) || [],\n  }));\n\n  return (\n    <div className=\"p-8 space-y-6\" data-testid=\"page-accounts\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold mb-2\" data-testid=\"text-page-title\">\n            دليل الحسابات\n          </h1>\n          <p className=\"text-muted-foreground\">\n            إدارة الحسابات المالية والتصنيفات\n          </p>\n        </div>\n        <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n          <DialogTrigger asChild>\n            <Button size=\"lg\" data-testid=\"button-new-account\">\n              <PlusCircle className=\"w-5 h-5 me-2\" />\n              حساب جديد\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"sm:max-w-md\">\n            <DialogHeader>\n              <DialogTitle>إضافة حساب جديد</DialogTitle>\n            </DialogHeader>\n            <Form {...form}>\n              <form\n                onSubmit={form.handleSubmit((data) => createMutation.mutate(data))}\n                className=\"space-y-4\"\n              >\n                <FormField\n                  control={form.control}\n                  name=\"code\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>رمز الحساب</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          placeholder=\"مثال: 1001\"\n                          data-testid=\"input-account-code\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={form.control}\n                  name=\"name\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>اسم الحساب</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          placeholder=\"مثال: النقدية بالصندوق\"\n                          data-testid=\"input-account-name\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={form.control}\n                  name=\"type\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>نوع الحساب</FormLabel>\n                      <Select\n                        onValueChange={field.onChange}\n                        defaultValue={field.value}\n                      >\n                        <FormControl>\n                          <SelectTrigger data-testid=\"select-account-type\">\n                            <SelectValue placeholder=\"اختر نوع الحساب\" />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          {accountTypes.map((type) => (\n                            <SelectItem key={type} value={type}>\n                              {type}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <div className=\"flex gap-2 justify-end pt-4\">\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    onClick={() => setIsDialogOpen(false)}\n                    data-testid=\"button-cancel\"\n                  >\n                    إلغاء\n                  </Button>\n                  <Button\n                    type=\"submit\"\n                    disabled={createMutation.isPending}\n                    data-testid=\"button-submit-account\"\n                  >\n                    {createMutation.isPending ? \"جاري الحفظ...\" : \"حفظ\"}\n                  </Button>\n                </div>\n              </form>\n            </Form>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      {/* Search */}\n      <Card className=\"p-4\">\n        <div className=\"relative\">\n          <Search className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5\" />\n          <Input\n            placeholder=\"البحث عن حساب...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"pe-10\"\n            data-testid=\"input-search-accounts\"\n          />\n        </div>\n      </Card>\n\n      {/* Accounts List */}\n      {isLoading ? (\n        <div className=\"space-y-4\">\n          {[1, 2, 3].map((i) => (\n            <div key={i} className=\"animate-pulse\">\n              <div className=\"h-6 bg-muted rounded w-32 mb-4\"></div>\n              <div className=\"h-24 bg-muted rounded\"></div>\n            </div>\n          ))}\n        </div>\n      ) : (\n        <div className=\"space-y-6\">\n          {groupedAccounts.map((group) =>\n            group.accounts.length > 0 ? (\n              <div key={group.type}>\n                <h2 className=\"text-xl font-bold mb-4 text-primary\" data-testid={`text-type-${group.type}`}>\n                  {group.type}\n                </h2>\n                <Card>\n                  <div className=\"overflow-x-auto\">\n                    <table className=\"w-full\">\n                      <thead className=\"bg-muted\">\n                        <tr>\n                          <th className=\"text-right p-4 font-medium\">رمز الحساب</th>\n                          <th className=\"text-right p-4 font-medium\">اسم الحساب</th>\n                          <th className=\"text-right p-4 font-medium\">الرصيد</th>\n                          <th className=\"text-right p-4 font-medium\">الحالة</th>\n                          <th className=\"text-right p-4 font-medium\">الإجراءات</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {group.accounts.map((account, index) => (\n                          <tr\n                            key={account.id}\n                            className={index % 2 === 0 ? \"bg-background\" : \"bg-muted/30\"}\n                            data-testid={`row-account-${account.id}`}\n                          >\n                            <td className=\"p-4 font-mono\" data-testid=\"text-account-code\">\n                              {account.code}\n                            </td>\n                            <td className=\"p-4\" data-testid=\"text-account-name\">\n                              {account.name}\n                            </td>\n                            <td className=\"p-4 font-mono font-medium\" data-testid=\"text-account-balance\">\n                              {account.balance} ريال\n                            </td>\n                            <td className=\"p-4\">\n                              <span\n                                className={`px-3 py-1 rounded-full text-xs ${\n                                  account.isActive\n                                    ? \"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100\"\n                                    : \"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-100\"\n                                }`}\n                                data-testid=\"text-account-status\"\n                              >\n                                {account.isActive ? \"نشط\" : \"غير نشط\"}\n                              </span>\n                            </td>\n                            <td className=\"p-4\">\n                              <div className=\"flex gap-2\">\n                                <Button\n                                  variant=\"ghost\"\n                                  size=\"icon\"\n                                  data-testid=\"button-edit-account\"\n                                >\n                                  <Edit className=\"w-4 h-4\" />\n                                </Button>\n                                <Button\n                                  variant=\"ghost\"\n                                  size=\"icon\"\n                                  data-testid=\"button-delete-account\"\n                                >\n                                  <Trash2 className=\"w-4 h-4\" />\n                                </Button>\n                              </div>\n                            </td>\n                          </tr>\n                        ))}\n                      </tbody>\n                    </table>\n                  </div>\n                </Card>\n              </div>\n            ) : null\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":11462},"client/src/pages/closing/CloseEntries.tsx":{"content":"import { Lock } from \"lucide-react\";\n\nexport default function CloseEntries() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Lock className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          إقفال القيود\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إقفال قيود نهاية الفترة المالية\n      </p>\n    </div>\n  );\n}\n","size_bytes":509},"client/src/pages/quality/QualityStandards.tsx":{"content":"import { Award } from \"lucide-react\";\n\nexport default function QualityStandards() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Award className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          معايير الجودة\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تحديد وإدارة معايير الجودة\n      </p>\n    </div>\n  );\n}\n","size_bytes":508},"client/src/pages/cash-bank/reports/AccountBalances.tsx":{"content":"import { Wallet } from \"lucide-react\";\n\nexport default function AccountBalances() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Wallet className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          أرصدة الحسابات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: عرض أرصدة الحسابات البنكية والصناديق\n      </p>\n    </div>\n  );\n}\n","size_bytes":530},"client/src/pages/purchasing/PurchaseInvoices.tsx":{"content":"import { FileCheck } from \"lucide-react\";\n\nexport default function PurchaseInvoices() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <FileCheck className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          فواتير المشتريات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة فواتير المشتريات\n      </p>\n    </div>\n  );\n}\n","size_bytes":515},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/pages/production/ProductionOrders.tsx":{"content":"import { ClipboardList } from \"lucide-react\";\n\nexport default function ProductionOrders() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <ClipboardList className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          أوامر الإنتاج\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة أوامر الإنتاج\n      </p>\n    </div>\n  );\n}\n","size_bytes":511},"client/src/pages/sales/reports/SalesReport.tsx":{"content":"import { TrendingUp } from \"lucide-react\";\n\nexport default function SalesReport() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <TrendingUp className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          تقرير المبيعات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تقرير المبيعات التفصيلي\n      </p>\n    </div>\n  );\n}\n","size_bytes":510},"client/src/pages/master/Currencies.tsx":{"content":"import { Coins } from \"lucide-react\";\n\nexport default function Currencies() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Coins className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          إدارة العملات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة العملات وأسعار الصرف\n      </p>\n    </div>\n  );\n}\n","size_bytes":502},"client/src/pages/fixed-assets/AssetMaintenance.tsx":{"content":"import { Wrench } from \"lucide-react\";\n\nexport default function AssetMaintenance() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Wrench className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          صيانة الأصول\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة صيانة الأصول\n      </p>\n    </div>\n  );\n}\n","size_bytes":493},"client/src/pages/reports/IncomeStatement.tsx":{"content":"import { TrendingUp } from \"lucide-react\";\n\nexport default function IncomeStatement() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <TrendingUp className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          قائمة الدخل\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: عرض قائمة الدخل التفصيلية\n      </p>\n    </div>\n  );\n}\n","size_bytes":511},"client/src/pages/budgets/BudgetReports.tsx":{"content":"import { FileText } from \"lucide-react\";\n\nexport default function BudgetReports() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <FileText className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          تقارير الميزانيات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تقارير شاملة عن الميزانيات والأداء المالي\n      </p>\n    </div>\n  );\n}\n","size_bytes":547},"client/src/pages/loyalty/Tiers.tsx":{"content":"import { Trophy } from \"lucide-react\";\n\nexport default function LoyaltyTiers() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Trophy className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          مستويات العضوية\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة مستويات عضوية العملاء\n      </p>\n    </div>\n  );\n}\n","size_bytes":512},"client/src/pages/Entries.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { PlusCircle, Trash2, AlertCircle } from \"lucide-react\";\nimport { useForm, useFieldArray } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { insertFullEntrySchema, type FullEntry, type Account, type InsertFullEntry } from \"@shared/schema\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function Entries() {\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const { toast } = useToast();\n\n  const { data: entries, isLoading } = useQuery<FullEntry[]>({\n    queryKey: [\"/api/entries\"],\n  });\n\n  const { data: accounts } = useQuery<Account[]>({\n    queryKey: [\"/api/accounts\"],\n  });\n\n  const form = useForm<InsertFullEntry>({\n    resolver: zodResolver(insertFullEntrySchema),\n    defaultValues: {\n      entryNumber: \"\",\n      date: new Date().toISOString().split(\"T\")[0],\n      description: \"\",\n      lines: [\n        { accountId: \"\", debit: \"0\", credit: \"0\", description: \"\" },\n        { accountId: \"\", debit: \"0\", credit: \"0\", description: \"\" },\n      ],\n    },\n  });\n\n  const { fields, append, remove } = useFieldArray({\n    control: form.control,\n    name: \"lines\",\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: InsertFullEntry) => {\n      return apiRequest(\"POST\", \"/api/entries\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/entries\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/stats\"] });\n      toast({\n        title: \"تم بنجاح\",\n        description: \"تم إضافة القيد المحاسبي بنجاح\",\n      });\n      setIsDialogOpen(false);\n      form.reset();\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"خطأ\",\n        description: error.message || \"حدث خطأ أثناء إضافة القيد\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const calculateTotals = () => {\n    const lines = form.watch(\"lines\");\n    const totalDebit = lines.reduce((sum, line) => sum + Number(line.debit || 0), 0);\n    const totalCredit = lines.reduce((sum, line) => sum + Number(line.credit || 0), 0);\n    return { totalDebit, totalCredit, isBalanced: totalDebit === totalCredit && totalDebit > 0 };\n  };\n\n  const totals = calculateTotals();\n\n  return (\n    <div className=\"p-8 space-y-6\" data-testid=\"page-entries\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold mb-2\" data-testid=\"text-page-title\">\n            القيود اليومية\n          </h1>\n          <p className=\"text-muted-foreground\">\n            تسجيل القيود المحاسبية بنظام القيد المزدوج\n          </p>\n        </div>\n        <Button\n          size=\"lg\"\n          onClick={() => setIsDialogOpen(true)}\n          data-testid=\"button-new-entry\"\n        >\n          <PlusCircle className=\"w-5 h-5 me-2\" />\n          قيد جديد\n        </Button>\n      </div>\n\n      {/* Entries List */}\n      {isLoading ? (\n        <div className=\"space-y-4\">\n          {[1, 2, 3].map((i) => (\n            <div key={i} className=\"h-32 bg-muted rounded animate-pulse\"></div>\n          ))}\n        </div>\n      ) : entries && entries.length > 0 ? (\n        <div className=\"space-y-4\">\n          {entries.map((entry) => (\n            <Card key={entry.id} className=\"p-6\" data-testid={`entry-card-${entry.id}`}>\n              <div className=\"flex items-start justify-between mb-4\">\n                <div>\n                  <div className=\"flex items-center gap-3 mb-2\">\n                    <h3 className=\"text-lg font-bold\" data-testid=\"text-entry-number\">\n                      قيد رقم: {entry.entryNumber}\n                    </h3>\n                    <span\n                      className={`px-3 py-1 rounded-full text-xs ${\n                        entry.isBalanced\n                          ? \"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100\"\n                          : \"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-100\"\n                      }`}\n                      data-testid=\"text-entry-status\"\n                    >\n                      {entry.isBalanced ? \"متوازن\" : \"غير متوازن\"}\n                    </span>\n                  </div>\n                  <p className=\"text-muted-foreground\" data-testid=\"text-entry-description\">\n                    {entry.description}\n                  </p>\n                </div>\n                <p className=\"text-sm text-muted-foreground\">\n                  {new Date(entry.date).toLocaleDateString(\"ar-SA\")}\n                </p>\n              </div>\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead className=\"bg-muted\">\n                    <tr>\n                      <th className=\"text-right p-3 font-medium\">الحساب</th>\n                      <th className=\"text-right p-3 font-medium\">البيان</th>\n                      <th className=\"text-right p-3 font-medium\">مدين</th>\n                      <th className=\"text-right p-3 font-medium\">دائن</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {entry.lines.map((line) => (\n                      <tr key={line.id} className=\"border-t\">\n                        <td className=\"p-3\">{line.accountName || line.accountId}</td>\n                        <td className=\"p-3 text-muted-foreground\">{line.description}</td>\n                        <td className=\"p-3 font-mono font-medium\">\n                          {Number(line.debit) > 0 ? `${line.debit} ريال` : \"-\"}\n                        </td>\n                        <td className=\"p-3 font-mono font-medium\">\n                          {Number(line.credit) > 0 ? `${line.credit} ريال` : \"-\"}\n                        </td>\n                      </tr>\n                    ))}\n                    <tr className=\"border-t font-bold bg-muted/50\">\n                      <td className=\"p-3\" colSpan={2}>\n                        الإجمالي\n                      </td>\n                      <td className=\"p-3 font-mono\" data-testid=\"text-total-debit\">\n                        {entry.totalDebit} ريال\n                      </td>\n                      <td className=\"p-3 font-mono\" data-testid=\"text-total-credit\">\n                        {entry.totalCredit} ريال\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </Card>\n          ))}\n        </div>\n      ) : (\n        <Card className=\"p-12 text-center\">\n          <PlusCircle className=\"w-16 h-16 mx-auto mb-4 text-muted-foreground opacity-50\" />\n          <h3 className=\"text-xl font-medium mb-2\">لا توجد قيود محاسبية</h3>\n          <p className=\"text-muted-foreground mb-6\">ابدأ بإضافة أول قيد محاسبي</p>\n          <Button onClick={() => setIsDialogOpen(true)} data-testid=\"button-create-first-entry\">\n            <PlusCircle className=\"w-5 h-5 me-2\" />\n            إضافة قيد جديد\n          </Button>\n        </Card>\n      )}\n\n      {/* Entry Dialog */}\n      <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n        <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>إضافة قيد محاسبي جديد</DialogTitle>\n          </DialogHeader>\n          <Form {...form}>\n            <form\n              onSubmit={form.handleSubmit((data) => createMutation.mutate(data))}\n              className=\"space-y-6\"\n            >\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"entryNumber\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>رقم القيد</FormLabel>\n                      <FormControl>\n                        <Input {...field} placeholder=\"مثال: JV-001\" data-testid=\"input-entry-number\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={form.control}\n                  name=\"date\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>التاريخ</FormLabel>\n                      <FormControl>\n                        <Input type=\"date\" {...field} data-testid=\"input-entry-date\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <FormField\n                control={form.control}\n                name=\"description\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>البيان</FormLabel>\n                    <FormControl>\n                      <Input {...field} placeholder=\"وصف القيد المحاسبي\" data-testid=\"input-entry-description\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              {/* Entry Lines */}\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center justify-between\">\n                  <h3 className=\"text-lg font-medium\">سطور القيد</h3>\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => append({ accountId: \"\", debit: \"0\", credit: \"0\", description: \"\" })}\n                    data-testid=\"button-add-line\"\n                  >\n                    <PlusCircle className=\"w-4 h-4 me-2\" />\n                    إضافة سطر\n                  </Button>\n                </div>\n\n                {fields.map((field, index) => (\n                  <Card key={field.id} className=\"p-4\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n                      <FormField\n                        control={form.control}\n                        name={`lines.${index}.accountId`}\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>الحساب</FormLabel>\n                            <Select onValueChange={field.onChange} value={field.value}>\n                              <FormControl>\n                                <SelectTrigger data-testid={`select-account-${index}`}>\n                                  <SelectValue placeholder=\"اختر حساب\" />\n                                </SelectTrigger>\n                              </FormControl>\n                              <SelectContent>\n                                {accounts?.map((account) => (\n                                  <SelectItem key={account.id} value={account.id}>\n                                    {account.code} - {account.name}\n                                  </SelectItem>\n                                ))}\n                              </SelectContent>\n                            </Select>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={form.control}\n                        name={`lines.${index}.debit`}\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>مدين</FormLabel>\n                            <FormControl>\n                              <Input\n                                type=\"number\"\n                                step=\"0.01\"\n                                {...field}\n                                data-testid={`input-debit-${index}`}\n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={form.control}\n                        name={`lines.${index}.credit`}\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>دائن</FormLabel>\n                            <FormControl>\n                              <Input\n                                type=\"number\"\n                                step=\"0.01\"\n                                {...field}\n                                data-testid={`input-credit-${index}`}\n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <div className=\"flex items-end\">\n                        <Button\n                          type=\"button\"\n                          variant=\"ghost\"\n                          size=\"icon\"\n                          onClick={() => remove(index)}\n                          disabled={fields.length <= 2}\n                          data-testid={`button-remove-line-${index}`}\n                        >\n                          <Trash2 className=\"w-4 h-4\" />\n                        </Button>\n                      </div>\n                    </div>\n                  </Card>\n                ))}\n              </div>\n\n              {/* Totals */}\n              <Card className={`p-4 ${!totals.isBalanced ? \"border-red-500\" : \"border-green-500\"}`}>\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-2\">\n                    {!totals.isBalanced && <AlertCircle className=\"w-5 h-5 text-red-500\" />}\n                    <span className=\"font-medium\">\n                      {totals.isBalanced ? \"القيد متوازن\" : \"القيد غير متوازن\"}\n                    </span>\n                  </div>\n                  <div className=\"flex gap-8\">\n                    <div>\n                      <span className=\"text-muted-foreground ms-2\">إجمالي المدين:</span>\n                      <span className=\"font-mono font-bold\" data-testid=\"text-dialog-total-debit\">\n                        {totals.totalDebit.toFixed(2)} ريال\n                      </span>\n                    </div>\n                    <div>\n                      <span className=\"text-muted-foreground ms-2\">إجمالي الدائن:</span>\n                      <span className=\"font-mono font-bold\" data-testid=\"text-dialog-total-credit\">\n                        {totals.totalCredit.toFixed(2)} ريال\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </Card>\n\n              <div className=\"flex gap-2 justify-end pt-4\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={() => setIsDialogOpen(false)}\n                  data-testid=\"button-cancel-entry\"\n                >\n                  إلغاء\n                </Button>\n                <Button\n                  type=\"submit\"\n                  disabled={createMutation.isPending || !totals.isBalanced}\n                  data-testid=\"button-submit-entry\"\n                >\n                  {createMutation.isPending ? \"جاري الحفظ...\" : \"حفظ القيد\"}\n                </Button>\n              </div>\n            </form>\n          </Form>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":16354},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21846},"client/src/pages/pos/SaleScreen.tsx":{"content":"import { MonitorPlay } from \"lucide-react\";\n\nexport default function SaleScreen() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <MonitorPlay className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          شاشة البيع - نقطة البيع\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: واجهة نقطة البيع الاحترافية للبيع السريع\n      </p>\n    </div>\n  );\n}\n","size_bytes":556},"client/src/pages/Dashboard.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { StatCard } from \"@/components/StatCard\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  TrendingUp,\n  TrendingDown,\n  DollarSign,\n  Wallet,\n  PlusCircle,\n  ArrowRight,\n  FileText,\n} from \"lucide-react\";\nimport { Link } from \"wouter\";\nimport type { DashboardStats } from \"@shared/schema\";\nimport {\n  LineChart,\n  Line,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n  Legend,\n} from \"recharts\";\n\nexport default function Dashboard() {\n  const { data: stats, isLoading } = useQuery<DashboardStats>({\n    queryKey: [\"/api/dashboard/stats\"],\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"p-8\">\n        <div className=\"animate-pulse space-y-6\">\n          <div className=\"h-8 bg-muted rounded w-48\"></div>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n            {[1, 2, 3, 4].map((i) => (\n              <div key={i} className=\"h-32 bg-muted rounded\"></div>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-8 space-y-8\" data-testid=\"page-dashboard\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold mb-2\" data-testid=\"text-page-title\">\n            لوحة التحكم\n          </h1>\n          <p className=\"text-muted-foreground\">\n            نظرة عامة على الوضع المالي للشركة\n          </p>\n        </div>\n        <Link href=\"/entries\">\n          <Button size=\"lg\" data-testid=\"button-new-entry\">\n            <PlusCircle className=\"w-5 h-5 me-2\" />\n            قيد جديد\n          </Button>\n        </Link>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <StatCard\n          title=\"إجمالي الإيرادات\"\n          value={`${stats?.totalRevenues || \"0\"} ريال`}\n          icon={<TrendingUp className=\"w-6 h-6\" />}\n          color=\"bg-green-600\"\n        />\n        <StatCard\n          title=\"إجمالي المصروفات\"\n          value={`${stats?.totalExpenses || \"0\"} ريال`}\n          icon={<TrendingDown className=\"w-6 h-6\" />}\n          color=\"bg-red-600\"\n        />\n        <StatCard\n          title=\"صافي الربح\"\n          value={`${stats?.netIncome || \"0\"} ريال`}\n          icon={<DollarSign className=\"w-6 h-6\" />}\n          color=\"bg-blue-600\"\n        />\n        <StatCard\n          title=\"الرصيد الإجمالي\"\n          value={`${stats?.totalBalance || \"0\"} ريال`}\n          icon={<Wallet className=\"w-6 h-6\" />}\n          color=\"bg-purple-600\"\n        />\n      </div>\n\n      {/* Chart */}\n      <Card className=\"p-6\">\n        <h2 className=\"text-xl font-bold mb-6\" data-testid=\"text-chart-title\">\n          الإيرادات والمصروفات الشهرية\n        </h2>\n        <div className=\"h-80\">\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\n            <LineChart data={stats?.monthlyData || []}>\n              <CartesianGrid strokeDasharray=\"3 3\" />\n              <XAxis dataKey=\"month\" />\n              <YAxis />\n              <Tooltip />\n              <Legend />\n              <Line\n                type=\"monotone\"\n                dataKey=\"revenues\"\n                stroke=\"hsl(var(--chart-1))\"\n                strokeWidth={2}\n                name=\"الإيرادات\"\n              />\n              <Line\n                type=\"monotone\"\n                dataKey=\"expenses\"\n                stroke=\"hsl(var(--chart-2))\"\n                strokeWidth={2}\n                name=\"المصروفات\"\n              />\n            </LineChart>\n          </ResponsiveContainer>\n        </div>\n      </Card>\n\n      {/* Recent Entries */}\n      <Card className=\"p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h2 className=\"text-xl font-bold\" data-testid=\"text-recent-title\">\n            آخر القيود المحاسبية\n          </h2>\n          <Link href=\"/entries\">\n            <Button variant=\"ghost\" size=\"sm\" data-testid=\"button-view-all\">\n              عرض الكل\n              <ArrowRight className=\"w-4 h-4 ms-2\" />\n            </Button>\n          </Link>\n        </div>\n        <div className=\"space-y-4\">\n          {stats?.recentEntries && stats.recentEntries.length > 0 ? (\n            stats.recentEntries.map((entry) => (\n              <div\n                key={entry.id}\n                className=\"flex items-center justify-between p-4 border rounded-lg hover-elevate\"\n                data-testid={`entry-item-${entry.id}`}\n              >\n                <div className=\"flex-1\">\n                  <p className=\"font-medium\" data-testid=\"text-entry-number\">\n                    {entry.entryNumber}\n                  </p>\n                  <p className=\"text-sm text-muted-foreground\" data-testid=\"text-entry-description\">\n                    {entry.description}\n                  </p>\n                </div>\n                <div className=\"text-start\">\n                  <p className=\"font-mono font-medium\" data-testid=\"text-entry-amount\">\n                    {entry.totalDebit} ريال\n                  </p>\n                  <p className=\"text-sm text-muted-foreground\">\n                    {new Date(entry.date).toLocaleDateString(\"ar-SA\")}\n                  </p>\n                </div>\n              </div>\n            ))\n          ) : (\n            <div className=\"text-center py-12 text-muted-foreground\">\n              <FileText className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\n              <p>لا توجد قيود محاسبية بعد</p>\n            </div>\n          )}\n        </div>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":5809},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/pages/closing/TransferBalances.tsx":{"content":"import { ArrowRightLeft } from \"lucide-react\";\n\nexport default function TransferBalances() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <ArrowRightLeft className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          ترحيل الأرصدة\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: ترحيل الأرصدة للفترة المالية الجديدة\n      </p>\n    </div>\n  );\n}\n","size_bytes":545},"client/src/pages/settings/Users.tsx":{"content":"import { Users } from \"lucide-react\";\n\nexport default function SettingsUsers() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Users className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          المستخدمين والصلاحيات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة مستخدمي النظام وصلاحياتهم\n      </p>\n    </div>\n  );\n}\n","size_bytes":531},"client/src/pages/shipping/Carriers.tsx":{"content":"import { Truck } from \"lucide-react\";\n\nexport default function Carriers() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Truck className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          شركات الشحن\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة شركات الشحن والناقلين\n      </p>\n    </div>\n  );\n}\n","size_bytes":498},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/pages/purchasing/PurchasingSuppliers.tsx":{"content":"import { Truck } from \"lucide-react\";\n\nexport default function PurchasingSuppliers() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Truck className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          بيانات الموردين\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة بيانات الموردين وسجلات المشتريات\n      </p>\n    </div>\n  );\n}\n","size_bytes":538},"client/src/pages/hr/reports/AttendanceReport.tsx":{"content":"import { Clock } from \"lucide-react\";\n\nexport default function AttendanceReport() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Clock className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          تقرير الحضور\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تقرير الحضور والغياب\n      </p>\n    </div>\n  );\n}\n","size_bytes":495},"client/src/pages/sales/SalesOrders.tsx":{"content":"import { ShoppingBag } from \"lucide-react\";\n\nexport default function SalesOrders() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <ShoppingBag className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          أوامر البيع\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة أوامر البيع والطلبات\n      </p>\n    </div>\n  );\n}\n","size_bytes":511},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/pages/master/ChartOfAccounts.tsx":{"content":"import { BookOpen } from \"lucide-react\";\n\nexport default function ChartOfAccounts() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <BookOpen className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          دليل الحسابات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: عرض وإدارة دليل الحسابات الكامل\n      </p>\n    </div>\n  );\n}\n","size_bytes":522},"client/src/pages/budgets/Variances.tsx":{"content":"import { AlertTriangle } from \"lucide-react\";\n\nexport default function Variances() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <AlertTriangle className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          تحليل الانحرافات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تحليل الفروقات بين الفعلي والمخطط\n      </p>\n    </div>\n  );\n}\n","size_bytes":536},"client/src/pages/distributors/Territories.tsx":{"content":"import { MapPin } from \"lucide-react\";\n\nexport default function Territories() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <MapPin className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          المناطق الجغرافية\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تحديد مناطق عمل الوكلاء\n      </p>\n    </div>\n  );\n}\n","size_bytes":507},"client/src/pages/maintenance/SpareParts.tsx":{"content":"import { Package } from \"lucide-react\";\n\nexport default function SpareParts() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Package className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          قطع الغيار\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة مخزون قطع الغيار\n      </p>\n    </div>\n  );\n}\n","size_bytes":492},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/pages/settings/ModuleManagement.tsx":{"content":"import { Settings, Check, X } from \"lucide-react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Button } from \"@/components/ui/button\";\nimport { useState } from \"react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface Module {\n  id: string;\n  name: string;\n  description: string;\n  enabled: boolean;\n  category: string;\n}\n\nconst defaultModules: Module[] = [\n  // المديولات الأساسية\n  { id: \"accounting\", name: \"المحاسبة المالية\", description: \"إدارة الحسابات والقيود المحاسبية\", enabled: true, category: \"core\" },\n  { id: \"inventory\", name: \"إدارة المخزون\", description: \"تتبع الأصناف والمخازن\", enabled: true, category: \"core\" },\n  { id: \"sales\", name: \"المبيعات والعملاء\", description: \"إدارة المبيعات والفواتير\", enabled: true, category: \"core\" },\n  { id: \"purchasing\", name: \"المشتريات والموردين\", description: \"إدارة المشتريات والموردين\", enabled: true, category: \"core\" },\n  \n  // المديولات الإضافية\n  { id: \"pos\", name: \"نقاط البيع POS\", description: \"نظام نقاط البيع\", enabled: true, category: \"additional\" },\n  { id: \"cash-bank\", name: \"النقدية والبنوك\", description: \"إدارة الصناديق والبنوك\", enabled: true, category: \"additional\" },\n  { id: \"hr\", name: \"شؤون الموظفين\", description: \"إدارة الموظفين والرواتب\", enabled: true, category: \"additional\" },\n  { id: \"fixed-assets\", name: \"الأصول الثابتة\", description: \"إدارة الأصول والإهلاك\", enabled: true, category: \"additional\" },\n  { id: \"projects\", name: \"إدارة المشاريع\", description: \"تتبع المشاريع والمهام\", enabled: true, category: \"additional\" },\n  { id: \"production\", name: \"الإنتاج\", description: \"إدارة عمليات الإنتاج\", enabled: true, category: \"additional\" },\n  { id: \"contracts\", name: \"العقود\", description: \"إدارة العقود والتجديد\", enabled: true, category: \"additional\" },\n  { id: \"ecommerce\", name: \"التجارة الإلكترونية\", description: \"إدارة المتجر الإلكتروني\", enabled: true, category: \"additional\" },\n  { id: \"shipping\", name: \"النقل والشحن\", description: \"إدارة الشحنات والنقل\", enabled: true, category: \"additional\" },\n  \n  // المديولات المتقدمة\n  { id: \"crm\", name: \"إدارة علاقات العملاء CRM\", description: \"متابعة العملاء والفرص البيعية\", enabled: true, category: \"advanced\" },\n  { id: \"budgets\", name: \"الميزانيات والتخطيط المالي\", description: \"إعداد الميزانيات والتنبؤات\", enabled: true, category: \"advanced\" },\n  { id: \"quality\", name: \"إدارة الجودة\", description: \"ضبط ومراقبة الجودة\", enabled: true, category: \"advanced\" },\n  { id: \"maintenance\", name: \"الصيانة\", description: \"إدارة الصيانة الدورية\", enabled: true, category: \"advanced\" },\n  { id: \"documents\", name: \"إدارة المستندات\", description: \"الأرشفة الإلكترونية\", enabled: true, category: \"advanced\" },\n  { id: \"loyalty\", name: \"نقاط الولاء\", description: \"برامج الولاء والمكافآت\", enabled: true, category: \"advanced\" },\n  { id: \"bi\", name: \"التقارير التحليلية BI\", description: \"لوحات تحكم ومؤشرات أداء\", enabled: true, category: \"advanced\" },\n  { id: \"distributors\", name: \"الوكلاء والموزعون\", description: \"إدارة شبكة التوزيع\", enabled: true, category: \"advanced\" },\n  { id: \"meetings\", name: \"الاجتماعات واللجان\", description: \"جدولة ومحاضر الاجتماعات\", enabled: true, category: \"advanced\" },\n  { id: \"risk\", name: \"إدارة المخاطر\", description: \"تحديد وتقييم المخاطر\", enabled: true, category: \"advanced\" },\n];\n\nexport default function ModuleManagement() {\n  const [modules, setModules] = useState<Module[]>(defaultModules);\n  const { toast } = useToast();\n\n  const handleToggle = (moduleId: string) => {\n    setModules(prev =>\n      prev.map(mod =>\n        mod.id === moduleId ? { ...mod, enabled: !mod.enabled } : mod\n      )\n    );\n  };\n\n  const handleSave = () => {\n    // في التطبيق الفعلي، سيتم حفظ الإعدادات في قاعدة البيانات\n    toast({\n      title: \"تم الحفظ بنجاح\",\n      description: \"تم حفظ إعدادات المديولات\",\n    });\n  };\n\n  const enableAll = () => {\n    setModules(prev => prev.map(mod => ({ ...mod, enabled: true })));\n  };\n\n  const disableAll = () => {\n    setModules(prev => prev.map(mod => ({ ...mod, enabled: false })));\n  };\n\n  const coreModules = modules.filter(m => m.category === \"core\");\n  const additionalModules = modules.filter(m => m.category === \"additional\");\n  const advancedModules = modules.filter(m => m.category === \"advanced\");\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-3\">\n          <Settings className=\"w-8 h-8 text-primary\" />\n          <div>\n            <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n              إدارة المديولات\n            </h1>\n            <p className=\"text-sm text-muted-foreground\">\n              قم بتفعيل أو إلغاء تفعيل المديولات حسب احتياجات شركتك\n            </p>\n          </div>\n        </div>\n        <div className=\"flex gap-2\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={enableAll}\n            data-testid=\"button-enable-all\"\n          >\n            <Check className=\"w-4 h-4 ml-2\" />\n            تفعيل الكل\n          </Button>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={disableAll}\n            data-testid=\"button-disable-all\"\n          >\n            <X className=\"w-4 h-4 ml-2\" />\n            إلغاء الكل\n          </Button>\n          <Button onClick={handleSave} data-testid=\"button-save-modules\">\n            حفظ التغييرات\n          </Button>\n        </div>\n      </div>\n\n      {/* المديولات الأساسية */}\n      <Card>\n        <CardHeader>\n          <CardTitle>المديولات الأساسية</CardTitle>\n          <CardDescription>\n            المديولات الرئيسية لتشغيل النظام (يُنصح بتفعيلها جميعاً)\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            {coreModules.map((module) => (\n              <div\n                key={module.id}\n                className=\"flex items-center justify-between p-4 border rounded-lg\"\n                data-testid={`module-${module.id}`}\n              >\n                <div className=\"flex-1\">\n                  <h3 className=\"font-medium\">{module.name}</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    {module.description}\n                  </p>\n                </div>\n                <Switch\n                  checked={module.enabled}\n                  onCheckedChange={() => handleToggle(module.id)}\n                  data-testid={`switch-${module.id}`}\n                />\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* المديولات الإضافية */}\n      <Card>\n        <CardHeader>\n          <CardTitle>المديولات الإضافية</CardTitle>\n          <CardDescription>\n            مديولات لتوسيع إمكانيات النظام\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            {additionalModules.map((module) => (\n              <div\n                key={module.id}\n                className=\"flex items-center justify-between p-4 border rounded-lg\"\n                data-testid={`module-${module.id}`}\n              >\n                <div className=\"flex-1\">\n                  <h3 className=\"font-medium\">{module.name}</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    {module.description}\n                  </p>\n                </div>\n                <Switch\n                  checked={module.enabled}\n                  onCheckedChange={() => handleToggle(module.id)}\n                  data-testid={`switch-${module.id}`}\n                />\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* المديولات المتقدمة */}\n      <Card>\n        <CardHeader>\n          <CardTitle>المديولات المتقدمة</CardTitle>\n          <CardDescription>\n            مديولات متخصصة لاحتياجات متقدمة\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            {advancedModules.map((module) => (\n              <div\n                key={module.id}\n                className=\"flex items-center justify-between p-4 border rounded-lg\"\n                data-testid={`module-${module.id}`}\n              >\n                <div className=\"flex-1\">\n                  <h3 className=\"font-medium\">{module.name}</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    {module.description}\n                  </p>\n                </div>\n                <Switch\n                  checked={module.enabled}\n                  onCheckedChange={() => handleToggle(module.id)}\n                  data-testid={`switch-${module.id}`}\n                />\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n\n      <div className=\"flex justify-end\">\n        <Button onClick={handleSave} size=\"lg\" data-testid=\"button-save-modules-bottom\">\n          حفظ جميع التغييرات\n        </Button>\n      </div>\n    </div>\n  );\n}\n","size_bytes":10355},"client/src/pages/sales/reports/SalesCustomerBalances.tsx":{"content":"import { Users } from \"lucide-react\";\n\nexport default function SalesCustomerBalances() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Users className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          أرصدة العملاء\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: عرض أرصدة جميع العملاء\n      </p>\n    </div>\n  );\n}\n","size_bytes":505},"client/src/pages/ecommerce/Products.tsx":{"content":"import { Package } from \"lucide-react\";\n\nexport default function EcommerceProducts() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Package className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          منتجات المتجر\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة منتجات المتجر الإلكتروني\n      </p>\n    </div>\n  );\n}\n","size_bytes":521},"client/src/pages/fixed-assets/reports/DepreciationReport.tsx":{"content":"import { TrendingDown } from \"lucide-react\";\n\nexport default function DepreciationReport() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <TrendingDown className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          تقرير الإهلاك\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تقرير إهلاك الأصول\n      </p>\n    </div>\n  );\n}\n","size_bytes":509},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1592},"client/src/pages/maintenance/MaintenanceReports.tsx":{"content":"import { FileText } from \"lucide-react\";\n\nexport default function MaintenanceReports() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <FileText className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          تقارير الصيانة\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تقارير شاملة عن أنشطة الصيانة\n      </p>\n    </div>\n  );\n}\n","size_bytes":523},"client/src/pages/documents/Categories.tsx":{"content":"import { Folder } from \"lucide-react\";\n\nexport default function DocumentCategories() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Folder className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          تصنيف المستندات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تنظيم المستندات في فئات\n      </p>\n    </div>\n  );\n}\n","size_bytes":510},"client/src/pages/bi/DataExport.tsx":{"content":"import { Download } from \"lucide-react\";\n\nexport default function DataExport() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Download className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          تصدير البيانات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تصدير البيانات بصيغ متعددة\n      </p>\n    </div>\n  );\n}\n","size_bytes":510},"client/src/pages/inventory/StockCount.tsx":{"content":"import { ClipboardList } from \"lucide-react\";\n\nexport default function StockCount() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <ClipboardList className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          الجرد\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إجراء الجرد الدوري والسنوي\n      </p>\n    </div>\n  );\n}\n","size_bytes":503},"client/src/pages/settings/SettingsCurrencies.tsx":{"content":"import { Coins } from \"lucide-react\";\n\nexport default function SettingsCurrencies() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Coins className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          إدارة العملات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة العملات وأسعار الصرف\n      </p>\n    </div>\n  );\n}\n","size_bytes":510},"client/src/pages/crm/Reports.tsx":{"content":"import { FileText } from \"lucide-react\";\n\nexport default function CRMReports() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <FileText className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          تقارير CRM\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تقارير شاملة عن أداء المبيعات والعملاء\n      </p>\n    </div>\n  );\n}\n","size_bytes":521},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1202},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/pages/pos/Shifts.tsx":{"content":"import { Clock } from \"lucide-react\";\n\nexport default function Shifts() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Clock className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          إدارة الورديات\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة ورديات العمل والمناوبات\n      </p>\n    </div>\n  );\n}\n","size_bytes":506},"client/src/pages/purchasing/Suppliers.tsx":{"content":"export { default } from './PurchasingSuppliers';\n","size_bytes":49},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/pages/ecommerce/Store.tsx":{"content":"import { Store } from \"lucide-react\";\n\nexport default function EcommerceStore() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Store className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          المتجر الإلكتروني\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: إدارة المتجر الإلكتروني والمنتجات\n      </p>\n    </div>\n  );\n}\n","size_bytes":528},"client/src/components/StatCard.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { ArrowUpIcon, ArrowDownIcon } from \"lucide-react\";\n\ninterface StatCardProps {\n  title: string;\n  value: string;\n  icon: React.ReactNode;\n  trend?: {\n    value: number;\n    isPositive: boolean;\n  };\n  color?: string;\n}\n\nexport function StatCard({ title, value, icon, trend, color = \"bg-primary\" }: StatCardProps) {\n  return (\n    <Card className=\"p-6 hover-elevate\" data-testid={`card-stat-${title.replace(/\\s+/g, '-')}`}>\n      <div className=\"flex items-start justify-between gap-4\">\n        <div className=\"flex-1\">\n          <p className=\"text-sm text-muted-foreground mb-2\" data-testid=\"text-stat-title\">\n            {title}\n          </p>\n          <p className=\"text-3xl font-bold font-mono\" data-testid=\"text-stat-value\">\n            {value}\n          </p>\n          {trend && (\n            <div className=\"flex items-center gap-1 mt-2\">\n              {trend.isPositive ? (\n                <ArrowUpIcon className=\"w-4 h-4 text-green-600\" />\n              ) : (\n                <ArrowDownIcon className=\"w-4 h-4 text-red-600\" />\n              )}\n              <span\n                className={`text-sm ${trend.isPositive ? 'text-green-600' : 'text-red-600'}`}\n                data-testid=\"text-stat-trend\"\n              >\n                {Math.abs(trend.value)}%\n              </span>\n            </div>\n          )}\n        </div>\n        <div className={`${color} p-3 rounded-lg`} data-testid=\"icon-stat\">\n          <div className=\"text-white\">\n            {icon}\n          </div>\n        </div>\n      </div>\n    </Card>\n  );\n}\n","size_bytes":1589},"client/src/pages/bi/KPIs.tsx":{"content":"import { Target } from \"lucide-react\";\n\nexport default function KPIs() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Target className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          مؤشرات الأداء الرئيسية\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تتبع مؤشرات الأداء KPIs\n      </p>\n    </div>\n  );\n}\n","size_bytes":505},"client/src/components/app-sidebar.tsx":{"content":"import { Link, useLocation } from \"wouter\";\nimport { useState } from \"react\";\nimport {\n  LayoutDashboard,\n  BookOpen,\n  FileText,\n  BarChart3,\n  Settings,\n  Calculator,\n  Database,\n  Receipt,\n  Users,\n  Building2,\n  Coins,\n  Calendar,\n  Landmark,\n  Target,\n  UserPlus,\n  Truck,\n  FileCheck,\n  DollarSign,\n  PieChart,\n  TrendingUp,\n  FileSpreadsheet,\n  Lock,\n  ArrowRightLeft,\n  ChevronDown,\n  ChevronLeft,\n  Package,\n  ShoppingCart,\n  FileBarChart,\n  ClipboardList,\n  PackageCheck,\n  RotateCcw,\n  ShoppingBag,\n  FileOutput,\n  PackageX,\n  CreditCard,\n  Wallet,\n  Banknote,\n  ArrowLeftRight,\n  UserCircle,\n  Clock,\n  HardDrive,\n  Wrench,\n  TrendingDown,\n  MonitorPlay,\n  FolderKanban,\n  Factory,\n  FileSignature,\n  Store,\n  TruckIcon,\n  MessageSquare,\n  Award,\n  Megaphone,\n  Gift,\n  LayoutDashboard as BIIcon,\n  AlertTriangle,\n  Shield,\n  FolderOpen,\n  Ticket,\n  Trophy,\n  Star,\n  MapPin,\n  CheckCircle,\n  Eye,\n  Scale,\n  XCircle,\n  ClipboardCheck,\n  Archive,\n  Search as SearchIcon,\n  LineChart,\n} from \"lucide-react\";\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarHeader,\n  SidebarMenuSub,\n  SidebarMenuSubItem,\n  SidebarMenuSubButton,\n} from \"@/components/ui/sidebar\";\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from \"@/components/ui/collapsible\";\n\ninterface MenuItem {\n  title: string;\n  url?: string;\n  icon: any;\n  items?: MenuItem[];\n}\n\nconst menuItems: MenuItem[] = [\n  {\n    title: \"لوحة التحكم\",\n    url: \"/\",\n    icon: LayoutDashboard,\n  },\n  \n  // البيانات الأساسية المشتركة\n  {\n    title: \"البيانات الأساسية\",\n    icon: Database,\n    items: [\n      {\n        title: \"إدارة بيانات العملاء\",\n        url: \"/master/customers\",\n        icon: Users,\n      },\n      {\n        title: \"إدارة بيانات الموردين\",\n        url: \"/master/suppliers\",\n        icon: Truck,\n      },\n      {\n        title: \"الفروع\",\n        url: \"/master/branches\",\n        icon: Building2,\n      },\n      {\n        title: \"العملات\",\n        url: \"/master/currencies\",\n        icon: Coins,\n      },\n    ],\n  },\n  \n  // 1. المحاسبة المالية\n  {\n    title: \"المحاسبة المالية\",\n    icon: Calculator,\n    items: [\n      {\n        title: \"دليل الحسابات\",\n        url: \"/accounting/chart-of-accounts\",\n        icon: BookOpen,\n      },\n      {\n        title: \"مراكز التكلفة\",\n        url: \"/accounting/cost-centers\",\n        icon: Target,\n      },\n      {\n        title: \"الفترات المالية\",\n        url: \"/accounting/fiscal-periods\",\n        icon: Calendar,\n      },\n      {\n        title: \"القيود والحركات\",\n        icon: FileText,\n        items: [\n          {\n            title: \"قيود اليومية\",\n            url: \"/accounting/journal-entries\",\n            icon: FileCheck,\n          },\n          {\n            title: \"سندات الصرف\",\n            url: \"/accounting/payments\",\n            icon: DollarSign,\n          },\n        ],\n      },\n      {\n        title: \"التقارير المالية\",\n        icon: BarChart3,\n        items: [\n          {\n            title: \"ميزان المراجعة\",\n            url: \"/accounting/reports/trial-balance\",\n            icon: Calculator,\n          },\n          {\n            title: \"قائمة الدخل\",\n            url: \"/accounting/reports/income-statement\",\n            icon: TrendingUp,\n          },\n          {\n            title: \"الميزانية العمومية\",\n            url: \"/accounting/reports/balance-sheet\",\n            icon: Landmark,\n          },\n          {\n            title: \"التدفقات النقدية\",\n            url: \"/accounting/reports/cash-flow\",\n            icon: Banknote,\n          },\n        ],\n      },\n    ],\n  },\n\n  // 2. إدارة المخزون\n  {\n    title: \"إدارة المخزون\",\n    icon: Package,\n    items: [\n      {\n        title: \"الأصناف\",\n        url: \"/inventory/items\",\n        icon: PackageCheck,\n      },\n      {\n        title: \"المخازن\",\n        url: \"/inventory/warehouses\",\n        icon: Building2,\n      },\n      {\n        title: \"حركات المخزون\",\n        url: \"/inventory/movements\",\n        icon: ArrowLeftRight,\n      },\n      {\n        title: \"الجرد\",\n        url: \"/inventory/stock-count\",\n        icon: ClipboardList,\n      },\n      {\n        title: \"التقارير\",\n        icon: FileBarChart,\n        items: [\n          {\n            title: \"أرصدة المخزون\",\n            url: \"/inventory/reports/stock-balance\",\n            icon: Package,\n          },\n          {\n            title: \"حركة الأصناف\",\n            url: \"/inventory/reports/item-movement\",\n            icon: RotateCcw,\n          },\n        ],\n      },\n    ],\n  },\n\n  // 3. المبيعات والعملاء\n  {\n    title: \"المبيعات والعملاء\",\n    icon: ShoppingCart,\n    items: [\n      {\n        title: \"بيانات العملاء\",\n        url: \"/sales/customers\",\n        icon: UserPlus,\n      },\n      {\n        title: \"عروض الأسعار\",\n        url: \"/sales/quotations\",\n        icon: FileText,\n      },\n      {\n        title: \"أوامر البيع\",\n        url: \"/sales/orders\",\n        icon: ShoppingBag,\n      },\n      {\n        title: \"فواتير المبيعات\",\n        url: \"/sales/invoices\",\n        icon: FileCheck,\n      },\n      {\n        title: \"مرتجعات المبيعات\",\n        url: \"/sales/returns\",\n        icon: PackageX,\n      },\n      {\n        title: \"التقارير\",\n        icon: FileBarChart,\n        items: [\n          {\n            title: \"تقرير المبيعات\",\n            url: \"/sales/reports/sales-report\",\n            icon: TrendingUp,\n          },\n          {\n            title: \"أرصدة العملاء\",\n            url: \"/sales/reports/customer-balances\",\n            icon: Users,\n          },\n        ],\n      },\n    ],\n  },\n\n  // 4. المشتريات والموردين\n  {\n    title: \"المشتريات والموردين\",\n    icon: Truck,\n    items: [\n      {\n        title: \"بيانات الموردين\",\n        url: \"/purchasing/suppliers\",\n        icon: Truck,\n      },\n      {\n        title: \"طلبات الشراء\",\n        url: \"/purchasing/purchase-orders\",\n        icon: ClipboardList,\n      },\n      {\n        title: \"استلام البضاعة\",\n        url: \"/purchasing/goods-receipt\",\n        icon: PackageCheck,\n      },\n      {\n        title: \"فواتير المشتريات\",\n        url: \"/purchasing/invoices\",\n        icon: FileCheck,\n      },\n      {\n        title: \"مرتجعات المشتريات\",\n        url: \"/purchasing/returns\",\n        icon: RotateCcw,\n      },\n      {\n        title: \"التقارير\",\n        icon: FileBarChart,\n        items: [\n          {\n            title: \"تقرير المشتريات\",\n            url: \"/purchasing/reports/purchase-report\",\n            icon: TrendingDown,\n          },\n          {\n            title: \"أرصدة الموردين\",\n            url: \"/purchasing/reports/supplier-balances\",\n            icon: Truck,\n          },\n        ],\n      },\n    ],\n  },\n\n  // 5. نقاط البيع (POS)\n  {\n    title: \"نقاط البيع\",\n    icon: MonitorPlay,\n    items: [\n      {\n        title: \"شاشة البيع\",\n        url: \"/pos/sale-screen\",\n        icon: MonitorPlay,\n      },\n      {\n        title: \"الفواتير اليومية\",\n        url: \"/pos/daily-invoices\",\n        icon: FileCheck,\n      },\n      {\n        title: \"تقارير المبيعات\",\n        url: \"/pos/reports\",\n        icon: FileBarChart,\n      },\n      {\n        title: \"إدارة الورديات\",\n        url: \"/pos/shifts\",\n        icon: Clock,\n      },\n    ],\n  },\n\n  // 6. النقدية والبنوك\n  {\n    title: \"النقدية والبنوك\",\n    icon: Wallet,\n    items: [\n      {\n        title: \"الحسابات البنكية\",\n        url: \"/cash-bank/bank-accounts\",\n        icon: Landmark,\n      },\n      {\n        title: \"الصناديق\",\n        url: \"/cash-bank/cash-boxes\",\n        icon: Wallet,\n      },\n      {\n        title: \"سندات القبض\",\n        url: \"/cash-bank/receipt-vouchers\",\n        icon: Receipt,\n      },\n      {\n        title: \"سندات الصرف\",\n        url: \"/cash-bank/payments\",\n        icon: CreditCard,\n      },\n      {\n        title: \"التسويات البنكية\",\n        url: \"/cash-bank/reconciliation\",\n        icon: ArrowLeftRight,\n      },\n    ],\n  },\n\n  // 7. الموارد البشرية\n  {\n    title: \"الموارد البشرية\",\n    icon: Users,\n    items: [\n      {\n        title: \"بيانات الموظفين\",\n        url: \"/hr/employees\",\n        icon: UserCircle,\n      },\n      {\n        title: \"الحضور والانصراف\",\n        url: \"/hr/attendance\",\n        icon: Clock,\n      },\n      {\n        title: \"الرواتب\",\n        url: \"/hr/payroll\",\n        icon: Banknote,\n      },\n      {\n        title: \"البدلات والاستقطاعات\",\n        url: \"/hr/allowances-deductions\",\n        icon: DollarSign,\n      },\n      {\n        title: \"التقارير\",\n        icon: FileBarChart,\n        items: [\n          {\n            title: \"كشف الرواتب\",\n            url: \"/hr/reports/payroll-sheet\",\n            icon: FileSpreadsheet,\n          },\n          {\n            title: \"تقرير الحضور\",\n            url: \"/hr/reports/attendance\",\n            icon: Clock,\n          },\n        ],\n      },\n    ],\n  },\n\n  // 8. الأصول الثابتة\n  {\n    title: \"الأصول الثابتة\",\n    icon: HardDrive,\n    items: [\n      {\n        title: \"تسجيل الأصول\",\n        url: \"/fixed-assets/register\",\n        icon: PackageCheck,\n      },\n      {\n        title: \"الإهلاك\",\n        url: \"/fixed-assets/depreciation\",\n        icon: TrendingDown,\n      },\n      {\n        title: \"نقل الأصول\",\n        url: \"/fixed-assets/transfer\",\n        icon: ArrowLeftRight,\n      },\n      {\n        title: \"استبعاد الأصول\",\n        url: \"/fixed-assets/disposal\",\n        icon: PackageX,\n      },\n      {\n        title: \"صيانة الأصول\",\n        url: \"/fixed-assets/maintenance\",\n        icon: Wrench,\n      },\n    ],\n  },\n\n  // 9. إدارة المشاريع\n  {\n    title: \"إدارة المشاريع\",\n    icon: FolderKanban,\n    items: [\n      {\n        title: \"المشاريع\",\n        url: \"/projects/list\",\n        icon: FolderKanban,\n      },\n      {\n        title: \"المهام\",\n        url: \"/projects/tasks\",\n        icon: ClipboardList,\n      },\n      {\n        title: \"الميزانيات\",\n        url: \"/projects/budgets\",\n        icon: Calculator,\n      },\n      {\n        title: \"التقارير\",\n        url: \"/projects/reports\",\n        icon: FileBarChart,\n      },\n    ],\n  },\n\n  // 10. إدارة الإنتاج\n  {\n    title: \"إدارة الإنتاج\",\n    icon: Factory,\n    items: [\n      {\n        title: \"أوامر الإنتاج\",\n        url: \"/production/orders\",\n        icon: ClipboardList,\n      },\n      {\n        title: \"وصفات الإنتاج\",\n        url: \"/production/bom\",\n        icon: FileText,\n      },\n      {\n        title: \"خطوط الإنتاج\",\n        url: \"/production/lines\",\n        icon: Factory,\n      },\n      {\n        title: \"مراقبة الجودة\",\n        url: \"/production/quality\",\n        icon: Award,\n      },\n    ],\n  },\n\n  // 11. إدارة العقود\n  {\n    title: \"إدارة العقود\",\n    icon: FileSignature,\n    items: [\n      {\n        title: \"العقود\",\n        url: \"/contracts/list\",\n        icon: FileSignature,\n      },\n      {\n        title: \"التجديدات\",\n        url: \"/contracts/renewals\",\n        icon: RotateCcw,\n      },\n      {\n        title: \"التنبيهات\",\n        url: \"/contracts/alerts\",\n        icon: MessageSquare,\n      },\n    ],\n  },\n\n  // 12. التجارة الإلكترونية\n  {\n    title: \"التجارة الإلكترونية\",\n    icon: Store,\n    items: [\n      {\n        title: \"المتجر الإلكتروني\",\n        url: \"/ecommerce/store\",\n        icon: Store,\n      },\n      {\n        title: \"الطلبات الإلكترونية\",\n        url: \"/ecommerce/orders\",\n        icon: ShoppingBag,\n      },\n      {\n        title: \"المنتجات\",\n        url: \"/ecommerce/products\",\n        icon: Package,\n      },\n      {\n        title: \"العملاء\",\n        url: \"/ecommerce/customers\",\n        icon: Users,\n      },\n    ],\n  },\n\n  // 13. النقل والشحن\n  {\n    title: \"النقل والشحن\",\n    icon: TruckIcon,\n    items: [\n      {\n        title: \"شركات الشحن\",\n        url: \"/shipping/carriers\",\n        icon: TruckIcon,\n      },\n      {\n        title: \"الشحنات\",\n        url: \"/shipping/shipments\",\n        icon: Package,\n      },\n      {\n        title: \"تتبع الشحنات\",\n        url: \"/shipping/tracking\",\n        icon: FileBarChart,\n      },\n    ],\n  },\n\n  // 14. إدارة علاقات العملاء (CRM)\n  {\n    title: \"إدارة علاقات العملاء\",\n    icon: Users,\n    items: [\n      {\n        title: \"العملاء المحتملون\",\n        url: \"/crm/leads\",\n        icon: UserPlus,\n      },\n      {\n        title: \"الفرص البيعية\",\n        url: \"/crm/opportunities\",\n        icon: TrendingUp,\n      },\n      {\n        title: \"الأنشطة والاتصالات\",\n        url: \"/crm/activities\",\n        icon: Calendar,\n      },\n      {\n        title: \"الحملات التسويقية\",\n        url: \"/crm/campaigns\",\n        icon: Megaphone,\n      },\n      {\n        title: \"المهام والمتابعة\",\n        url: \"/crm/tasks\",\n        icon: ClipboardList,\n      },\n      {\n        title: \"تحليلات العملاء\",\n        url: \"/crm/analytics\",\n        icon: BarChart3,\n      },\n      {\n        title: \"تقارير CRM\",\n        url: \"/crm/reports\",\n        icon: FileText,\n      },\n    ],\n  },\n\n  // 15. الميزانيات والتخطيط المالي\n  {\n    title: \"الميزانيات والتخطيط\",\n    icon: Calculator,\n    items: [\n      {\n        title: \"الميزانيات السنوية\",\n        url: \"/budgets/annual\",\n        icon: FileSpreadsheet,\n      },\n      {\n        title: \"الفعلي مقابل المخطط\",\n        url: \"/budgets/actual-vs-budget\",\n        icon: PieChart,\n      },\n      {\n        title: \"التنبؤات المالية\",\n        url: \"/budgets/forecasts\",\n        icon: LineChart,\n      },\n      {\n        title: \"تحليل الانحرافات\",\n        url: \"/budgets/variances\",\n        icon: AlertTriangle,\n      },\n      {\n        title: \"تقارير الميزانيات\",\n        url: \"/budgets/reports\",\n        icon: FileText,\n      },\n    ],\n  },\n\n  // 16. إدارة الجودة\n  {\n    title: \"إدارة الجودة\",\n    icon: Award,\n    items: [\n      {\n        title: \"معايير الجودة\",\n        url: \"/quality/standards\",\n        icon: Award,\n      },\n      {\n        title: \"الفحوصات\",\n        url: \"/quality/inspections\",\n        icon: ClipboardCheck,\n      },\n      {\n        title: \"عدم المطابقة\",\n        url: \"/quality/non-conformance\",\n        icon: XCircle,\n      },\n      {\n        title: \"الإجراءات التصحيحية\",\n        url: \"/quality/corrective-actions\",\n        icon: Wrench,\n      },\n      {\n        title: \"تقارير الجودة\",\n        url: \"/quality/reports\",\n        icon: FileText,\n      },\n    ],\n  },\n\n  // 17. الصيانة\n  {\n    title: \"الصيانة\",\n    icon: Wrench,\n    items: [\n      {\n        title: \"جدول الصيانة\",\n        url: \"/maintenance/schedule\",\n        icon: Calendar,\n      },\n      {\n        title: \"طلبات الصيانة\",\n        url: \"/maintenance/work-orders\",\n        icon: ClipboardList,\n      },\n      {\n        title: \"قطع الغيار\",\n        url: \"/maintenance/spare-parts\",\n        icon: Package,\n      },\n      {\n        title: \"تكاليف الصيانة\",\n        url: \"/maintenance/costs\",\n        icon: DollarSign,\n      },\n      {\n        title: \"تقارير الصيانة\",\n        url: \"/maintenance/reports\",\n        icon: FileText,\n      },\n    ],\n  },\n\n  // 18. إدارة المستندات\n  {\n    title: \"إدارة المستندات\",\n    icon: FolderOpen,\n    items: [\n      {\n        title: \"تخزين المستندات\",\n        url: \"/documents/storage\",\n        icon: FolderOpen,\n      },\n      {\n        title: \"تصنيف المستندات\",\n        url: \"/documents/categories\",\n        icon: FolderKanban,\n      },\n      {\n        title: \"البحث في المستندات\",\n        url: \"/documents/search\",\n        icon: SearchIcon,\n      },\n      {\n        title: \"الأرشيف\",\n        url: \"/documents/archive\",\n        icon: Archive,\n      },\n    ],\n  },\n\n  // 19. نقاط الولاء\n  {\n    title: \"نقاط الولاء\",\n    icon: Gift,\n    items: [\n      {\n        title: \"برامج الولاء\",\n        url: \"/loyalty/programs\",\n        icon: Gift,\n      },\n      {\n        title: \"النقاط والمكافآت\",\n        url: \"/loyalty/points\",\n        icon: Star,\n      },\n      {\n        title: \"الكوبونات والعروض\",\n        url: \"/loyalty/coupons\",\n        icon: Ticket,\n      },\n      {\n        title: \"مستويات العضوية\",\n        url: \"/loyalty/tiers\",\n        icon: Trophy,\n      },\n      {\n        title: \"تقارير الولاء\",\n        url: \"/loyalty/reports\",\n        icon: FileText,\n      },\n    ],\n  },\n\n  // 20. التقارير التحليلية (BI)\n  {\n    title: \"التقارير التحليلية\",\n    icon: BIIcon,\n    items: [\n      {\n        title: \"لوحات التحكم التحليلية\",\n        url: \"/bi/dashboards\",\n        icon: LayoutDashboard,\n      },\n      {\n        title: \"مؤشرات الأداء KPIs\",\n        url: \"/bi/kpis\",\n        icon: Target,\n      },\n      {\n        title: \"التقارير المخصصة\",\n        url: \"/bi/custom-reports\",\n        icon: FileBarChart,\n      },\n      {\n        title: \"تحليل البيانات\",\n        url: \"/bi/data-analysis\",\n        icon: BarChart3,\n      },\n      {\n        title: \"تصدير البيانات\",\n        url: \"/bi/data-export\",\n        icon: FileOutput,\n      },\n      {\n        title: \"الاتجاهات والتنبؤات\",\n        url: \"/bi/trends\",\n        icon: TrendingUp,\n      },\n    ],\n  },\n\n  // 21. الوكلاء والموزعون\n  {\n    title: \"الوكلاء والموزعون\",\n    icon: Users,\n    items: [\n      {\n        title: \"الوكلاء والموزعون\",\n        url: \"/distributors/list\",\n        icon: Users,\n      },\n      {\n        title: \"العمولات\",\n        url: \"/distributors/commissions\",\n        icon: DollarSign,\n      },\n      {\n        title: \"المناطق الجغرافية\",\n        url: \"/distributors/territories\",\n        icon: MapPin,\n      },\n      {\n        title: \"الحصص والأهداف\",\n        url: \"/distributors/targets\",\n        icon: Target,\n      },\n      {\n        title: \"تقارير الوكلاء\",\n        url: \"/distributors/reports\",\n        icon: FileText,\n      },\n    ],\n  },\n\n  // 22. الاجتماعات واللجان\n  {\n    title: \"الاجتماعات واللجان\",\n    icon: Calendar,\n    items: [\n      {\n        title: \"الاجتماعات\",\n        url: \"/meetings/list\",\n        icon: Calendar,\n      },\n      {\n        title: \"محاضر الاجتماعات\",\n        url: \"/meetings/minutes\",\n        icon: FileText,\n      },\n      {\n        title: \"القرارات والتوصيات\",\n        url: \"/meetings/decisions\",\n        icon: CheckCircle,\n      },\n      {\n        title: \"المتابعة والتنفيذ\",\n        url: \"/meetings/followup\",\n        icon: Clock,\n      },\n    ],\n  },\n\n  // 23. إدارة المخاطر\n  {\n    title: \"إدارة المخاطر\",\n    icon: AlertTriangle,\n    items: [\n      {\n        title: \"تحديد المخاطر\",\n        url: \"/risk-management/identification\",\n        icon: AlertTriangle,\n      },\n      {\n        title: \"تقييم المخاطر\",\n        url: \"/risk-management/assessment\",\n        icon: Scale,\n      },\n      {\n        title: \"خطط المعالجة\",\n        url: \"/risk-management/mitigation\",\n        icon: Shield,\n      },\n      {\n        title: \"المتابعة والرصد\",\n        url: \"/risk-management/monitoring\",\n        icon: Eye,\n      },\n    ],\n  },\n\n  // الإعدادات\n  {\n    title: \"الإعدادات\",\n    icon: Settings,\n    items: [\n      {\n        title: \"بيانات الشركة\",\n        url: \"/settings/company\",\n        icon: Building2,\n      },\n      {\n        title: \"إدارة المديولات\",\n        url: \"/settings/modules\",\n        icon: Settings,\n      },\n      {\n        title: \"الفروع\",\n        url: \"/settings/branches\",\n        icon: Building2,\n      },\n      {\n        title: \"العملات\",\n        url: \"/settings/currencies\",\n        icon: Coins,\n      },\n      {\n        title: \"المستخدمين والصلاحيات\",\n        url: \"/settings/users\",\n        icon: Users,\n      },\n      {\n        title: \"النسخ الاحتياطي\",\n        url: \"/settings/backup\",\n        icon: HardDrive,\n      },\n    ],\n  },\n];\n\n// Sub menu item component (for nested items)\nfunction SubMenuItem({ item, location }: { item: MenuItem; location: string }) {\n  const [isOpen, setIsOpen] = useState(false);\n  const hasChildren = item.items && item.items.length > 0;\n  const isActive = item.url === location;\n\n  if (hasChildren) {\n    return (\n      <Collapsible open={isOpen} onOpenChange={setIsOpen}>\n        <SidebarMenuSubItem>\n          <CollapsibleTrigger asChild>\n            <SidebarMenuSubButton\n              data-testid={`button-nav-${item.title.replace(/\\s+/g, '-')}`}\n            >\n              <item.icon className=\"w-4 h-4\" />\n              <span>{item.title}</span>\n              {isOpen ? (\n                <ChevronDown className=\"w-3 h-3 ms-auto\" />\n              ) : (\n                <ChevronLeft className=\"w-3 h-3 ms-auto\" />\n              )}\n            </SidebarMenuSubButton>\n          </CollapsibleTrigger>\n          <CollapsibleContent>\n            <SidebarMenuSub>\n              {item.items?.map((subItem) => (\n                <SubMenuItem key={subItem.title} item={subItem} location={location} />\n              ))}\n            </SidebarMenuSub>\n          </CollapsibleContent>\n        </SidebarMenuSubItem>\n      </Collapsible>\n    );\n  }\n\n  return (\n    <SidebarMenuSubItem>\n      <SidebarMenuSubButton\n        asChild\n        className={isActive ? \"bg-sidebar-accent\" : \"\"}\n        data-testid={`link-nav-${item.title.replace(/\\s+/g, '-')}`}\n      >\n        <Link href={item.url!}>\n          <item.icon className=\"w-4 h-4\" />\n          <span>{item.title}</span>\n        </Link>\n      </SidebarMenuSubButton>\n    </SidebarMenuSubItem>\n  );\n}\n\nfunction NavMenuItem({ item }: { item: MenuItem }) {\n  const [location] = useLocation();\n  const [isOpen, setIsOpen] = useState(false);\n  const hasChildren = item.items && item.items.length > 0;\n  const isActive = item.url === location;\n\n  if (hasChildren) {\n    return (\n      <Collapsible open={isOpen} onOpenChange={setIsOpen}>\n        <SidebarMenuItem>\n          <CollapsibleTrigger asChild>\n            <SidebarMenuButton\n              data-testid={`button-nav-${item.title.replace(/\\s+/g, '-')}`}\n            >\n              <item.icon className=\"w-5 h-5\" />\n              <span>{item.title}</span>\n              {isOpen ? (\n                <ChevronDown className=\"w-4 h-4 ms-auto\" />\n              ) : (\n                <ChevronLeft className=\"w-4 h-4 ms-auto\" />\n              )}\n            </SidebarMenuButton>\n          </CollapsibleTrigger>\n          <CollapsibleContent>\n            <SidebarMenuSub>\n              {item.items?.map((subItem) => (\n                <SubMenuItem key={subItem.title} item={subItem} location={location} />\n              ))}\n            </SidebarMenuSub>\n          </CollapsibleContent>\n        </SidebarMenuItem>\n      </Collapsible>\n    );\n  }\n\n  return (\n    <SidebarMenuItem>\n      <SidebarMenuButton\n        asChild\n        className={isActive ? \"bg-sidebar-accent\" : \"\"}\n        data-testid={`link-nav-${item.title.replace(/\\s+/g, '-')}`}\n      >\n        <Link href={item.url!}>\n          <item.icon className=\"w-5 h-5\" />\n          <span>{item.title}</span>\n        </Link>\n      </SidebarMenuButton>\n    </SidebarMenuItem>\n  );\n}\n\nexport function AppSidebar() {\n  return (\n    <Sidebar side=\"right\">\n      <SidebarHeader className=\"p-6 border-b border-sidebar-border\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"bg-primary p-2 rounded-lg\">\n            <Calculator className=\"w-6 h-6 text-primary-foreground\" />\n          </div>\n          <div>\n            <h1 className=\"text-xl font-bold\" data-testid=\"text-app-title\">\n              RinaPro Business\n            </h1>\n            <p className=\"text-xs text-muted-foreground\">نظام ERP المتكامل</p>\n          </div>\n        </div>\n      </SidebarHeader>\n      <SidebarContent>\n        <SidebarGroup>\n          <SidebarGroupLabel>المديولات الرئيسية</SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {menuItems.map((item) => (\n                <NavMenuItem key={item.title} item={item} />\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n      </SidebarContent>\n    </Sidebar>\n  );\n}\n","size_bytes":25808},"client/src/pages/risk-management/RiskAssessment.tsx":{"content":"import { Scale } from \"lucide-react\";\n\nexport default function RiskAssessment() {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3\">\n        <Scale className=\"w-8 h-8 text-primary\" />\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          تقييم المخاطر\n        </h1>\n      </div>\n      <p className=\"text-muted-foreground\">\n        قريباً: تقييم وتحليل مستوى المخاطر\n      </p>\n    </div>\n  );\n}\n","size_bytes":506},"client/src/pages/purchasing/Invoices.tsx":{"content":"export { default } from './PurchaseInvoices';\n","size_bytes":46},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"client/src/pages/cash-bank/PaymentVouchers.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Button } from \"@/components/ui/button\";\nimport { Plus, Trash2, Eye, CheckCircle } from \"lucide-react\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\n\ninterface FullPaymentVoucher {\n  id: string;\n  voucherNumber: string;\n  voucherDate: string;\n  supplierId: string;\n  amount: string;\n  paymentMethod: \"نقداً\" | \"تحويل بنكي\" | \"شيك\";\n  sourceAccountId: string;\n  checkNumber?: string | null;\n  checkDate?: string | null;\n  checkBank?: string | null;\n  status: \"مسودة\" | \"منشور\";\n  entryId?: string | null;\n  postedAt?: string | null;\n  notes?: string | null;\n  supplierName?: string;\n  sourceAccountName?: string;\n}\n\ninterface Supplier {\n  id: string;\n  code: string;\n  name: string;\n}\n\ninterface Account {\n  id: string;\n  code: string;\n  name: string;\n  category: string;\n}\n\nconst voucherFormSchema = z.object({\n  voucherNumber: z.string().min(1, \"رقم السند مطلوب\"),\n  voucherDate: z.string().min(1, \"تاريخ السند مطلوب\"),\n  supplierId: z.string().min(1, \"المورد مطلوب\"),\n  amount: z.string().min(1, \"المبلغ مطلوب\").refine((val) => parseFloat(val) > 0, \"المبلغ يجب أن يكون أكبر من صفر\"),\n  paymentMethod: z.enum([\"نقداً\", \"تحويل بنكي\", \"شيك\"]),\n  sourceAccountId: z.string().min(1, \"حساب الدفع مطلوب\"),\n  checkNumber: z.string().optional(),\n  checkDate: z.string().optional(),\n  checkBank: z.string().optional(),\n  notes: z.string().optional(),\n});\n\ntype VoucherFormValues = z.infer<typeof voucherFormSchema>;\n\nexport default function PaymentVouchers() {\n  const { toast } = useToast();\n  const [formDialog, setFormDialog] = useState<{ open: boolean; editId?: string }>({ open: false });\n  const [deleteDialog, setDeleteDialog] = useState<{ open: boolean; id: string | null }>({\n    open: false,\n    id: null,\n  });\n\n  const form = useForm<VoucherFormValues>({\n    resolver: zodResolver(voucherFormSchema),\n    defaultValues: {\n      voucherNumber: \"\",\n      voucherDate: new Date().toISOString().split(\"T\")[0],\n      supplierId: \"\",\n      amount: \"\",\n      paymentMethod: \"نقداً\",\n      sourceAccountId: \"\",\n      checkNumber: \"\",\n      checkDate: \"\",\n      checkBank: \"\",\n      notes: \"\",\n    },\n  });\n\n  const { data: vouchers, isLoading, error, refetch } = useQuery<FullPaymentVoucher[]>({\n    queryKey: [\"/api/payment-vouchers\"],\n  });\n\n  const { data: suppliers } = useQuery<Supplier[]>({\n    queryKey: [\"/api/suppliers\"],\n  });\n\n  const { data: accounts } = useQuery<Account[]>({\n    queryKey: [\"/api/accounts\"],\n  });\n\n  // Filter accounts for payment methods\n  const cashAccounts = accounts?.filter((acc) => acc.category === \"نقدية\") || [];\n  const bankAccounts = accounts?.filter((acc) => acc.category === \"البنك\") || [];\n\n  const createMutation = useMutation({\n    mutationFn: async (data: VoucherFormValues) => {\n      const payload = {\n        ...data,\n        allocations: [],\n      };\n      return apiRequest(\"POST\", \"/api/payment-vouchers\", payload);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/payment-vouchers\"] });\n      toast({\n        title: \"تم الحفظ\",\n        description: \"تم إنشاء السند بنجاح\",\n      });\n      setFormDialog({ open: false });\n      form.reset();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"فشل الحفظ\",\n        description: error.message || \"حدث خطأ أثناء إنشاء السند\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return apiRequest(\"DELETE\", `/api/payment-vouchers/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/payment-vouchers\"] });\n      toast({\n        title: \"تم الحذف\",\n        description: \"تم حذف السند بنجاح\",\n      });\n      setDeleteDialog({ open: false, id: null });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"فشل الحذف\",\n        description: error.message || \"حدث خطأ أثناء حذف السند\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const postMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return apiRequest(\"POST\", `/api/payment-vouchers/${id}/post`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/payment-vouchers\"] });\n      toast({\n        title: \"تم النشر\",\n        description: \"تم نشر السند بنجاح\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"فشل النشر\",\n        description: error.message || \"حدث خطأ أثناء نشر السند\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleDelete = (id: string) => {\n    setDeleteDialog({ open: true, id });\n  };\n\n  const confirmDelete = () => {\n    if (deleteDialog.id) {\n      deleteMutation.mutate(deleteDialog.id);\n    }\n  };\n\n  const handlePost = (id: string) => {\n    postMutation.mutate(id);\n  };\n\n  const openCreateDialog = () => {\n    form.reset({\n      voucherNumber: `PV-${Date.now()}`,\n      voucherDate: new Date().toISOString().split(\"T\")[0],\n      supplierId: \"\",\n      amount: \"\",\n      paymentMethod: \"نقداً\",\n      sourceAccountId: \"\",\n      checkNumber: \"\",\n      checkDate: \"\",\n      checkBank: \"\",\n      notes: \"\",\n    });\n    setFormDialog({ open: true });\n  };\n\n  const onSubmit = (data: VoucherFormValues) => {\n    createMutation.mutate(data);\n  };\n\n  const paymentMethod = form.watch(\"paymentMethod\");\n  const availableAccounts =\n    paymentMethod === \"نقداً\"\n      ? cashAccounts\n      : paymentMethod === \"تحويل بنكي\" || paymentMethod === \"شيك\"\n        ? bankAccounts\n        : [];\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\" data-testid=\"loading-state\">\n        <div className=\"text-center\">\n          <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n          <p className=\"mt-2 text-sm text-muted-foreground\">جاري التحميل...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"flex flex-col items-center justify-center h-64\" data-testid=\"error-state\">\n        <p className=\"text-destructive mb-4\">حدث خطأ أثناء جلب السندات</p>\n        <Button onClick={() => refetch()} data-testid=\"button-retry\">\n          إعادة المحاولة\n        </Button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">سندات الدفع</h1>\n          <p className=\"text-muted-foreground mt-1\">إدارة سندات دفع المبالغ إلى الموردين</p>\n        </div>\n        <Button onClick={openCreateDialog} data-testid=\"button-create-payment-voucher\">\n          <Plus className=\"ml-2 h-4 w-4\" />\n          سند جديد\n        </Button>\n      </div>\n\n      {vouchers && vouchers.length === 0 ? (\n        <div className=\"text-center py-12 border rounded-lg\" data-testid=\"empty-state\">\n          <p className=\"text-muted-foreground\">لا توجد سندات دفع حتى الآن</p>\n          <Button className=\"mt-4\" onClick={openCreateDialog} data-testid=\"button-create-first-payment-voucher\">\n            <Plus className=\"ml-2 h-4 w-4\" />\n            إنشاء أول سند\n          </Button>\n        </div>\n      ) : (\n        <div className=\"border rounded-lg\" data-testid=\"table-payment-vouchers\">\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead className=\"text-right\">رقم السند</TableHead>\n                <TableHead className=\"text-right\">التاريخ</TableHead>\n                <TableHead className=\"text-right\">المورد</TableHead>\n                <TableHead className=\"text-right\">المبلغ</TableHead>\n                <TableHead className=\"text-right\">طريقة الدفع</TableHead>\n                <TableHead className=\"text-right\">الحالة</TableHead>\n                <TableHead className=\"text-right\">إجراءات</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {vouchers?.map((voucher) => (\n                <TableRow key={voucher.id} data-testid={`row-payment-voucher-${voucher.id}`}>\n                  <TableCell className=\"font-medium\" data-testid={`text-payment-number-${voucher.id}`}>\n                    {voucher.voucherNumber}\n                  </TableCell>\n                  <TableCell data-testid={`text-payment-date-${voucher.id}`}>\n                    {new Date(voucher.voucherDate).toLocaleDateString(\"ar-SA\")}\n                  </TableCell>\n                  <TableCell data-testid={`text-payment-supplier-${voucher.id}`}>\n                    {voucher.supplierName}\n                  </TableCell>\n                  <TableCell data-testid={`text-payment-amount-${voucher.id}`}>\n                    {parseFloat(voucher.amount).toLocaleString(\"ar-SA\", {\n                      minimumFractionDigits: 2,\n                      maximumFractionDigits: 2,\n                    })}{\" \"}\n                    ريال\n                  </TableCell>\n                  <TableCell data-testid={`text-payment-method-${voucher.id}`}>\n                    {voucher.paymentMethod}\n                  </TableCell>\n                  <TableCell>\n                    <Badge\n                      variant={voucher.status === \"منشور\" ? \"default\" : \"secondary\"}\n                      data-testid={`badge-payment-status-${voucher.id}`}\n                    >\n                      {voucher.status}\n                    </Badge>\n                  </TableCell>\n                  <TableCell>\n                    <div className=\"flex gap-2\">\n                      {voucher.status === \"مسودة\" && (\n                        <>\n                          <Button\n                            size=\"sm\"\n                            variant=\"default\"\n                            onClick={() => handlePost(voucher.id)}\n                            disabled={postMutation.isPending}\n                            data-testid={`button-post-payment-${voucher.id}`}\n                          >\n                            <CheckCircle className=\"ml-2 h-4 w-4\" />\n                            نشر\n                          </Button>\n                          <Button\n                            size=\"sm\"\n                            variant=\"destructive\"\n                            onClick={() => handleDelete(voucher.id)}\n                            disabled={deleteMutation.isPending}\n                            data-testid={`button-delete-payment-${voucher.id}`}\n                          >\n                            <Trash2 className=\"h-4 w-4\" />\n                          </Button>\n                        </>\n                      )}\n                      {voucher.status === \"منشور\" && (\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          data-testid={`button-view-payment-${voucher.id}`}\n                        >\n                          <Eye className=\"ml-2 h-4 w-4\" />\n                          عرض\n                        </Button>\n                      )}\n                    </div>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </div>\n      )}\n\n      <Dialog open={formDialog.open} onOpenChange={(open) => setFormDialog({ open })}>\n        <DialogContent className=\"max-w-2xl\" data-testid=\"form-payment-voucher\">\n          <DialogHeader>\n            <DialogTitle>سند دفع جديد</DialogTitle>\n            <DialogDescription>\n              أدخل بيانات السند. يمكنك تعديله لاحقاً قبل النشر.\n            </DialogDescription>\n          </DialogHeader>\n\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"voucherNumber\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>رقم السند</FormLabel>\n                      <FormControl>\n                        <Input {...field} data-testid=\"input-payment-voucher-number\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"voucherDate\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>التاريخ</FormLabel>\n                      <FormControl>\n                        <Input type=\"date\" {...field} data-testid=\"input-payment-date\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <FormField\n                control={form.control}\n                name=\"supplierId\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>المورد</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-payment-supplier\">\n                          <SelectValue placeholder=\"اختر مورد\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        {suppliers?.map((supplier) => (\n                          <SelectItem\n                            key={supplier.id}\n                            value={supplier.id}\n                            data-testid={`option-payment-supplier-${supplier.id}`}\n                          >\n                            {supplier.code} - {supplier.name}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"amount\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>المبلغ</FormLabel>\n                      <FormControl>\n                        <Input\n                          type=\"number\"\n                          step=\"0.01\"\n                          {...field}\n                          data-testid=\"input-payment-amount\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"paymentMethod\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>طريقة الدفع</FormLabel>\n                      <Select onValueChange={field.onChange} value={field.value}>\n                        <FormControl>\n                          <SelectTrigger data-testid=\"select-payment-method\">\n                            <SelectValue />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          <SelectItem value=\"نقداً\" data-testid=\"option-payment-cash\">نقداً</SelectItem>\n                          <SelectItem value=\"تحويل بنكي\" data-testid=\"option-payment-transfer\">تحويل بنكي</SelectItem>\n                          <SelectItem value=\"شيك\" data-testid=\"option-payment-check\">شيك</SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <FormField\n                control={form.control}\n                name=\"sourceAccountId\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>حساب الدفع</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-payment-source-account\">\n                          <SelectValue placeholder=\"اختر حساب الدفع\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        {availableAccounts.map((account) => (\n                          <SelectItem\n                            key={account.id}\n                            value={account.id}\n                            data-testid={`option-payment-account-${account.id}`}\n                          >\n                            {account.code} - {account.name}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              {paymentMethod === \"شيك\" && (\n                <div className=\"grid grid-cols-3 gap-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"checkNumber\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>رقم الشيك</FormLabel>\n                        <FormControl>\n                          <Input {...field} data-testid=\"input-payment-check-number\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"checkDate\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>تاريخ الشيك</FormLabel>\n                        <FormControl>\n                          <Input type=\"date\" {...field} data-testid=\"input-payment-check-date\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"checkBank\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>البنك</FormLabel>\n                        <FormControl>\n                          <Input {...field} data-testid=\"input-payment-check-bank\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n              )}\n\n              <FormField\n                control={form.control}\n                name=\"notes\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>ملاحظات</FormLabel>\n                    <FormControl>\n                      <Textarea {...field} data-testid=\"input-payment-notes\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <div className=\"flex justify-end gap-2 pt-4\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={() => setFormDialog({ open: false })}\n                  data-testid=\"button-cancel-payment\"\n                >\n                  إلغاء\n                </Button>\n                <Button\n                  type=\"submit\"\n                  disabled={createMutation.isPending}\n                  data-testid=\"button-submit-payment\"\n                >\n                  {createMutation.isPending ? \"جاري الحفظ...\" : \"حفظ السند\"}\n                </Button>\n              </div>\n            </form>\n          </Form>\n        </DialogContent>\n      </Dialog>\n\n      <AlertDialog open={deleteDialog.open} onOpenChange={(open) => setDeleteDialog({ open, id: null })}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>تأكيد الحذف</AlertDialogTitle>\n            <AlertDialogDescription>\n              هل أنت متأكد من حذف هذا السند؟ لا يمكن التراجع عن هذا الإجراء.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel data-testid=\"button-cancel-delete-payment\">إلغاء</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={confirmDelete}\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n              data-testid=\"button-confirm-delete-payment\"\n            >\n              حذف\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}\n","size_bytes":22693}},"version":2}